/*! For license information please see products-editor.js.LICENSE.txt */
(function(){var __webpack_modules__={973:function(e){window,e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=72)}([function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,r(t)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return i})),r.d(t,"d",(function(){return a}));var n={};r.r(n),r.d(n,"EPSILON",(function(){return c})),r.d(n,"ARRAY_TYPE",(function(){return s})),r.d(n,"RANDOM",(function(){return u})),r.d(n,"setMatrixArrayType",(function(){return f})),r.d(n,"toRadian",(function(){return d})),r.d(n,"equals",(function(){return p}));var o={};r.r(o),r.d(o,"create",(function(){return h})),r.d(o,"clone",(function(){return v})),r.d(o,"copy",(function(){return m})),r.d(o,"identity",(function(){return g})),r.d(o,"fromValues",(function(){return y})),r.d(o,"set",(function(){return _})),r.d(o,"transpose",(function(){return b})),r.d(o,"invert",(function(){return x})),r.d(o,"adjoint",(function(){return C})),r.d(o,"determinant",(function(){return w})),r.d(o,"multiply",(function(){return S})),r.d(o,"rotate",(function(){return R})),r.d(o,"scale",(function(){return T})),r.d(o,"fromRotation",(function(){return E})),r.d(o,"fromScaling",(function(){return P})),r.d(o,"str",(function(){return k})),r.d(o,"frob",(function(){return O})),r.d(o,"LDU",(function(){return M})),r.d(o,"add",(function(){return D})),r.d(o,"subtract",(function(){return A})),r.d(o,"exactEquals",(function(){return j})),r.d(o,"equals",(function(){return I})),r.d(o,"multiplyScalar",(function(){return L})),r.d(o,"multiplyScalarAndAdd",(function(){return N})),r.d(o,"mul",(function(){return z})),r.d(o,"sub",(function(){return F}));var i={};r.r(i),r.d(i,"create",(function(){return U})),r.d(i,"clone",(function(){return B})),r.d(i,"fromValues",(function(){return G})),r.d(i,"copy",(function(){return q})),r.d(i,"set",(function(){return W})),r.d(i,"add",(function(){return V})),r.d(i,"subtract",(function(){return J})),r.d(i,"multiply",(function(){return H})),r.d(i,"divide",(function(){return X})),r.d(i,"ceil",(function(){return $})),r.d(i,"floor",(function(){return Y})),r.d(i,"min",(function(){return Q})),r.d(i,"max",(function(){return K})),r.d(i,"round",(function(){return Z})),r.d(i,"scale",(function(){return ee})),r.d(i,"scaleAndAdd",(function(){return te})),r.d(i,"distance",(function(){return re})),r.d(i,"squaredDistance",(function(){return ne})),r.d(i,"length",(function(){return oe})),r.d(i,"squaredLength",(function(){return ie})),r.d(i,"negate",(function(){return ae})),r.d(i,"inverse",(function(){return ce})),r.d(i,"normalize",(function(){return se})),r.d(i,"dot",(function(){return ue})),r.d(i,"cross",(function(){return fe})),r.d(i,"lerp",(function(){return le})),r.d(i,"random",(function(){return de})),r.d(i,"transformMat2",(function(){return pe})),r.d(i,"transformMat2d",(function(){return he})),r.d(i,"transformMat3",(function(){return ve})),r.d(i,"transformMat4",(function(){return me})),r.d(i,"rotate",(function(){return ge})),r.d(i,"angle",(function(){return ye})),r.d(i,"zero",(function(){return _e})),r.d(i,"str",(function(){return be})),r.d(i,"exactEquals",(function(){return xe})),r.d(i,"equals",(function(){return Ce})),r.d(i,"len",(function(){return Se})),r.d(i,"sub",(function(){return Re})),r.d(i,"mul",(function(){return Te})),r.d(i,"div",(function(){return Ee})),r.d(i,"dist",(function(){return Pe})),r.d(i,"sqrDist",(function(){return ke})),r.d(i,"sqrLen",(function(){return Oe})),r.d(i,"forEach",(function(){return Me}));var a={};r.r(a),r.d(a,"create",(function(){return De})),r.d(a,"clone",(function(){return Ae})),r.d(a,"length",(function(){return je})),r.d(a,"fromValues",(function(){return Ie})),r.d(a,"copy",(function(){return Le})),r.d(a,"set",(function(){return Ne})),r.d(a,"add",(function(){return ze})),r.d(a,"subtract",(function(){return Fe})),r.d(a,"multiply",(function(){return Ue})),r.d(a,"divide",(function(){return Be})),r.d(a,"ceil",(function(){return Ge})),r.d(a,"floor",(function(){return qe})),r.d(a,"min",(function(){return We})),r.d(a,"max",(function(){return Ve})),r.d(a,"round",(function(){return Je})),r.d(a,"scale",(function(){return He})),r.d(a,"scaleAndAdd",(function(){return Xe})),r.d(a,"distance",(function(){return $e})),r.d(a,"squaredDistance",(function(){return Ye})),r.d(a,"squaredLength",(function(){return Qe})),r.d(a,"negate",(function(){return Ke})),r.d(a,"inverse",(function(){return Ze})),r.d(a,"normalize",(function(){return et})),r.d(a,"dot",(function(){return tt})),r.d(a,"cross",(function(){return rt})),r.d(a,"lerp",(function(){return nt})),r.d(a,"hermite",(function(){return ot})),r.d(a,"bezier",(function(){return it})),r.d(a,"random",(function(){return at})),r.d(a,"transformMat4",(function(){return ct})),r.d(a,"transformMat3",(function(){return st})),r.d(a,"transformQuat",(function(){return ut})),r.d(a,"rotateX",(function(){return ft})),r.d(a,"rotateY",(function(){return lt})),r.d(a,"rotateZ",(function(){return dt})),r.d(a,"angle",(function(){return pt})),r.d(a,"zero",(function(){return ht})),r.d(a,"str",(function(){return vt})),r.d(a,"exactEquals",(function(){return mt})),r.d(a,"equals",(function(){return gt})),r.d(a,"sub",(function(){return yt})),r.d(a,"mul",(function(){return _t})),r.d(a,"div",(function(){return bt})),r.d(a,"dist",(function(){return xt})),r.d(a,"sqrDist",(function(){return Ct})),r.d(a,"len",(function(){return wt})),r.d(a,"sqrLen",(function(){return St})),r.d(a,"forEach",(function(){return Rt}));var c=1e-6,s="undefined"!=typeof Float32Array?Float32Array:Array,u=Math.random;function f(e){s=e}var l=Math.PI/180;function d(e){return e*l}function p(e,t){return Math.abs(e-t)<=c*Math.max(1,Math.abs(e),Math.abs(t))}function h(){var e=new s(4);return s!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}function v(e){var t=new s(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function m(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function g(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function y(e,t,r,n){var o=new s(4);return o[0]=e,o[1]=t,o[2]=r,o[3]=n,o}function _(e,t,r,n,o){return e[0]=t,e[1]=r,e[2]=n,e[3]=o,e}function b(e,t){if(e===t){var r=t[1];e[1]=t[2],e[2]=r}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e}function x(e,t){var r=t[0],n=t[1],o=t[2],i=t[3],a=r*i-o*n;return a?(a=1/a,e[0]=i*a,e[1]=-n*a,e[2]=-o*a,e[3]=r*a,e):null}function C(e,t){var r=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=r,e}function w(e){return e[0]*e[3]-e[2]*e[1]}function S(e,t,r){var n=t[0],o=t[1],i=t[2],a=t[3],c=r[0],s=r[1],u=r[2],f=r[3];return e[0]=n*c+i*s,e[1]=o*c+a*s,e[2]=n*u+i*f,e[3]=o*u+a*f,e}function R(e,t,r){var n=t[0],o=t[1],i=t[2],a=t[3],c=Math.sin(r),s=Math.cos(r);return e[0]=n*s+i*c,e[1]=o*s+a*c,e[2]=n*-c+i*s,e[3]=o*-c+a*s,e}function T(e,t,r){var n=t[0],o=t[1],i=t[2],a=t[3],c=r[0],s=r[1];return e[0]=n*c,e[1]=o*c,e[2]=i*s,e[3]=a*s,e}function E(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e}function P(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e}function k(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function O(e){return Math.hypot(e[0],e[1],e[2],e[3])}function M(e,t,r,n){return e[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-e[2]*r[1],[e,t,r]}function D(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function A(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function j(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function I(e,t){var r=e[0],n=e[1],o=e[2],i=e[3],a=t[0],s=t[1],u=t[2],f=t[3];return Math.abs(r-a)<=c*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-s)<=c*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-u)<=c*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(i-f)<=c*Math.max(1,Math.abs(i),Math.abs(f))}function L(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function N(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var z=S,F=A;function U(){var e=new s(2);return s!=Float32Array&&(e[0]=0,e[1]=0),e}function B(e){var t=new s(2);return t[0]=e[0],t[1]=e[1],t}function G(e,t){var r=new s(2);return r[0]=e,r[1]=t,r}function q(e,t){return e[0]=t[0],e[1]=t[1],e}function W(e,t,r){return e[0]=t,e[1]=r,e}function V(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function J(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function H(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function X(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function $(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function Y(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function Q(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function K(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function Z(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function ee(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function te(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e}function re(e,t){var r=t[0]-e[0],n=t[1]-e[1];return Math.hypot(r,n)}function ne(e,t){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function oe(e){var t=e[0],r=e[1];return Math.hypot(t,r)}function ie(e){var t=e[0],r=e[1];return t*t+r*r}function ae(e,t){return e[0]=-t[0],e[1]=-t[1],e}function ce(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function se(e,t){var r=t[0],n=t[1],o=r*r+n*n;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e}function ue(e,t){return e[0]*t[0]+e[1]*t[1]}function fe(e,t,r){var n=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=n,e}function le(e,t,r,n){var o=t[0],i=t[1];return e[0]=o+n*(r[0]-o),e[1]=i+n*(r[1]-i),e}function de(e,t){t=t||1;var r=2*u()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e}function pe(e,t,r){var n=t[0],o=t[1];return e[0]=r[0]*n+r[2]*o,e[1]=r[1]*n+r[3]*o,e}function he(e,t,r){var n=t[0],o=t[1];return e[0]=r[0]*n+r[2]*o+r[4],e[1]=r[1]*n+r[3]*o+r[5],e}function ve(e,t,r){var n=t[0],o=t[1];return e[0]=r[0]*n+r[3]*o+r[6],e[1]=r[1]*n+r[4]*o+r[7],e}function me(e,t,r){var n=t[0],o=t[1];return e[0]=r[0]*n+r[4]*o+r[12],e[1]=r[1]*n+r[5]*o+r[13],e}function ge(e,t,r,n){var o=t[0]-r[0],i=t[1]-r[1],a=Math.sin(n),c=Math.cos(n);return e[0]=o*c-i*a+r[0],e[1]=o*a+i*c+r[1],e}function ye(e,t){var r=e[0],n=e[1],o=t[0],i=t[1],a=Math.sqrt(r*r+n*n)*Math.sqrt(o*o+i*i),c=a&&(r*o+n*i)/a;return Math.acos(Math.min(Math.max(c,-1),1))}function _e(e){return e[0]=0,e[1]=0,e}function be(e){return"vec2("+e[0]+", "+e[1]+")"}function xe(e,t){return e[0]===t[0]&&e[1]===t[1]}function Ce(e,t){var r=e[0],n=e[1],o=t[0],i=t[1];return Math.abs(r-o)<=c*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-i)<=c*Math.max(1,Math.abs(n),Math.abs(i))}var we,Se=oe,Re=J,Te=H,Ee=X,Pe=re,ke=ne,Oe=ie,Me=(we=U(),function(e,t,r,n,o,i){var a,c;for(t||(t=2),r||(r=0),c=n?Math.min(n*t+r,e.length):e.length,a=r;a<c;a+=t)we[0]=e[a],we[1]=e[a+1],o(we,we,i),e[a]=we[0],e[a+1]=we[1];return e});function De(){var e=new s(3);return s!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Ae(e){var t=new s(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function je(e){var t=e[0],r=e[1],n=e[2];return Math.hypot(t,r,n)}function Ie(e,t,r){var n=new s(3);return n[0]=e,n[1]=t,n[2]=r,n}function Le(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ne(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e}function ze(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function Fe(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function Ue(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function Be(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function Ge(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function qe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function We(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function Ve(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function Je(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function He(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function Xe(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e}function $e(e,t){var r=t[0]-e[0],n=t[1]-e[1],o=t[2]-e[2];return Math.hypot(r,n,o)}function Ye(e,t){var r=t[0]-e[0],n=t[1]-e[1],o=t[2]-e[2];return r*r+n*n+o*o}function Qe(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function Ke(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function Ze(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function et(e,t){var r=t[0],n=t[1],o=t[2],i=r*r+n*n+o*o;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function tt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function rt(e,t,r){var n=t[0],o=t[1],i=t[2],a=r[0],c=r[1],s=r[2];return e[0]=o*s-i*c,e[1]=i*a-n*s,e[2]=n*c-o*a,e}function nt(e,t,r,n){var o=t[0],i=t[1],a=t[2];return e[0]=o+n*(r[0]-o),e[1]=i+n*(r[1]-i),e[2]=a+n*(r[2]-a),e}function ot(e,t,r,n,o,i){var a=i*i,c=a*(2*i-3)+1,s=a*(i-2)+i,u=a*(i-1),f=a*(3-2*i);return e[0]=t[0]*c+r[0]*s+n[0]*u+o[0]*f,e[1]=t[1]*c+r[1]*s+n[1]*u+o[1]*f,e[2]=t[2]*c+r[2]*s+n[2]*u+o[2]*f,e}function it(e,t,r,n,o,i){var a=1-i,c=a*a,s=i*i,u=c*a,f=3*i*c,l=3*s*a,d=s*i;return e[0]=t[0]*u+r[0]*f+n[0]*l+o[0]*d,e[1]=t[1]*u+r[1]*f+n[1]*l+o[1]*d,e[2]=t[2]*u+r[2]*f+n[2]*l+o[2]*d,e}function at(e,t){t=t||1;var r=2*u()*Math.PI,n=2*u()-1,o=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(r)*o,e[1]=Math.sin(r)*o,e[2]=n*t,e}function ct(e,t,r){var n=t[0],o=t[1],i=t[2],a=r[3]*n+r[7]*o+r[11]*i+r[15];return a=a||1,e[0]=(r[0]*n+r[4]*o+r[8]*i+r[12])/a,e[1]=(r[1]*n+r[5]*o+r[9]*i+r[13])/a,e[2]=(r[2]*n+r[6]*o+r[10]*i+r[14])/a,e}function st(e,t,r){var n=t[0],o=t[1],i=t[2];return e[0]=n*r[0]+o*r[3]+i*r[6],e[1]=n*r[1]+o*r[4]+i*r[7],e[2]=n*r[2]+o*r[5]+i*r[8],e}function ut(e,t,r){var n=r[0],o=r[1],i=r[2],a=r[3],c=t[0],s=t[1],u=t[2],f=o*u-i*s,l=i*c-n*u,d=n*s-o*c,p=o*d-i*l,h=i*f-n*d,v=n*l-o*f,m=2*a;return f*=m,l*=m,d*=m,p*=2,h*=2,v*=2,e[0]=c+f+p,e[1]=s+l+h,e[2]=u+d+v,e}function ft(e,t,r,n){var o=[],i=[];return o[0]=t[0]-r[0],o[1]=t[1]-r[1],o[2]=t[2]-r[2],i[0]=o[0],i[1]=o[1]*Math.cos(n)-o[2]*Math.sin(n),i[2]=o[1]*Math.sin(n)+o[2]*Math.cos(n),e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e}function lt(e,t,r,n){var o=[],i=[];return o[0]=t[0]-r[0],o[1]=t[1]-r[1],o[2]=t[2]-r[2],i[0]=o[2]*Math.sin(n)+o[0]*Math.cos(n),i[1]=o[1],i[2]=o[2]*Math.cos(n)-o[0]*Math.sin(n),e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e}function dt(e,t,r,n){var o=[],i=[];return o[0]=t[0]-r[0],o[1]=t[1]-r[1],o[2]=t[2]-r[2],i[0]=o[0]*Math.cos(n)-o[1]*Math.sin(n),i[1]=o[0]*Math.sin(n)+o[1]*Math.cos(n),i[2]=o[2],e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e}function pt(e,t){var r=e[0],n=e[1],o=e[2],i=t[0],a=t[1],c=t[2],s=Math.sqrt(r*r+n*n+o*o)*Math.sqrt(i*i+a*a+c*c),u=s&&tt(e,t)/s;return Math.acos(Math.min(Math.max(u,-1),1))}function ht(e){return e[0]=0,e[1]=0,e[2]=0,e}function vt(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function mt(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function gt(e,t){var r=e[0],n=e[1],o=e[2],i=t[0],a=t[1],s=t[2];return Math.abs(r-i)<=c*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-a)<=c*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-s)<=c*Math.max(1,Math.abs(o),Math.abs(s))}var yt=Fe,_t=Ue,bt=Be,xt=$e,Ct=Ye,wt=je,St=Qe,Rt=function(){var e=De();return function(t,r,n,o,i,a){var c,s;for(r||(r=3),n||(n=0),s=o?Math.min(o*r+n,t.length):t.length,c=n;c<s;c+=r)e[0]=t[c],e[1]=t[c+1],e[2]=t[c+2],i(e,e,a),t[c]=e[0],t[c+1]=e[1],t[c+2]=e[2];return t}}()},function(e,t,r){var n=r(17).default,o=r(1);e.exports=function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return o(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(40);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(139)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},function(e,t,r){"use strict";t.a={init:function(e,t){e.fill(t)},shuffle:function(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),n=[e[r],e[t]];e[t]=n[0],e[r]=n[1]}return e},toPointList:function(e){var t=e.reduce((function(e,t){var r="[".concat(t.join(","),"]");return e.push(r),e}),[]);return"[".concat(t.join(",\r\n"),"]")},threshold:function(e,t,r){return e.reduce((function(n,o){return r.apply(e,[o])>=t&&n.push(o),n}),[])},maxIndex:function(e){for(var t=0,r=0;r<e.length;r++)e[r]>e[t]&&(t=r);return t},max:function(e){for(var t=0,r=0;r<e.length;r++)e[r]>t&&(t=e[r]);return t},sum:function(e){for(var t=e.length,r=0;t--;)r+=e[t];return r}}},function(e,t,r){"use strict";r.d(t,"h",(function(){return c})),r.d(t,"i",(function(){return u})),r.d(t,"b",(function(){return f})),r.d(t,"j",(function(){return l})),r.d(t,"e",(function(){return d})),r.d(t,"c",(function(){return p})),r.d(t,"f",(function(){return h})),r.d(t,"g",(function(){return v})),r.d(t,"a",(function(){return g})),r.d(t,"d",(function(){return _}));var n=r(5),o=r(9);n.a.setMatrixArrayType(Array);var i=function(e,t){var r=[],o={rad:0,vec:n.c.clone([0,0])},i={};function a(e){i[e.id]=e,r.push(e)}function c(){var e,t=0;for(e=0;e<r.length;e++)t+=r[e].rad;o.rad=t/r.length,o.vec=n.c.clone([Math.cos(o.rad),Math.sin(o.rad)])}return a(e),c(),{add:function(e){i[e.id]||(a(e),c())},fits:function(e){return Math.abs(n.c.dot(e.point.vec,o.vec))>t},getPoints:function(){return r},getCenter:function(){return o}}},a=function(e,t,r){return{rad:e[r],point:e,id:t}};function c(e,t){return{x:e,y:t,toVec2:function(){return n.c.clone([this.x,this.y])},toVec3:function(){return n.d.clone([this.x,this.y,1])},round:function(){return this.x=this.x>0?Math.floor(this.x+.5):Math.floor(this.x-.5),this.y=this.y>0?Math.floor(this.y+.5):Math.floor(this.y-.5),this}}}function s(e,t){t||(t=8);for(var r=e.data,n=r.length,o=8-t,i=new Int32Array(1<<t);n--;)i[r[n]>>o]++;return i}function u(e,t){var r=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=8-r;function i(e,r){for(var n=0,o=e;o<=r;o++)n+=t[o];return n}function a(e,r){for(var n=0,o=e;o<=r;o++)n+=o*t[o];return n}function c(){var n,c,u,f,l=[0],d=(1<<r)-1;t=s(e,r);for(var p=1;p<d;p++)0==(u=(n=i(0,p))*(c=i(p+1,d)))&&(u=1),f=a(0,p)*c-a(p+1,d)*n,l[p]=f*f/u;return o.a.maxIndex(l)}return c()<<n}(e);return function(e,t,r){r||(r=e);for(var n=e.data,o=n.length,i=r.data;o--;)i[o]=n[o]<t?1:0}(e,r,t),r}function f(e,t,r){var n,o,c,s,u=[];function f(e){var t=!1;for(o=0;o<u.length;o++)(c=u[o]).fits(e)&&(c.add(e),t=!0);return t}for(r||(r="rad"),n=0;n<e.length;n++)f(s=a(e[n],n,r))||u.push(i(s,t));return u}function l(e,t,r){var n,o,i,a,c=0,s=0,u=[];for(n=0;n<t;n++)u[n]={score:0,item:null};for(n=0;n<e.length;n++)if((o=r.apply(this,[e[n]]))>s)for((i=u[c]).score=o,i.item=e[n],s=Number.MAX_VALUE,a=0;a<t;a++)u[a].score<s&&(s=u[a].score,c=a);return u}function d(e,t,r){for(var n,o=0,i=t.x,a=Math.floor(e.length/4),c=t.x/2,s=0,u=t.x;i<a;){for(n=0;n<c;n++)r[s]=(.299*e[4*o+0]+.587*e[4*o+1]+.114*e[4*o+2]+(.299*e[4*(o+1)+0]+.587*e[4*(o+1)+1]+.114*e[4*(o+1)+2])+(.299*e[4*i+0]+.587*e[4*i+1]+.114*e[4*i+2])+(.299*e[4*(i+1)+0]+.587*e[4*(i+1)+1]+.114*e[4*(i+1)+2]))/4,s++,o+=2,i+=2;o+=u,i+=u}}function p(e,t,r){var n=e.length/4|0;if(r&&!0===r.singleChannel)for(var o=0;o<n;o++)t[o]=e[4*o+0];else for(var i=0;i<n;i++)t[i]=.299*e[4*i+0]+.587*e[4*i+1]+.114*e[4*i+2]}function h(e,t){for(var r=e.data,n=e.size.x,o=t.data,i=0,a=n,c=r.length,s=n/2,u=0;a<c;){for(var f=0;f<s;f++)o[u]=Math.floor((r[i]+r[i+1]+r[a]+r[a+1])/4),u++,i+=2,a+=2;i+=n,a+=n}}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],r=e[0],n=e[1],o=e[2],i=o*n,a=i*(1-Math.abs(r/60%2-1)),c=o-i,s=0,u=0,f=0;return r<60?(s=i,u=a):r<120?(s=a,u=i):r<180?(u=i,f=a):r<240?(u=a,f=i):r<300?(s=a,f=i):r<360&&(s=i,f=a),t[0]=255*(s+c)|0,t[1]=255*(u+c)|0,t[2]=255*(f+c)|0,t}function m(e){for(var t=[],r=[],n=1;n<Math.sqrt(e)+1;n++)e%n==0&&(r.push(n),n!==e/n&&t.unshift(Math.floor(e/n)));return r.concat(t)}function g(e,t){var r,n=m(t.x),o=m(t.y),i=Math.max(t.x,t.y),a=function(e,t){for(var r=0,n=0,o=[];r<e.length&&n<t.length;)e[r]===t[n]?(o.push(e[r]),r++,n++):e[r]>t[n]?n++:r++;return o}(n,o),c=[8,10,15,20,32,60,80],s={"x-small":5,small:4,medium:3,large:2,"x-large":1},u=s[e]||s.medium,f=c[u],l=Math.floor(i/f);function d(e){for(var t=0,r=e[Math.floor(e.length/2)];t<e.length-1&&e[t]<l;)t++;return t>0&&(r=Math.abs(e[t]-l)>Math.abs(e[t-1]-l)?e[t-1]:e[t]),l/r<c[u+1]/c[u]&&l/r>c[u-1]/c[u]?{x:r,y:r}:null}return(r=d(a))||(r=d(m(i)))||(r=d(m(l*f))),r}n.a.setMatrixArrayType(Array);var y={top:function(e,t){return"%"===e.unit?Math.floor(t.height*(e.value/100)):null},right:function(e,t){return"%"===e.unit?Math.floor(t.width-t.width*(e.value/100)):null},bottom:function(e,t){return"%"===e.unit?Math.floor(t.height-t.height*(e.value/100)):null},left:function(e,t){return"%"===e.unit?Math.floor(t.width*(e.value/100)):null}};function _(e,t,r){var n={width:e,height:t},o=Object.keys(r).reduce((function(e,t){var o=function(e){return{value:parseFloat(e),unit:(e.indexOf("%"),e.length,"%")}}(r[t]),i=y[t](o,n);return e[t]=i,e}),{});return{sx:o.left,sy:o.top,sw:o.right-o.left,sh:o.bottom-o.top}}},function(e,t,r){"use strict";var n=r(61),o=r.n(n),i=r(3),a=r.n(i),c=r(4),s=r.n(c),u=r(0),f=r.n(u),l=r(5),d=r(9),p=r(10);function h(e){if(e<0)throw new Error("expected positive number, received ".concat(e))}l.a.setMatrixArrayType(Array);var v=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Uint8Array,o=arguments.length>3?arguments[3]:void 0;a()(this,e),f()(this,"data",void 0),f()(this,"size",void 0),f()(this,"indexMapping",void 0),r?this.data=r:(this.data=new n(t.x*t.y),o&&d.a.init(this.data,0)),this.size=t}return s()(e,[{key:"inImageWithBorder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return h(t),e.x>=0&&e.y>=0&&e.x<this.size.x+2*t&&e.y<this.size.y+2*t}},{key:"subImageAsCopy",value:function(e,t){h(t.x),h(t.y);for(var r=e.size,n=r.x,o=r.y,i=0;i<n;i++)for(var a=0;a<o;a++)e.data[a*n+i]=this.data[(t.y+a)*this.size.x+t.x+i];return e}},{key:"get",value:function(e,t){return this.data[t*this.size.x+e]}},{key:"getSafe",value:function(e,t){if(!this.indexMapping){this.indexMapping={x:[],y:[]};for(var r=0;r<this.size.x;r++)this.indexMapping.x[r]=r,this.indexMapping.x[r+this.size.x]=r;for(var n=0;n<this.size.y;n++)this.indexMapping.y[n]=n,this.indexMapping.y[n+this.size.y]=n}return this.data[this.indexMapping.y[t+this.size.y]*this.size.x+this.indexMapping.x[e+this.size.x]]}},{key:"set",value:function(e,t,r){return this.data[t*this.size.x+e]=r,delete this.indexMapping,this}},{key:"zeroBorder",value:function(){for(var e=this.size,t=e.x,r=e.y,n=0;n<t;n++)this.data[n]=this.data[(r-1)*t+n]=0;for(var o=1;o<r-1;o++)this.data[o*t]=this.data[o*t+(t-1)]=0;return delete this.indexMapping,this}},{key:"moments",value:function(e){var t,r,n,o,i,a,c,s,u,f,d=this.data,p=this.size.y,h=this.size.x,v=[],m=[],g=Math.PI,y=g/4;if(e<=0)return m;for(i=0;i<e;i++)v[i]={m00:0,m01:0,m10:0,m11:0,m02:0,m20:0,theta:0,rad:0};for(r=0;r<p;r++)for(o=r*r,t=0;t<h;t++)(n=d[r*h+t])>0&&((a=v[n-1]).m00+=1,a.m01+=r,a.m10+=t,a.m11+=t*r,a.m02+=o,a.m20+=t*t);for(i=0;i<e;i++)a=v[i],isNaN(a.m00)||0===a.m00||(s=a.m10/a.m00,u=a.m01/a.m00,c=a.m11/a.m00-s*u,f=(a.m02/a.m00-u*u-(a.m20/a.m00-s*s))/(2*c),f=.5*Math.atan(f)+(c>=0?y:-y)+g,a.theta=(180*f/g+90)%180-90,a.theta<0&&(a.theta+=180),a.rad=f>g?f-g:f,a.vec=l.c.clone([Math.cos(f),Math.sin(f)]),m.push(a));return m}},{key:"getAsRGBA",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=new Uint8ClampedArray(4*this.size.x*this.size.y),r=0;r<this.size.y;r++)for(var n=0;n<this.size.x;n++){var o=r*this.size.x+n,i=this.get(n,r)*e;t[4*o+0]=i,t[4*o+1]=i,t[4*o+2]=i,t[4*o+3]=255}return t}},{key:"show",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;console.warn("* imagewrapper show getcontext 2d");var r=e.getContext("2d");if(!r)throw new Error("Unable to get canvas context");var n=r.getImageData(0,0,e.width,e.height),o=this.getAsRGBA(t);e.width=this.size.x,e.height=this.size.y;var i=new ImageData(o,n.width,n.height);r.putImageData(i,0,0)}},{key:"overlay",value:function(e,t,r){var n=t<0||t>360?360:t,i=[0,1,1],a=[0,0,0],c=[255,255,255],s=[0,0,0];console.warn("* imagewrapper overlay getcontext 2d");var u=e.getContext("2d");if(!u)throw new Error("Unable to get canvas context");for(var f=u.getImageData(r.x,r.y,this.size.x,this.size.y),l=f.data,d=this.data.length;d--;){i[0]=this.data[d]*n;var h=4*d,v=i[0]<=0?c:i[0]>=360?s:Object(p.g)(i,a),m=o()(v,3);l[h]=m[0],l[h+1]=m[1],l[h+2]=m[2],l[h+3]=255}u.putImageData(f,r.x,r.y)}}]),e}();t.a=v},function(e,t){function r(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}e.exports=function(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function c(e){r(a,o,i,c,s,"next",e)}function s(e){r(a,o,i,c,s,"throw",e)}c(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(140);function o(){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=o=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=o=function(e,t,r){var o=n(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},e.exports.__esModule=!0,e.exports.default=e.exports),o.apply(this,arguments)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t){var r=Array.isArray;e.exports=r},function(e,t,r){"use strict";t.a={drawRect:function(e,t,r,n){r.strokeStyle=n.color,r.fillStyle=n.color,r.lineWidth=n.lineWidth||1,r.beginPath(),r.strokeRect(e.x,e.y,t.x,t.y)},drawPath:function(e,t,r,n){r.strokeStyle=n.color,r.fillStyle=n.color,r.lineWidth=n.lineWidth,r.beginPath(),r.moveTo(e[0][t.x],e[0][t.y]);for(var o=1;o<e.length;o++)r.lineTo(e[o][t.x],e[o][t.y]);r.closePath(),r.stroke()},drawImage:function(e,t,r){var n=r.getImageData(0,0,t.x,t.y),o=n.data,i=o.length,a=e.length;if(i/a!=4)return!1;for(;a--;){var c=e[a];o[--i]=255,o[--i]=c,o[--i]=c,o[--i]=c}return r.putImageData(n,0,0),!0}}},function(e,t){function r(t){return e.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,r(t)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(73),o=r(128)((function(e,t,r){n(e,t,r)}));e.exports=o},function(e,t,r){var n=r(44),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();e.exports=i},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,r){"use strict";t.a={searchDirections:[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],create:function(e,t){var r,n=e.data,o=t.data,i=this.searchDirections,a=e.size.x;function c(e,t,c,s){var u,f,l;for(u=0;u<i.length;u++){if(f=e.cy+i[e.dir][0],l=e.cx+i[e.dir][1],n[r=f*a+l]===t&&(0===o[r]||o[r]===c))return o[r]=c,e.cy=f,e.cx=l,!0;0===o[r]&&(o[r]=s),e.dir=(e.dir+1)%8}return!1}function s(e,t,r){return{dir:r,x:e,y:t,next:null,prev:null}}return{trace:function(e,t,r,n){return c(e,t,r,n)},contourTracing:function(t,r,n,o,i){return function(t,r,n,o,i){var a,u,f,l=null,d={cx:r,cy:t,dir:0};if(c(d,o,n,i)){a=l=s(r,t,d.dir),f=d.dir,(u=s(d.cx,d.cy,0)).prev=a,a.next=u,u.next=null,a=u;var p=e.size.x*e.size.y,h=0;do{d.dir=(d.dir+6)%8,c(d,o,n,i),f!==d.dir?(a.dir=d.dir,(u=s(d.cx,d.cy,0)).prev=a,a.next=u,u.next=null,a=u):(a.dir=f,a.x=d.cx,a.y=d.cy),f=d.dir}while((d.cx!==r||d.cy!==t)&&++h<p);l.prev=a.prev,a.prev.next=l}return l}(t,r,n,o,i)}}}}},function(e,t,r){var n=r(27),o=r(86),i=r(87),a=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):i(e)}},function(e,t,r){"use strict";(function(e){var n,o,i,a,c,s,u,f,l,d,p=r(5),h=r(11),v=r(10),m=r(9),g=(r(16),r(64)),y=r(21),_=r(65);p.a.setMatrixArrayType(Array);var b,x,C={ctx:{binary:null},dom:{binary:null}},w={x:0,y:0};function S(e){var t,r,o,i,a,c,s,u=l.size.x,f=l.size.y,d=-l.size.x,h=-l.size.y;for(t=0,r=0;r<e.length;r++)t+=(i=e[r]).rad;for((t=(180*(t/=e.length)/Math.PI+90)%180-90)<0&&(t+=180),t=(180-t)*Math.PI/180,a=p.b.copy(p.b.create(),[Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t)]),r=0;r<e.length;r++)for(i=e[r],o=0;o<4;o++)p.c.transformMat2(i.box[o],i.box[o],a);for(r=0;r<e.length;r++)for(i=e[r],o=0;o<4;o++)i.box[o][0]<u&&(u=i.box[o][0]),i.box[o][0]>d&&(d=i.box[o][0]),i.box[o][1]<f&&(f=i.box[o][1]),i.box[o][1]>h&&(h=i.box[o][1]);for(c=[[u,f],[d,f],[d,h],[u,h]],s=n.halfSample?2:1,a=p.b.invert(a,a),o=0;o<4;o++)p.c.transformMat2(c[o],c[o],a);for(o=0;o<4;o++)p.c.scale(c[o],c[o],s);return c}function R(e,t){l.subImageAsCopy(a,Object(v.h)(e,t)),x.skeletonize()}function T(e,t,r,n){var o,i,c,s,u=[],f=[],l=Math.ceil(d.x/3);if(e.length>=2){for(o=0;o<e.length;o++)e[o].m00>l&&u.push(e[o]);if(u.length>=2){for(c=function(e){var t=Object(v.b)(e,.9),r=Object(v.j)(t,1,(function(e){return e.getPoints().length})),n=[],o=[];if(1===r.length){n=r[0].item.getPoints();for(var i=0;i<n.length;i++)o.push(n[i].point)}return o}(u),i=0,o=0;o<c.length;o++){var h,m;i+=null!==(h=null===(m=c[o])||void 0===m?void 0:m.rad)&&void 0!==h?h:0}c.length>1&&c.length>=u.length/4*3&&c.length>e.length/4&&(i/=c.length,s={index:t[1]*w.x+t[0],pos:{x:r,y:n},box:[p.c.clone([r,n]),p.c.clone([r+a.size.x,n]),p.c.clone([r+a.size.x,n+a.size.y]),p.c.clone([r,n+a.size.y])],moments:c,rad:i,vec:p.c.clone([Math.cos(i),Math.sin(i)])},f.push(s))}}return f}t.a={init:function(t,r){n=r,b=t,function(){o=n.halfSample?new h.a({x:b.size.x/2|0,y:b.size.y/2|0}):b,d=Object(v.a)(n.patchSize,o.size),w.x=o.size.x/d.x|0,w.y=o.size.y/d.y|0,l=new h.a(o.size,void 0,Uint8Array,!1),c=new h.a(d,void 0,Array,!0);var t=new ArrayBuffer(65536);a=new h.a(d,new Uint8Array(t,0,d.x*d.y)),i=new h.a(d,new Uint8Array(t,d.x*d.y*3,d.x*d.y),void 0,!0),x=Object(_.a)("undefined"!=typeof window?window:"undefined"!=typeof self?self:e,{size:d.x},t),f=new h.a({x:o.size.x/a.size.x|0,y:o.size.y/a.size.y|0},void 0,Array,!0),s=new h.a(f.size,void 0,void 0,!0),u=new h.a(f.size,void 0,Int32Array,!0)}(),function(){if(!n.useWorker&&"undefined"!=typeof document){C.dom.binary=document.createElement("canvas"),C.dom.binary.className="binaryBuffer";var e=!!n.willReadFrequently;console.warn("* initCanvas willReadFrequently",e,n),C.ctx.binary=C.dom.binary.getContext("2d",{willReadFrequently:e}),C.dom.binary.width=l.size.x,C.dom.binary.height=l.size.y}}()},locate:function(){n.halfSample&&Object(v.f)(b,o),Object(v.i)(o,l),l.zeroBorder();var e=function(){var e,t,r,n,o,s,u=[];for(e=0;e<w.x;e++)for(t=0;t<w.y;t++)R(r=a.size.x*e,n=a.size.y*t),i.zeroBorder(),m.a.init(c.data,0),s=g.a.create(i,c).rasterize(0),o=c.moments(s.count),u=u.concat(T(o,[e,t],r,n));return u}();if(e.length<w.x*w.y*.05)return null;var t=function(e){var t,r,n=0,o=0;function i(){var e;for(e=0;e<u.data.length;e++)if(0===u.data[e]&&1===s.data[e])return e;return u.data.length}function a(e){var t,r,o,i,c,l=e%u.size.x,d=e/u.size.x|0;if(e<u.data.length)for(o=f.data[e],u.data[e]=n,c=0;c<y.a.searchDirections.length;c++)r=d+y.a.searchDirections[c][0],t=l+y.a.searchDirections[c][1],i=r*u.size.x+t,0!==s.data[i]?0===u.data[i]&&Math.abs(p.c.dot(f.data[i].vec,o.vec))>.95&&a(i):u.data[i]=Number.MAX_VALUE}for(m.a.init(s.data,0),m.a.init(u.data,0),m.a.init(f.data,null),t=0;t<e.length;t++)r=e[t],f.data[r.index]=r,s.data[r.index]=1;for(s.zeroBorder();(o=i())<u.data.length;)n++,a(o);return n}(e);if(t<1)return null;var r=function(e){var t,r,n=[];for(t=0;t<e;t++)n.push(0);for(r=u.data.length;r--;)u.data[r]>0&&n[u.data[r]-1]++;return(n=n.map((function(e,t){return{val:e,label:t+1}}))).sort((function(e,t){return t.val-e.val})),n.filter((function(e){return e.val>=5}))}(t);return 0===r.length?null:function(e,t){var r,n,o,i,a=[],c=[];for(r=0;r<e.length;r++){for(n=u.data.length,a.length=0;n--;)u.data[n]===e[r].label&&(o=f.data[n],a.push(o));(i=S(a))&&c.push(i)}return c}(r)},checkImageConstraints:function(e,t){var r,n,o=e.getWidth(),i=e.getHeight(),a=t.halfSample?.5:1;e.getConfig().area&&(n=Object(v.d)(o,i,e.getConfig().area),e.setTopRight({x:n.sx,y:n.sy}),e.setCanvasSize({x:o,y:i}),o=n.sw,i=n.sh);var c={x:Math.floor(o*a),y:Math.floor(i*a)};if(r=Object(v.a)(t.patchSize,c),e.setWidth(Math.floor(Math.floor(c.x/r.x)*(1/a)*r.x)),e.setHeight(Math.floor(Math.floor(c.y/r.y)*(1/a)*r.y)),e.getWidth()%r.x==0&&e.getHeight()%r.y==0)return!0;throw new Error("Image dimensions do not comply with the current settings: Width (".concat(o," )and height (").concat(i,") must a multiple of ").concat(r.x))}}}).call(this,r(45))},function(e,t,r){var n=r(75),o=r(76),i=r(77),a=r(78),c=r(79);function s(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s.prototype.clear=n,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=c,e.exports=s},function(e,t,r){var n=r(26);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,r){var n=r(19).Symbol;e.exports=n},function(e,t,r){var n=r(34)(Object,"create");e.exports=n},function(e,t,r){var n=r(100);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},function(e,t,r){var n=r(115),o=r(20),i=Object.prototype,a=i.hasOwnProperty,c=i.propertyIsEnumerable,s=n(function(){return arguments}())?n:function(e){return o(e)&&a.call(e,"callee")&&!c.call(e,"callee")};e.exports=s},function(e,t){var r=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&r.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,r){var n=r(15),o=r(147),i=r(148),a=r(151);e.exports=function(e,t){return n(e)?e:o(e,t)?[e]:i(a(e))}},function(e,t,r){var n=r(141),o=r(142),i=r(59),a=r(143);e.exports=function(e){return n(e)||o(e)||i(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(85),o=r(91);e.exports=function(e,t){var r=o(e,t);return n(r)?r:void 0}},function(e,t,r){var n=r(22),o=r(14);e.exports=function(e){if(!o(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,r){var n=r(48);e.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){var n=r(35),o=r(39);e.exports=function(e){return null!=e&&o(e.length)&&!n(e)}},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t){function r(t,n){return e.exports=r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,r(t,n)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(22),o=r(20);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==n(e)}},function(e,t,r){var n=r(41);e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(e,t,r){var n=r(34)(r(19),"Map");e.exports=n},function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(this,r(45))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var n=r(92),o=r(99),i=r(101),a=r(102),c=r(103);function s(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s.prototype.clear=n,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=c,e.exports=s},function(e,t,r){var n=r(36),o=r(26);e.exports=function(e,t,r){(void 0!==r&&!o(e[t],r)||void 0===r&&!(t in e))&&n(e,t,r)}},function(e,t,r){var n=r(34),o=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,r){var n=r(114)(Object.getPrototypeOf,Object);e.exports=n},function(e,t){var r=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},function(e,t,r){(function(e){var n=r(19),o=r(117),i=t&&!t.nodeType&&t,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,c=a&&a.exports===i?n.Buffer:void 0,s=(c?c.isBuffer:void 0)||o;e.exports=s}).call(this,r(37)(e))},function(e,t,r){var n=r(119),o=r(120),i=r(121),a=i&&i.isTypedArray,c=a?o(a):n;e.exports=c},function(e,t){e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},function(e,t,r){var n=r(36),o=r(26),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,r){var a=e[t];i.call(e,t)&&o(a,r)&&(void 0!==r||t in e)||n(e,t,r)}},function(e,t,r){var n=r(124),o=r(126),i=r(38);e.exports=function(e){return i(e)?n(e,!0):o(e)}},function(e,t){e.exports=function(e){return e}},function(e,t,r){var n=r(130),o=Math.max;e.exports=function(e,t,r){return t=o(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,c=o(i.length-t,0),s=Array(c);++a<c;)s[a]=i[t+a];a=-1;for(var u=Array(t+1);++a<t;)u[a]=i[a];return u[t]=r(s),n(e,this,u)}}},function(e,t,r){var n=r(131),o=r(133)(n);e.exports=o},function(e,t,r){var n=r(60);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(136),o=r(137),i=r(59),a=r(138);e.exports=function(e,t){return n(e)||o(e,t)||i(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(144),o=r(158)((function(e,t){return null==e?{}:n(e,t)}));e.exports=o},function(e,t,r){var n=r(2),o=r(40),i=r(163),a=r(164);function c(t){var r="function"==typeof Map?new Map:void 0;return e.exports=c=function(e){if(null===e||!i(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return a(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,c(t)}e.exports=c,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){"use strict";var n=r(21),o={createContour2D:function(){return{dir:null,index:null,firstVertex:null,insideContours:null,nextpeer:null,prevpeer:null}},CONTOUR_DIR:{CW_DIR:0,CCW_DIR:1,UNKNOWN_DIR:2},DIR:{OUTSIDE_EDGE:-32767,INSIDE_EDGE:-32766},create:function(e,t){var r=e.data,i=t.data,a=e.size.x,c=e.size.y,s=n.a.create(e,t);return{rasterize:function(e){var t,n,u,f,l,d,p,h,v,m,g,y,_=[],b=0;for(y=0;y<400;y++)_[y]=0;for(_[0]=r[0],v=null,d=1;d<c-1;d++)for(f=0,n=_[0],l=1;l<a-1;l++)if(0===i[g=d*a+l])if((t=r[g])!==n){if(0===f)_[u=b+1]=t,n=t,null!==(p=s.contourTracing(d,l,u,t,o.DIR.OUTSIDE_EDGE))&&(b++,f=u,(h=o.createContour2D()).dir=o.CONTOUR_DIR.CW_DIR,h.index=f,h.firstVertex=p,h.nextpeer=v,h.insideContours=null,null!==v&&(v.prevpeer=h),v=h);else if(null!==(p=s.contourTracing(d,l,o.DIR.INSIDE_EDGE,t,f))){for((h=o.createContour2D()).firstVertex=p,h.insideContours=null,h.dir=0===e?o.CONTOUR_DIR.CCW_DIR:o.CONTOUR_DIR.CW_DIR,h.index=e,m=v;null!==m&&m.index!==f;)m=m.nextpeer;null!==m&&(h.nextpeer=m.insideContours,null!==m.insideContours&&(m.insideContours.prevpeer=h),m.insideContours=h)}}else i[g]=f;else i[g]===o.DIR.OUTSIDE_EDGE||i[g]===o.DIR.INSIDE_EDGE?(f=0,n=i[g]===o.DIR.INSIDE_EDGE?r[g]:_[0]):n=_[f=i[g]];for(m=v;null!==m;)m.index=e,m=m.nextpeer;return{cc:v,count:b}},debug:{drawContour:function(e,t){var r,n,i,a=e.getContext("2d"),c=t;for(a.strokeStyle="red",a.fillStyle="red",a.lineWidth=1,r=null!==c?c.insideContours:null;null!==c;){switch(null!==r?(n=r,r=r.nextpeer):(n=c,r=null!==(c=c.nextpeer)?c.insideContours:null),n.dir){case o.CONTOUR_DIR.CW_DIR:a.strokeStyle="red";break;case o.CONTOUR_DIR.CCW_DIR:a.strokeStyle="blue";break;case o.CONTOUR_DIR.UNKNOWN_DIR:a.strokeStyle="green"}i=n.firstVertex,a.beginPath(),a.moveTo(i.x,i.y);do{i=i.next,a.lineTo(i.x,i.y)}while(i!==n.firstVertex);a.stroke()}}}}}};t.a=o},function(e,t,r){"use strict";t.a=function(e,t,r){"use asm";var n=new e.Uint8Array(r),o=t.size|0,i=e.Math.imul;function a(e,t){e|=0;t|=0;var r=0;var i=0;var a=0;var c=0;var s=0;var u=0;var f=0;var l=0;for(r=1;(r|0)<(o-1|0);r=r+1|0){l=l+o|0;for(i=1;(i|0)<(o-1|0);i=i+1|0){c=l-o|0;s=l+o|0;u=i-1|0;f=i+1|0;a=(n[e+c+u|0]|0)+(n[e+c+f|0]|0)+(n[e+l+i|0]|0)+(n[e+s+u|0]|0)+(n[e+s+f|0]|0)|0;if((a|0)==(5|0)){n[t+l+i|0]=1}else{n[t+l+i|0]=0}}}}function c(e,t,r){e|=0;t|=0;r|=0;var a=0;a=i(o,o)|0;while((a|0)>0){a=a-1|0;n[r+a|0]=(n[e+a|0]|0)-(n[t+a|0]|0)|0}}function s(e,t,r){e|=0;t|=0;r|=0;var a=0;a=i(o,o)|0;while((a|0)>0){a=a-1|0;n[r+a|0]=n[e+a|0]|0|(n[t+a|0]|0)|0}}function u(e){e|=0;var t=0;var r=0;r=i(o,o)|0;while((r|0)>0){r=r-1|0;t=(t|0)+(n[e+r|0]|0)|0}return t|0}function f(e,t){e|=0;t|=0;var r=0;r=i(o,o)|0;while((r|0)>0){r=r-1|0;n[e+r|0]=t}}function l(e,t){e|=0;t|=0;var r=0;var i=0;var a=0;var c=0;var s=0;var u=0;var f=0;var l=0;for(r=1;(r|0)<(o-1|0);r=r+1|0){l=l+o|0;for(i=1;(i|0)<(o-1|0);i=i+1|0){c=l-o|0;s=l+o|0;u=i-1|0;f=i+1|0;a=(n[e+c+u|0]|0)+(n[e+c+f|0]|0)+(n[e+l+i|0]|0)+(n[e+s+u|0]|0)+(n[e+s+f|0]|0)|0;if((a|0)>(0|0)){n[t+l+i|0]=1}else{n[t+l+i|0]=0}}}}function d(e,t){e|=0;t|=0;var r=0;r=i(o,o)|0;while((r|0)>0){r=r-1|0;n[t+r|0]=n[e+r|0]|0}}function p(e){e|=0;var t=0;var r=0;for(t=0;(t|0)<(o-1|0);t=t+1|0){n[e+t|0]=0;n[e+r|0]=0;r=r+o-1|0;n[e+r|0]=0;r=r+1|0}for(t=0;(t|0)<(o|0);t=t+1|0){n[e+r|0]=0;r=r+1|0}}function h(){var e=0;var t=0;var r=0;var n=0;var h=0;var v=0;t=i(o,o)|0;r=t+t|0;n=r+t|0;f(n,0);p(e);do{a(e,t);l(t,r);c(e,r,r);s(n,r,n);d(t,e);h=u(e)|0;v=(h|0)==0|0}while(!v)}return{skeletonize:h}}},,,,,,,function(e,t,r){e.exports=r(166)},function(e,t,r){var n=r(74),o=r(47),i=r(104),a=r(106),c=r(14),s=r(55),u=r(53);e.exports=function e(t,r,f,l,d){t!==r&&i(r,(function(i,s){if(d||(d=new n),c(i))a(t,r,s,f,e,l,d);else{var p=l?l(u(t,s),i,s+"",t,r,d):void 0;void 0===p&&(p=i),o(t,s,p)}}),s)}},function(e,t,r){var n=r(24),o=r(80),i=r(81),a=r(82),c=r(83),s=r(84);function u(e){var t=this.__data__=new n(e);this.size=t.size}u.prototype.clear=o,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=c,u.prototype.set=s,e.exports=u},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,r){var n=r(25),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0||(r==t.length-1?t.pop():o.call(t,r,1),--this.size,0))}},function(e,t,r){var n=r(25);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},function(e,t,r){var n=r(25);e.exports=function(e){return n(this.__data__,e)>-1}},function(e,t,r){var n=r(25);e.exports=function(e,t){var r=this.__data__,o=n(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this}},function(e,t,r){var n=r(24);e.exports=function(){this.__data__=new n,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,r){var n=r(24),o=r(43),i=r(46);e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var a=r.__data__;if(!o||a.length<199)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new i(a)}return r.set(e,t),this.size=r.size,this}},function(e,t,r){var n=r(35),o=r(88),i=r(14),a=r(90),c=/^\[object .+?Constructor\]$/,s=Function.prototype,u=Object.prototype,f=s.toString,l=u.hasOwnProperty,d=RegExp("^"+f.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||o(e))&&(n(e)?d:c).test(a(e))}},function(e,t,r){var n=r(27),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,c=n?n.toStringTag:void 0;e.exports=function(e){var t=i.call(e,c),r=e[c];try{e[c]=void 0;var n=!0}catch(e){}var o=a.call(e);return n&&(t?e[c]=r:delete e[c]),o}},function(e,t){var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},function(e,t,r){var n,o=r(89),i=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!i&&i in e}},function(e,t,r){var n=r(19)["__core-js_shared__"];e.exports=n},function(e,t){var r=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,r){var n=r(93),o=r(24),i=r(43);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(i||o),string:new n}}},function(e,t,r){var n=r(94),o=r(95),i=r(96),a=r(97),c=r(98);function s(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s.prototype.clear=n,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=c,e.exports=s},function(e,t,r){var n=r(28);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,r){var n=r(28),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return o.call(t,e)?t[e]:void 0}},function(e,t,r){var n=r(28),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:o.call(t,e)}},function(e,t,r){var n=r(28);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t,r){var n=r(29);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,r){var n=r(29);e.exports=function(e){return n(this,e).get(e)}},function(e,t,r){var n=r(29);e.exports=function(e){return n(this,e).has(e)}},function(e,t,r){var n=r(29);e.exports=function(e,t){var r=n(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this}},function(e,t,r){var n=r(105)();e.exports=n},function(e,t){e.exports=function(e){return function(t,r,n){for(var o=-1,i=Object(t),a=n(t),c=a.length;c--;){var s=a[e?c:++o];if(!1===r(i[s],s,i))break}return t}}},function(e,t,r){var n=r(47),o=r(107),i=r(108),a=r(111),c=r(112),s=r(30),u=r(15),f=r(116),l=r(51),d=r(35),p=r(14),h=r(118),v=r(52),m=r(53),g=r(122);e.exports=function(e,t,r,y,_,b,x){var C=m(e,r),w=m(t,r),S=x.get(w);if(S)n(e,r,S);else{var R=b?b(C,w,r+"",e,t,x):void 0,T=void 0===R;if(T){var E=u(w),P=!E&&l(w),k=!E&&!P&&v(w);R=w,E||P||k?u(C)?R=C:f(C)?R=a(C):P?(T=!1,R=o(w,!0)):k?(T=!1,R=i(w,!0)):R=[]:h(w)||s(w)?(R=C,s(C)?R=g(C):p(C)&&!d(C)||(R=c(w))):T=!1}T&&(x.set(w,R),_(R,w,y,b,x),x.delete(w)),n(e,r,R)}}},function(e,t,r){(function(e){var n=r(19),o=t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o?n.Buffer:void 0,c=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=c?c(r):new e.constructor(r);return e.copy(n),n}}).call(this,r(37)(e))},function(e,t,r){var n=r(109);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}},function(e,t,r){var n=r(110);e.exports=function(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}},function(e,t,r){var n=r(19).Uint8Array;e.exports=n},function(e,t){e.exports=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}},function(e,t,r){var n=r(113),o=r(49),i=r(50);e.exports=function(e){return"function"!=typeof e.constructor||i(e)?{}:n(o(e))}},function(e,t,r){var n=r(14),o=Object.create,i=function(){function e(){}return function(t){if(!n(t))return{};if(o)return o(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();e.exports=i},function(e,t){e.exports=function(e,t){return function(r){return e(t(r))}}},function(e,t,r){var n=r(22),o=r(20);e.exports=function(e){return o(e)&&"[object Arguments]"==n(e)}},function(e,t,r){var n=r(38),o=r(20);e.exports=function(e){return o(e)&&n(e)}},function(e,t){e.exports=function(){return!1}},function(e,t,r){var n=r(22),o=r(49),i=r(20),a=Function.prototype,c=Object.prototype,s=a.toString,u=c.hasOwnProperty,f=s.call(Object);e.exports=function(e){if(!i(e)||"[object Object]"!=n(e))return!1;var t=o(e);if(null===t)return!0;var r=u.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&s.call(r)==f}},function(e,t,r){var n=r(22),o=r(39),i=r(20),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&o(e.length)&&!!a[n(e)]}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,r){(function(e){var n=r(44),o=t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o&&n.process,c=function(){try{return i&&i.require&&i.require("util").types||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=c}).call(this,r(37)(e))},function(e,t,r){var n=r(123),o=r(55);e.exports=function(e){return n(e,o(e))}},function(e,t,r){var n=r(54),o=r(36);e.exports=function(e,t,r,i){var a=!r;r||(r={});for(var c=-1,s=t.length;++c<s;){var u=t[c],f=i?i(r[u],e[u],u,r,e):void 0;void 0===f&&(f=e[u]),a?o(r,u,f):n(r,u,f)}return r}},function(e,t,r){var n=r(125),o=r(30),i=r(15),a=r(51),c=r(31),s=r(52),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=i(e),f=!r&&o(e),l=!r&&!f&&a(e),d=!r&&!f&&!l&&s(e),p=r||f||l||d,h=p?n(e.length,String):[],v=h.length;for(var m in e)!t&&!u.call(e,m)||p&&("length"==m||l&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||c(m,v))||h.push(m);return h}},function(e,t){e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},function(e,t,r){var n=r(14),o=r(50),i=r(127),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return i(e);var t=o(e),r=[];for(var c in e)("constructor"!=c||!t&&a.call(e,c))&&r.push(c);return r}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},function(e,t,r){var n=r(129),o=r(134);e.exports=function(e){return n((function(t,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,c=i>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,c&&o(r[0],r[1],c)&&(a=i<3?void 0:a,i=1),t=Object(t);++n<i;){var s=r[n];s&&e(t,s,n,a)}return t}))}},function(e,t,r){var n=r(56),o=r(57),i=r(58);e.exports=function(e,t){return i(o(e,t,n),e+"")}},function(e,t){e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},function(e,t,r){var n=r(132),o=r(48),i=r(56),a=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:i;e.exports=a},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t){var r=Date.now;e.exports=function(e){var t=0,n=0;return function(){var o=r(),i=16-(o-n);if(n=o,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,r){var n=r(26),o=r(38),i=r(31),a=r(14);e.exports=function(e,t,r){if(!a(r))return!1;var c=typeof t;return!!("number"==c?o(r)&&i(t,r.length):"string"==c&&t in r)&&n(r[t],e)}},function(e,t){"undefined"!=typeof window&&(window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)})),"function"!=typeof Math.imul&&(Math.imul=function(e,t){var r=65535&e,n=65535&t;return r*n+((e>>>16&65535)*n+r*(t>>>16&65535)<<16>>>0)|0}),"function"!=typeof Object.assign&&(Object.assign=function(e){"use strict";if(null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(null!==n)for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t})},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(17).default;function o(){"use strict";e.exports=o=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",f=c.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof v?t:v,i=Object.create(o.prototype),c=new P(n||[]);return a(i,"_invoke",{value:S(e,r,c)}),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function v(){}function m(){}function g(){}var y={};l(y,s,(function(){return this}));var _=Object.getPrototypeOf,b=_&&_(_(k([])));b&&b!==r&&i.call(b,s)&&(y=b);var x=g.prototype=v.prototype=Object.create(y);function C(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var r;a(this,"_invoke",{value:function(o,a){function c(){return new t((function(r,c){!function r(o,a,c,s){var u=p(e[o],e,a);if("throw"!==u.type){var f=u.arg,l=f.value;return l&&"object"==n(l)&&i.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(l).then((function(e){f.value=e,c(f)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}(o,a,r,c)}))}return r=r?r.then(c,c):c()}})}function S(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=R(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=p(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function R(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,R(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=p(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function k(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:O}}function O(){return{value:void 0,done:!0}}return m.prototype=g,a(x,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,f,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,f,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},C(w.prototype),l(w.prototype,u,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(d(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(x),l(x,f,"Generator"),l(x,s,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=k,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),s=i.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(2);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(60);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(145),o=r(155);e.exports=function(e,t){return n(e,t,(function(t,r){return o(e,r)}))}},function(e,t,r){var n=r(146),o=r(154),i=r(32);e.exports=function(e,t,r){for(var a=-1,c=t.length,s={};++a<c;){var u=t[a],f=n(e,u);r(f,u)&&o(s,i(u,e),f)}return s}},function(e,t,r){var n=r(32),o=r(42);e.exports=function(e,t){for(var r=0,i=(t=n(t,e)).length;null!=e&&r<i;)e=e[o(t[r++])];return r&&r==i?e:void 0}},function(e,t,r){var n=r(15),o=r(41),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!o(e))||a.test(e)||!i.test(e)||null!=t&&e in Object(t)}},function(e,t,r){var n=r(149),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,a=n((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,(function(e,r,n,o){t.push(n?o.replace(i,"$1"):r||e)})),t}));e.exports=a},function(e,t,r){var n=r(150);e.exports=function(e){var t=n(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}},function(e,t,r){var n=r(46);function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(o.Cache||n),r}o.Cache=n,e.exports=o},function(e,t,r){var n=r(152);e.exports=function(e){return null==e?"":n(e)}},function(e,t,r){var n=r(27),o=r(153),i=r(15),a=r(41),c=n?n.prototype:void 0,s=c?c.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return o(t,e)+"";if(a(t))return s?s.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}},function(e,t,r){var n=r(54),o=r(32),i=r(31),a=r(14),c=r(42);e.exports=function(e,t,r,s){if(!a(e))return e;for(var u=-1,f=(t=o(t,e)).length,l=f-1,d=e;null!=d&&++u<f;){var p=c(t[u]),h=r;if("__proto__"===p||"constructor"===p||"prototype"===p)return e;if(u!=l){var v=d[p];void 0===(h=s?s(v,p,d):void 0)&&(h=a(v)?v:i(t[u+1])?[]:{})}n(d,p,h),d=d[p]}return e}},function(e,t,r){var n=r(156),o=r(157);e.exports=function(e,t){return null!=e&&o(e,t,n)}},function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},function(e,t,r){var n=r(32),o=r(30),i=r(15),a=r(31),c=r(39),s=r(42);e.exports=function(e,t,r){for(var u=-1,f=(t=n(t,e)).length,l=!1;++u<f;){var d=s(t[u]);if(!(l=null!=e&&r(e,d)))break;e=e[d]}return l||++u!=f?l:!!(f=null==e?0:e.length)&&c(f)&&a(d,f)&&(i(e)||o(e))}},function(e,t,r){var n=r(159),o=r(57),i=r(58);e.exports=function(e){return i(o(e,void 0,n),e+"")}},function(e,t,r){var n=r(160);e.exports=function(e){return null!=e&&e.length?n(e,1):[]}},function(e,t,r){var n=r(161),o=r(162);e.exports=function e(t,r,i,a,c){var s=-1,u=t.length;for(i||(i=o),c||(c=[]);++s<u;){var f=t[s];r>0&&i(f)?r>1?e(f,r-1,i,a,c):n(c,f):a||(c[c.length]=f)}return c}},function(e,t){e.exports=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}},function(e,t,r){var n=r(27),o=r(30),i=r(15),a=n?n.isConcatSpreadable:void 0;e.exports=function(e){return i(e)||o(e)||!!(a&&e&&e[a])}},function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(40),o=r(165);function i(t,r,a){return o()?(e.exports=i=Reflect.construct.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=i=function(e,t,r){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return r&&n(i,r.prototype),i},e.exports.__esModule=!0,e.exports.default=e.exports),i.apply(null,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){"use strict";r.r(t),r.d(t,"BarcodeDecoder",(function(){return ze})),r.d(t,"Readers",(function(){return n})),r.d(t,"CameraAccess",(function(){return nt})),r.d(t,"ImageDebug",(function(){return h.a})),r.d(t,"ImageWrapper",(function(){return u.a})),r.d(t,"ResultCollector",(function(){return ot}));var n={};r.r(n),r.d(n,"BarcodeReader",(function(){return O})),r.d(n,"TwoOfFiveReader",(function(){return L})),r.d(n,"NewCodabarReader",(function(){return B})),r.d(n,"Code128Reader",(function(){return q})),r.d(n,"Code32Reader",(function(){return ee})),r.d(n,"Code39Reader",(function(){return Q})),r.d(n,"Code39VINReader",(function(){return oe})),r.d(n,"Code93Reader",(function(){return se})),r.d(n,"EAN2Reader",(function(){return _e})),r.d(n,"EAN5Reader",(function(){return Ce})),r.d(n,"EAN8Reader",(function(){return Se})),r.d(n,"EANReader",(function(){return ge})),r.d(n,"I2of5Reader",(function(){return Te})),r.d(n,"UPCEReader",(function(){return ke})),r.d(n,"UPCReader",(function(){return Me}));var o,i=r(17),a=r.n(i),c=r(18),s=r.n(c),u=(r(135),r(11)),f=r(12),l=r.n(f),d=r(8),p=r.n(d),h=r(16),v=r(3),m=r.n(v),g=r(4),y=r.n(g),_=r(1),b=r.n(_),x=r(7),C=r.n(x),w=r(6),S=r.n(w),R=r(2),T=r.n(R),E=r(0),P=r.n(E),k=r(9);!function(e){e[e.Forward=1]="Forward",e[e.Reverse=-1]="Reverse"}(o||(o={}));var O=function(){function e(t,r){m()(this,e),P()(this,"_row",[]),P()(this,"config",{}),P()(this,"supplements",[]),P()(this,"SINGLE_CODE_ERROR",0),P()(this,"FORMAT","unknown"),P()(this,"CONFIG_KEYS",{}),this._row=[],this.config=t||{},r&&(this.supplements=r)}return y()(e,[{key:"_nextUnset",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t<e.length;t++)if(!e[t])return t;return e.length}},{key:"_matchPattern",value:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.SINGLE_CODE_ERROR||1,n=0,o=0,i=0,a=0,c=0,s=0,u=0,f=0;f<e.length;f++)i+=e[f],a+=t[f];if(i<a)return Number.MAX_VALUE;r*=c=i/a;for(var l=0;l<e.length;l++){if(s=e[l],u=t[l]*c,(o=Math.abs(s-u)/u)>r)return Number.MAX_VALUE;n+=o}return n/a}},{key:"_nextSet",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t<e.length;t++)if(e[t])return t;return e.length}},{key:"_correctBars",value:function(e,t,r){for(var n=r.length,o=0;n--;)(o=e[r[n]]*(1-(1-t)/2))>1&&(e[r[n]]=o)}},{key:"decodePattern",value:function(e){this._row=e;var t=this.decode();return null===t?(this._row.reverse(),(t=this.decode())&&(t.direction=o.Reverse,t.start=this._row.length-t.start,t.end=this._row.length-t.end)):t.direction=o.Forward,t&&(t.format=this.FORMAT),t}},{key:"_matchRange",value:function(e,t,r){var n;for(n=e=e<0?0:e;n<t;n++)if(this._row[n]!==r)return!1;return!0}},{key:"_fillCounters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._nextUnset(this._row),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._row.length,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=[],o=0;n[o]=0;for(var i=e;i<t;i++)this._row[i]^(r?1:0)?n[o]++:(n[++o]=1,r=!r);return n}},{key:"_toCounters",value:function(e,t){var r=t.length,n=this._row.length,o=!this._row[e],i=0;k.a.init(t,0);for(var a=e;a<n;a++)if(this._row[a]^(o?1:0))t[i]++;else{if(++i===r)break;t[i]=1,o=!o}return t}},{key:"decodeImage",value:function(e){return null}}],[{key:"Exception",get:function(){return{StartNotFoundException:"Start-Info was not found!",CodeNotFoundException:"Code could not be found!",PatternNotFoundException:"Pattern could not be found!"}}}]),e}();function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T()(e);if(t){var o=T()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return S()(this,r)}}var D=[3,1,3,1,1,1],A=[3,1,1,1,3],j=[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]],I=D.reduce((function(e,t){return e+t}),0),L=function(e){C()(r,e);var t=M(r);function r(){var e;m()(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),P()(b()(e),"barSpaceRatio",[1,1]),P()(b()(e),"FORMAT","2of5"),P()(b()(e),"SINGLE_CODE_ERROR",.78),P()(b()(e),"AVG_CODE_ERROR",.3),e}return y()(r,[{key:"_findPattern",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=[],i=0,a={error:Number.MAX_VALUE,code:-1,start:0,end:0},c=0,s=0,u=this.AVG_CODE_ERROR;t||(t=this._nextSet(this._row));for(var f=0;f<e.length;f++)o[f]=0;for(var l=t;l<this._row.length;l++)if(this._row[l]^(r?1:0))o[i]++;else{if(i===o.length-1){c=0;for(var d=0;d<o.length;d++)c+=o[d];if((s=this._matchPattern(o,e))<u)return a.error=s,a.start=l-c,a.end=l,a;if(!n)return null;for(var p=0;p<o.length-2;p++)o[p]=o[p+2];o[o.length-2]=0,o[o.length-1]=0,i--}else i++;o[i]=1,r=!r}return null}},{key:"_findStart",value:function(){for(var e=null,t=this._nextSet(this._row),r=1,n=0;!e;){if(!(e=this._findPattern(D,t,!1,!0)))return null;if(r=Math.floor((e.end-e.start)/I),(n=e.start-5*r)>=0&&this._matchRange(n,e.start,0))return e;t=e.end,e=null}return e}},{key:"_verifyTrailingWhitespace",value:function(e){var t=e.end+(e.end-e.start)/2;return t<this._row.length&&this._matchRange(e.end,t,0)?e:null}},{key:"_findEnd",value:function(){this._row.reverse();var e=this._nextSet(this._row),t=this._findPattern(A,e,!1,!0);if(this._row.reverse(),null===t)return null;var r=t.start;return t.start=this._row.length-t.end,t.end=this._row.length-r,null!==t?this._verifyTrailingWhitespace(t):null}},{key:"_verifyCounterLength",value:function(e){return e.length%10==0}},{key:"_decodeCode",value:function(e){for(var t=this.AVG_CODE_ERROR,r={error:Number.MAX_VALUE,code:-1,start:0,end:0},n=0;n<j.length;n++){var o=this._matchPattern(e,j[n]);o<r.error&&(r.code=n,r.error=o)}return r.error<t?r:null}},{key:"_decodePayload",value:function(e,t,r){for(var n=0,o=e.length,i=[0,0,0,0,0],a=null;n<o;){for(var c=0;c<5;c++)i[c]=e[n]*this.barSpaceRatio[0],n+=2;if(!(a=this._decodeCode(i)))return null;t.push("".concat(a.code)),r.push(a)}return a}},{key:"decode",value:function(e,t){var r=this._findStart();if(!r)return null;var n=this._findEnd();if(!n)return null;var o=this._fillCounters(r.end,n.start,!1);if(!this._verifyCounterLength(o))return null;var i=[];i.push(r);var a=[];return this._decodePayload(o,a,i)?a.length<5?null:(i.push(n),{code:a.join(""),start:r.start,end:n.end,startInfo:r,decodedCodes:i,format:this.FORMAT}):null}}]),r}(O);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T()(e);if(t){var o=T()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return S()(this,r)}}var z=[48,49,50,51,52,53,54,55,56,57,45,36,58,47,46,43,65,66,67,68],F=[3,6,9,96,18,66,33,36,48,72,12,24,69,81,84,21,26,41,11,14],U=[26,41,11,14],B=function(e){C()(r,e);var t=N(r);function r(){var e;m()(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),P()(b()(e),"_counters",[]),P()(b()(e),"FORMAT","codabar"),e}return y()(r,[{key:"_computeAlternatingThreshold",value:function(e,t){for(var r=Number.MAX_VALUE,n=0,o=0,i=e;i<t;i+=2)(o=this._counters[i])>n&&(n=o),o<r&&(r=o);return(r+n)/2|0}},{key:"_toPattern",value:function(e){var t=e+7;if(t>this._counters.length)return-1;for(var r=this._computeAlternatingThreshold(e,t),n=this._computeAlternatingThreshold(e+1,t),o=64,i=0,a=0,c=0;c<7;c++)i=0==(1&c)?r:n,this._counters[e+c]>i&&(a|=o),o>>=1;return a}},{key:"_isStartEnd",value:function(e){for(var t=0;t<U.length;t++)if(U[t]===e)return!0;return!1}},{key:"_sumCounters",value:function(e,t){for(var r=0,n=e;n<t;n++)r+=this._counters[n];return r}},{key:"_findStart",value:function(){for(var e=this._nextUnset(this._row),t=1;t<this._counters.length;t++){var r=this._toPattern(t);if(-1!==r&&this._isStartEnd(r))return{start:e+=this._sumCounters(0,t),end:e+this._sumCounters(t,t+8),startCounter:t,endCounter:t+8}}return null}},{key:"_patternToChar",value:function(e){for(var t=0;t<F.length;t++)if(F[t]===e)return String.fromCharCode(z[t]);return null}},{key:"_calculatePatternLength",value:function(e){for(var t=0,r=e;r<e+7;r++)t+=this._counters[r];return t}},{key:"_verifyWhitespace",value:function(e,t){return(e-1<=0||this._counters[e-1]>=this._calculatePatternLength(e)/2)&&(t+8>=this._counters.length||this._counters[t+7]>=this._calculatePatternLength(t)/2)}},{key:"_charToPattern",value:function(e){for(var t=e.charCodeAt(0),r=0;r<z.length;r++)if(z[r]===t)return F[r];return 0}},{key:"_thresholdResultPattern",value:function(e,t){for(var r,n={space:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}},bar:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}}},o=t,i=0;i<e.length;i++){r=this._charToPattern(e[i]);for(var a=6;a>=0;a--){var c=2==(1&a)?n.bar:n.space,s=1==(1&r)?c.wide:c.narrow;s.size+=this._counters[o+a],s.counts++,r>>=1}o+=8}return["space","bar"].forEach((function(e){var t=n[e];t.wide.min=Math.floor((t.narrow.size/t.narrow.counts+t.wide.size/t.wide.counts)/2),t.narrow.max=Math.ceil(t.wide.min),t.wide.max=Math.ceil((2*t.wide.size+1.5)/t.wide.counts)})),n}},{key:"_validateResult",value:function(e,t){for(var r,n=this._thresholdResultPattern(e,t),o=t,i=0;i<e.length;i++){r=this._charToPattern(e[i]);for(var a=6;a>=0;a--){var c=0==(1&a)?n.bar:n.space,s=1==(1&r)?c.wide:c.narrow,u=this._counters[o+a];if(u<s.min||u>s.max)return!1;r>>=1}o+=8}return!0}},{key:"decode",value:function(e,t){if(this._counters=this._fillCounters(),!(t=this._findStart()))return null;var r,n=t.startCounter,o=[];do{if((r=this._toPattern(n))<0)return null;var i=this._patternToChar(r);if(null===i)return null;if(o.push(i),n+=8,o.length>1&&this._isStartEnd(r))break}while(n<this._counters.length);if(o.length-2<4||!this._isStartEnd(r))return null;if(!this._verifyWhitespace(t.startCounter,n-8))return null;if(!this._validateResult(o,t.startCounter))return null;n=n>this._counters.length?this._counters.length:n;var a=t.start+this._sumCounters(t.startCounter,n-8);return{code:o.join(""),start:t.start,end:a,startInfo:t,decodedCodes:o,format:this.FORMAT}}}]),r}(O);function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T()(e);if(t){var o=T()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return S()(this,r)}}var q=function(e){C()(r,e);var t=G(r);function r(){var e;m()(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),P()(b()(e),"CODE_SHIFT",98),P()(b()(e),"CODE_C",99),P()(b()(e),"CODE_B",100),P()(b()(e),"CODE_A",101),P()(b()(e),"START_CODE_A",103),P()(b()(e),"START_CODE_B",104),P()(b()(e),"START_CODE_C",105),P()(b()(e),"STOP_CODE",106),P()(b()(e),"CODE_PATTERN",[[2,1,2,2,2,2],[2,2,2,1,2,2],[2,2,2,2,2,1],[1,2,1,2,2,3],[1,2,1,3,2,2],[1,3,1,2,2,2],[1,2,2,2,1,3],[1,2,2,3,1,2],[1,3,2,2,1,2],[2,2,1,2,1,3],[2,2,1,3,1,2],[2,3,1,2,1,2],[1,1,2,2,3,2],[1,2,2,1,3,2],[1,2,2,2,3,1],[1,1,3,2,2,2],[1,2,3,1,2,2],[1,2,3,2,2,1],[2,2,3,2,1,1],[2,2,1,1,3,2],[2,2,1,2,3,1],[2,1,3,2,1,2],[2,2,3,1,1,2],[3,1,2,1,3,1],[3,1,1,2,2,2],[3,2,1,1,2,2],[3,2,1,2,2,1],[3,1,2,2,1,2],[3,2,2,1,1,2],[3,2,2,2,1,1],[2,1,2,1,2,3],[2,1,2,3,2,1],[2,3,2,1,2,1],[1,1,1,3,2,3],[1,3,1,1,2,3],[1,3,1,3,2,1],[1,1,2,3,1,3],[1,3,2,1,1,3],[1,3,2,3,1,1],[2,1,1,3,1,3],[2,3,1,1,1,3],[2,3,1,3,1,1],[1,1,2,1,3,3],[1,1,2,3,3,1],[1,3,2,1,3,1],[1,1,3,1,2,3],[1,1,3,3,2,1],[1,3,3,1,2,1],[3,1,3,1,2,1],[2,1,1,3,3,1],[2,3,1,1,3,1],[2,1,3,1,1,3],[2,1,3,3,1,1],[2,1,3,1,3,1],[3,1,1,1,2,3],[3,1,1,3,2,1],[3,3,1,1,2,1],[3,1,2,1,1,3],[3,1,2,3,1,1],[3,3,2,1,1,1],[3,1,4,1,1,1],[2,2,1,4,1,1],[4,3,1,1,1,1],[1,1,1,2,2,4],[1,1,1,4,2,2],[1,2,1,1,2,4],[1,2,1,4,2,1],[1,4,1,1,2,2],[1,4,1,2,2,1],[1,1,2,2,1,4],[1,1,2,4,1,2],[1,2,2,1,1,4],[1,2,2,4,1,1],[1,4,2,1,1,2],[1,4,2,2,1,1],[2,4,1,2,1,1],[2,2,1,1,1,4],[4,1,3,1,1,1],[2,4,1,1,1,2],[1,3,4,1,1,1],[1,1,1,2,4,2],[1,2,1,1,4,2],[1,2,1,2,4,1],[1,1,4,2,1,2],[1,2,4,1,1,2],[1,2,4,2,1,1],[4,1,1,2,1,2],[4,2,1,1,1,2],[4,2,1,2,1,1],[2,1,2,1,4,1],[2,1,4,1,2,1],[4,1,2,1,2,1],[1,1,1,1,4,3],[1,1,1,3,4,1],[1,3,1,1,4,1],[1,1,4,1,1,3],[1,1,4,3,1,1],[4,1,1,1,1,3],[4,1,1,3,1,1],[1,1,3,1,4,1],[1,1,4,1,3,1],[3,1,1,1,4,1],[4,1,1,1,3,1],[2,1,1,4,1,2],[2,1,1,2,1,4],[2,1,1,2,3,2],[2,3,3,1,1,1,2]]),P()(b()(e),"SINGLE_CODE_ERROR",.64),P()(b()(e),"AVG_CODE_ERROR",.3),P()(b()(e),"FORMAT","code_128"),P()(b()(e),"MODULE_INDICES",{bar:[0,2,4],space:[1,3,5]}),e}return y()(r,[{key:"_decodeCode",value:function(e,t){for(var r={error:Number.MAX_VALUE,code:-1,start:e,end:e,correction:{bar:1,space:1}},n=[0,0,0,0,0,0],o=e,i=!this._row[o],a=0,c=o;c<this._row.length;c++)if(this._row[c]^(i?1:0))n[a]++;else{if(a===n.length-1){t&&this._correct(n,t);for(var s=0;s<this.CODE_PATTERN.length;s++){var u=this._matchPattern(n,this.CODE_PATTERN[s]);u<r.error&&(r.code=s,r.error=u)}return r.end=c,-1===r.code||r.error>this.AVG_CODE_ERROR?null:(this.CODE_PATTERN[r.code]&&(r.correction.bar=this.calculateCorrection(this.CODE_PATTERN[r.code],n,this.MODULE_INDICES.bar),r.correction.space=this.calculateCorrection(this.CODE_PATTERN[r.code],n,this.MODULE_INDICES.space)),r)}n[++a]=1,i=!i}return null}},{key:"_correct",value:function(e,t){this._correctBars(e,t.bar,this.MODULE_INDICES.bar),this._correctBars(e,t.space,this.MODULE_INDICES.space)}},{key:"_findStart",value:function(){for(var e=[0,0,0,0,0,0],t=this._nextSet(this._row),r={error:Number.MAX_VALUE,code:-1,start:0,end:0,correction:{bar:1,space:1}},n=!1,o=0,i=t;i<this._row.length;i++)if(this._row[i]^(n?1:0))e[o]++;else{if(o===e.length-1){for(var a=e.reduce((function(e,t){return e+t}),0),c=this.START_CODE_A;c<=this.START_CODE_C;c++){var s=this._matchPattern(e,this.CODE_PATTERN[c]);s<r.error&&(r.code=c,r.error=s)}if(r.error<this.AVG_CODE_ERROR)return r.start=i-a,r.end=i,r.correction.bar=this.calculateCorrection(this.CODE_PATTERN[r.code],e,this.MODULE_INDICES.bar),r.correction.space=this.calculateCorrection(this.CODE_PATTERN[r.code],e,this.MODULE_INDICES.space),r;for(var u=0;u<4;u++)e[u]=e[u+2];e[4]=0,e[5]=0,o--}else o++;e[o]=1,n=!n}return null}},{key:"decode",value:function(e,t){var r=this,n=this._findStart();if(null===n)return null;var o={code:n.code,start:n.start,end:n.end,correction:{bar:n.correction.bar,space:n.correction.space}},i=[];i.push(o);for(var a=o.code,c=function(e){switch(e){case r.START_CODE_A:return r.CODE_A;case r.START_CODE_B:return r.CODE_B;case r.START_CODE_C:return r.CODE_C;default:return null}}(o.code),s=!1,u=!1,f=u,l=!0,d=0,p=[],h=[];!s;){if(f=u,u=!1,null!==(o=this._decodeCode(o.end,o.correction)))switch(o.code!==this.STOP_CODE&&(l=!0),o.code!==this.STOP_CODE&&(p.push(o.code),a+=++d*o.code),i.push(o),c){case this.CODE_A:if(o.code<64)h.push(String.fromCharCode(32+o.code));else if(o.code<96)h.push(String.fromCharCode(o.code-64));else switch(o.code!==this.STOP_CODE&&(l=!1),o.code){case this.CODE_SHIFT:u=!0,c=this.CODE_B;break;case this.CODE_B:c=this.CODE_B;break;case this.CODE_C:c=this.CODE_C;break;case this.STOP_CODE:s=!0}break;case this.CODE_B:if(o.code<96)h.push(String.fromCharCode(32+o.code));else switch(o.code!==this.STOP_CODE&&(l=!1),o.code){case this.CODE_SHIFT:u=!0,c=this.CODE_A;break;case this.CODE_A:c=this.CODE_A;break;case this.CODE_C:c=this.CODE_C;break;case this.STOP_CODE:s=!0}break;case this.CODE_C:if(o.code<100)h.push(o.code<10?"0"+o.code:o.code);else switch(o.code!==this.STOP_CODE&&(l=!1),o.code){case this.CODE_A:c=this.CODE_A;break;case this.CODE_B:c=this.CODE_B;break;case this.STOP_CODE:s=!0}}else s=!0;f&&(c=c===this.CODE_A?this.CODE_B:this.CODE_A)}return null===o?null:(o.end=this._nextUnset(this._row,o.end),this._verifyTrailingWhitespace(o)?(a-=d*p[p.length-1])%103!==p[p.length-1]?null:h.length?(l&&h.splice(h.length-1,1),{code:h.join(""),start:n.start,end:o.end,codeset:c,startInfo:n,decodedCodes:i,endInfo:o,format:this.FORMAT}):null:null)}},{key:"_verifyTrailingWhitespace",value:function(e){var t;return(t=e.end+(e.end-e.start)/2)<this._row.length&&this._matchRange(e.end,t,0)?e:null}},{key:"calculateCorrection",value:function(e,t,r){for(var n=r.length,o=0,i=0;n--;)i+=e[r[n]],o+=t[r[n]];return i/o}}]),r}(O),W=r(13),V=r.n(W),J=r(33),H=r.n(J);function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T()(e);if(t){var o=T()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return S()(this,r)}}var $=new Uint16Array(H()("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. *$/+%").map((function(e){return e.charCodeAt(0)}))),Y=new Uint16Array([52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,148,168,162,138,42]),Q=function(e){C()(r,e);var t=X(r);function r(){var e;m()(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),P()(b()(e),"FORMAT","code_39"),e}return y()(r,[{key:"_findStart",value:function(){for(var e=this._nextSet(this._row),t=e,r=new Uint16Array([0,0,0,0,0,0,0,0,0]),n=0,o=!1,i=e;i<this._row.length;i++)if(this._row[i]^(o?1:0))r[n]++;else{if(n===r.length-1){if(148===this._toPattern(r)){var a=Math.floor(Math.max(0,t-(i-t)/4));if(this._matchRange(a,t,0))return{start:t,end:i}}t+=r[0]+r[1];for(var c=0;c<7;c++)r[c]=r[c+2];r[7]=0,r[8]=0,n--}else n++;r[n]=1,o=!o}return null}},{key:"_toPattern",value:function(e){for(var t=e.length,r=0,n=t,o=0;n>3;){r=this._findNextWidth(e,r),n=0;for(var i=0,a=0;a<t;a++)e[a]>r&&(i|=1<<t-1-a,n++,o+=e[a]);if(3===n){for(var c=0;c<t&&n>0;c++)if(e[c]>r&&(n--,2*e[c]>=o))return-1;return i}}return-1}},{key:"_findNextWidth",value:function(e,t){for(var r=Number.MAX_VALUE,n=0;n<e.length;n++)e[n]<r&&e[n]>t&&(r=e[n]);return r}},{key:"_patternToChar",value:function(e){for(var t=0;t<Y.length;t++)if(Y[t]===e)return String.fromCharCode($[t]);return null}},{key:"_verifyTrailingWhitespace",value:function(e,t,r){var n=k.a.sum(r);return 3*(t-e-n)>=n}},{key:"decode",value:function(){var e=new Uint16Array([0,0,0,0,0,0,0,0,0]),t=[],r=this._findStart();if(!r)return null;var n,o,i=this._nextSet(this._row,r.end);do{e=this._toCounters(i,e);var a=this._toPattern(e);if(a<0)return null;if(null===(n=this._patternToChar(a)))return null;t.push(n),o=i,i+=k.a.sum(e),i=this._nextSet(this._row,i)}while("*"!==n);return t.pop(),t.length&&this._verifyTrailingWhitespace(o,i,e)?{code:t.join(""),start:r.start,end:i,startInfo:r,decodedCodes:t,format:this.FORMAT}:null}}]),r}(O);function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T()(e);if(t){var o=T()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return S()(this,r)}}var Z=/[AEIO]/g,ee=function(e){C()(r,e);var t=K(r);function r(){var e;m()(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),P()(b()(e),"FORMAT","code_32_reader"),e}return y()(r,[{key:"_decodeCode32",value:function(e){if(/[^0-9BCDFGHJKLMNPQRSTUVWXYZ]/.test(e))return null;for(var t=0,r=0;r<e.length;r++)t=32*t+"0123456789BCDFGHJKLMNPQRSTUVWXYZ".indexOf(e[r]);var n="".concat(t);return n.length<9&&(n=("000000000"+n).slice(-9)),"A"+n}},{key:"_checkChecksum",value:function(e){return!!e}},{key:"decode",value:function(){var e=V()(T()(r.prototype),"decode",this).call(this);if(!e)return null;var t=e.code;if(!t)return null;if(t=t.replace(Z,""),!this._checkChecksum(t))return null;var n=this._decodeCode32(t);return n?(e.code=n,e):null}}]),r}(Q);function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T()(e);if(t){var o=T()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return S()(this,r)}}var re=/[IOQ]/g,ne=/[A-Z0-9]{17}/,oe=function(e){C()(r,e);var t=te(r);function r(){var e;m()(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),P()(b()(e),"FORMAT","code_39_vin"),e}return y()(r,[{key:"_checkChecksum",value:function(e){return!!e}},{key:"decode",value:function(){var e=V()(T()(r.prototype),"decode",this).call(this);if(!e)return null;var t=e.code;return t&&(t=t.replace(re,"")).match(ne)&&this._checkChecksum(t)?(e.code=t,e):null}}]),r}(Q);function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T()(e);if(t){var o=T()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return S()(this,r)}}var ae=new Uint16Array(H()("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*").map((function(e){return e.charCodeAt(0)}))),ce=new Uint16Array([276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350]),se=function(e){C()(r,e);var t=ie(r);function r(){var e;m()(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),P()(b()(e),"FORMAT","code_93"),e}return y()(r,[{key:"_patternToChar",value:function(e){for(var t=0;t<ce.length;t++)if(ce[t]===e)return String.fromCharCode(ae[t]);return null}},{key:"_toPattern",value:function(e){for(var t=e.length,r=e.reduce((function(e,t){return e+t}),0),n=0,o=0;o<t;o++){var i=Math.round(9*e[o]/r);if(i<1||i>4)return-1;if(0==(1&o))for(var a=0;a<i;a++)n=n<<1|1;else n<<=i}return n}},{key:"_findStart",value:function(){for(var e=this._nextSet(this._row),t=e,r=new Uint16Array([0,0,0,0,0,0]),n=0,o=!1,i=e;i<this._row.length;i++)if(this._row[i]^(o?1:0))r[n]++;else{if(n===r.length-1){if(350===this._toPattern(r)){var a=Math.floor(Math.max(0,t-(i-t)/4));if(this._matchRange(a,t,0))return{start:t,end:i}}t+=r[0]+r[1];for(var c=0;c<4;c++)r[c]=r[c+2];r[4]=0,r[5]=0,n--}else n++;r[n]=1,o=!o}return null}},{key:"_verifyEnd",value:function(e,t){return!(e===t||!this._row[t])}},{key:"_decodeExtended",value:function(e){for(var t=e.length,r=[],n=0;n<t;n++){var o=e[n];if(o>="a"&&o<="d"){if(n>t-2)return null;var i=e[++n],a=i.charCodeAt(0),c=void 0;switch(o){case"a":if(!(i>="A"&&i<="Z"))return null;c=String.fromCharCode(a-64);break;case"b":if(i>="A"&&i<="E")c=String.fromCharCode(a-38);else if(i>="F"&&i<="J")c=String.fromCharCode(a-11);else if(i>="K"&&i<="O")c=String.fromCharCode(a+16);else if(i>="P"&&i<="S")c=String.fromCharCode(a+43);else{if(!(i>="T"&&i<="Z"))return null;c=String.fromCharCode(127)}break;case"c":if(i>="A"&&i<="O")c=String.fromCharCode(a-32);else{if("Z"!==i)return null;c=":"}break;case"d":if(!(i>="A"&&i<="Z"))return null;c=String.fromCharCode(a+32);break;default:return console.warn("* code_93_reader _decodeExtended hit default case, this may be an error",c),null}r.push(c)}else r.push(o)}return r}},{key:"_matchCheckChar",value:function(e,t,r){var n=e.slice(0,t),o=n.length,i=n.reduce((function(e,t,n){return e+((-1*n+(o-1))%r+1)*ae.indexOf(t.charCodeAt(0))}),0);return ae[i%47]===e[t].charCodeAt(0)}},{key:"_verifyChecksums",value:function(e){return this._matchCheckChar(e,e.length-2,20)&&this._matchCheckChar(e,e.length-1,15)}},{key:"decode",value:function(e,t){if(!(t=this._findStart()))return null;var r,n,o=new Uint16Array([0,0,0,0,0,0]),i=[],a=this._nextSet(this._row,t.end);do{o=this._toCounters(a,o);var c=this._toPattern(o);if(c<0)return null;if(null===(n=this._patternToChar(c)))return null;i.push(n),r=a,a+=k.a.sum(o),a=this._nextSet(this._row,a)}while("*"!==n);return i.pop(),i.length&&this._verifyEnd(r,a)&&this._verifyChecksums(i)?(i=i.slice(0,i.length-2),null===(i=this._decodeExtended(i))?null:{code:i.join(""),start:t.start,end:a,startInfo:t,decodedCodes:i,format:this.FORMAT}):null}}]),r}(O);function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach((function(t){P()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T()(e);if(t){var o=T()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return S()(this,r)}}var de=[1,1,1],pe=[1,1,1,1,1],he=[1,1,2],ve=[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2],[1,1,2,3],[1,2,2,2],[2,2,1,2],[1,1,4,1],[2,3,1,1],[1,3,2,1],[4,1,1,1],[2,1,3,1],[3,1,2,1],[2,1,1,3]],me=[0,11,13,14,19,25,28,21,22,26],ge=function(e){C()(r,e);var t=le(r);function r(e,n){var o;return m()(this,r),o=t.call(this,s()({supplements:[]},e),n),P()(b()(o),"FORMAT","ean_13"),P()(b()(o),"SINGLE_CODE_ERROR",.7),P()(b()(o),"STOP_PATTERN",[1,1,1]),o}return y()(r,[{key:"_findPattern",value:function(e,t,r,n){var o=new Array(e.length).fill(0),i={error:Number.MAX_VALUE,start:0,end:0},a=0;t||(t=this._nextSet(this._row));for(var c=!1,s=t;s<this._row.length;s++)if(this._row[s]^(r?1:0))o[a]+=1;else{if(a===o.length-1){var u=this._matchPattern(o,e);if(u<.48&&i.error&&u<i.error)return c=!0,i.error=u,i.start=s-o.reduce((function(e,t){return e+t}),0),i.end=s,i;if(n){for(var f=0;f<o.length-2;f++)o[f]=o[f+2];o[o.length-2]=0,o[o.length-1]=0,a--}}else a++;o[a]=1,r=!r}return c?i:null}},{key:"_decodeCode",value:function(e,t){var r=[0,0,0,0],n=e,o={error:Number.MAX_VALUE,code:-1,start:e,end:e},i=!this._row[n],a=0;t||(t=ve.length);for(var c=n;c<this._row.length;c++)if(this._row[c]^(i?1:0))r[a]++;else{if(a===r.length-1){for(var s=0;s<t;s++){var u=this._matchPattern(r,ve[s]);o.end=c,u<o.error&&(o.code=s,o.error=u)}return o.error>.48?null:o}r[++a]=1,i=!i}return null}},{key:"_findStart",value:function(){for(var e=this._nextSet(this._row),t=null;!t;){if(!(t=this._findPattern(de,e,!1,!0)))return null;var r=t.start-(t.end-t.start);if(r>=0&&this._matchRange(r,t.start,0))return t;e=t.end,t=null}return null}},{key:"_calculateFirstDigit",value:function(e){for(var t=0;t<me.length;t++)if(e===me[t])return t;return null}},{key:"_decodePayload",value:function(e,t,r){for(var n=fe({},e),o=0,i=0;i<6;i++){if(!(n=this._decodeCode(n.end)))return null;n.code>=10?(n.code-=10,o|=1<<5-i):o|=0<<5-i,t.push(n.code),r.push(n)}var a=this._calculateFirstDigit(o);if(null===a)return null;t.unshift(a);var c=this._findPattern(pe,n.end,!0,!1);if(null===c||!c.end)return null;r.push(c);for(var s=0;s<6;s++){if(!(c=this._decodeCode(c.end,10)))return null;r.push(c),t.push(c.code)}return c}},{key:"_verifyTrailingWhitespace",value:function(e){var t=e.end+(e.end-e.start);return t<this._row.length&&this._matchRange(e.end,t,0)?e:null}},{key:"_findEnd",value:function(e,t){var r=this._findPattern(this.STOP_PATTERN,e,t,!1);return null!==r?this._verifyTrailingWhitespace(r):null}},{key:"_checksum",value:function(e){for(var t=0,r=e.length-2;r>=0;r-=2)t+=e[r];t*=3;for(var n=e.length-1;n>=0;n-=2)t+=e[n];return t%10==0}},{key:"_decodeExtensions",value:function(e){var t=this._nextSet(this._row,e),r=this._findPattern(he,t,!1,!1);if(null===r)return null;for(var n=0;n<this.supplements.length;n++)try{var o=this.supplements[n].decode(this._row,r.end);if(null!==o)return{code:o.code,start:t,startInfo:r,end:o.end,decodedCodes:o.decodedCodes,format:this.supplements[n].FORMAT}}catch(e){console.error("* decodeExtensions error in ",this.supplements[n],": ",e)}return null}},{key:"decode",value:function(e,t){var r=new Array,n=new Array,o={},i=this._findStart();if(!i)return null;var a={start:i.start,end:i.end};if(n.push(a),!(a=this._decodePayload(a,r,n)))return null;if(!(a=this._findEnd(a.end,!1)))return null;if(n.push(a),!this._checksum(r))return null;if(this.supplements.length>0){var c=this._decodeExtensions(a.end);if(!c)return null;if(!c.decodedCodes)return null;var s=c.decodedCodes[c.decodedCodes.length-1],u={start:s.start+((s.end-s.start)/2|0),end:s.end};if(!this._verifyTrailingWhitespace(u))return null;o={supplement:c,code:r.join("")+c.code}}return fe(fe({code:r.join(""),start:i.start,end:a.end,startInfo:i,decodedCodes:n},o),{},{format:this.FORMAT})}}]),r}(O);function ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T()(e);if(t){var o=T()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return S()(this,r)}}var _e=function(e){C()(r,e);var t=ye(r);function r(){var e;m()(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),P()(b()(e),"FORMAT","ean_2"),e}return y()(r,[{key:"decode",value:function(e,t){e&&(this._row=e);var r=0,n=t,o=this._row.length,i=[],a=[],c=null;if(void 0===n)return null;for(var s=0;s<2&&n<o;s++){if(!(c=this._decodeCode(n)))return null;a.push(c),i.push(c.code%10),c.code>=10&&(r|=1<<1-s),1!==s&&(n=this._nextSet(this._row,c.end),n=this._nextUnset(this._row,n))}if(2!==i.length||parseInt(i.join(""))%4!==r)return null;var u=this._findStart();return{code:i.join(""),decodedCodes:a,end:c.end,format:this.FORMAT,startInfo:u,start:u.start}}}]),r}(ge);function be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T()(e);if(t){var o=T()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return S()(this,r)}}var xe=[24,20,18,17,12,6,3,10,9,5],Ce=function(e){C()(r,e);var t=be(r);function r(){var e;m()(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),P()(b()(e),"FORMAT","ean_5"),e}return y()(r,[{key:"decode",value:function(e,t){if(void 0===t)return null;e&&(this._row=e);for(var r=0,n=t,o=this._row.length,i=null,a=[],c=[],s=0;s<5&&n<o;s++){if(!(i=this._decodeCode(n)))return null;c.push(i),a.push(i.code%10),i.code>=10&&(r|=1<<4-s),4!==s&&(n=this._nextSet(this._row,i.end),n=this._nextUnset(this._row,n))}if(5!==a.length)return null;if(function(e){for(var t=e.length,r=0,n=t-2;n>=0;n-=2)r+=e[n];r*=3;for(var o=t-1;o>=0;o-=2)r+=e[o];return(r*=3)%10}(a)!==function(e){for(var t=0;t<10;t++)if(e===xe[t])return t;return null}(r))return null;var u=this._findStart();return{code:a.join(""),decodedCodes:c,end:i.end,format:this.FORMAT,startInfo:u,start:u.start}}}]),r}(ge);function we(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T()(e);if(t){var o=T()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return S()(this,r)}}var Se=function(e){C()(r,e);var t=we(r);function r(){var e;m()(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),P()(b()(e),"FORMAT","ean_8"),e}return y()(r,[{key:"_decodePayload",value:function(e,t,r){for(var n=e,o=0;o<4;o++){if(!(n=this._decodeCode(n.end,10)))return null;t.push(n.code),r.push(n)}if(null===(n=this._findPattern(pe,n.end,!0,!1)))return null;r.push(n);for(var i=0;i<4;i++){if(!(n=this._decodeCode(n.end,10)))return null;r.push(n),t.push(n.code)}return n}}]),r}(ge);function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T()(e);if(t){var o=T()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return S()(this,r)}}var Te=function(e){C()(r,e);var t=Re(r);function r(e){var n;return m()(this,r),n=t.call(this,s()({normalizeBarSpaceWidth:!1},e)),P()(b()(n),"barSpaceRatio",[1,1]),P()(b()(n),"SINGLE_CODE_ERROR",.78),P()(b()(n),"AVG_CODE_ERROR",.38),P()(b()(n),"START_PATTERN",[1,1,1,1]),P()(b()(n),"STOP_PATTERN",[1,1,3]),P()(b()(n),"CODE_PATTERN",[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]]),P()(b()(n),"MAX_CORRECTION_FACTOR",5),P()(b()(n),"FORMAT","i2of5"),e.normalizeBarSpaceWidth&&(n.SINGLE_CODE_ERROR=.38,n.AVG_CODE_ERROR=.09),n.config=e,S()(n,b()(n))}return y()(r,[{key:"_matchPattern",value:function(e,t){if(this.config.normalizeBarSpaceWidth){for(var n=[0,0],o=[0,0],i=[0,0],a=this.MAX_CORRECTION_FACTOR,c=1/a,s=0;s<e.length;s++)n[s%2]+=e[s],o[s%2]+=t[s];i[0]=o[0]/n[0],i[1]=o[1]/n[1],i[0]=Math.max(Math.min(i[0],a),c),i[1]=Math.max(Math.min(i[1],a),c),this.barSpaceRatio=i;for(var u=0;u<e.length;u++)e[u]*=this.barSpaceRatio[u%2]}return V()(T()(r.prototype),"_matchPattern",this).call(this,e,t)}},{key:"_findPattern",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=new Array(e.length).fill(0),i=0,a={error:Number.MAX_VALUE,start:0,end:0},c=this.AVG_CODE_ERROR;r=r||!1,n=n||!1,t||(t=this._nextSet(this._row));for(var s=t;s<this._row.length;s++)if(this._row[s]^(r?1:0))o[i]++;else{if(i===o.length-1){var u=o.reduce((function(e,t){return e+t}),0),f=this._matchPattern(o,e);if(f<c)return a.error=f,a.start=s-u,a.end=s,a;if(!n)return null;for(var l=0;l<o.length-2;l++)o[l]=o[l+2];o[o.length-2]=0,o[o.length-1]=0,i--}else i++;o[i]=1,r=!r}return null}},{key:"_findStart",value:function(){for(var e=0,t=this._nextSet(this._row),r=null,n=1;!r;){if(!(r=this._findPattern(this.START_PATTERN,t,!1,!0)))return null;if(n=Math.floor((r.end-r.start)/4),(e=r.start-10*n)>=0&&this._matchRange(e,r.start,0))return r;t=r.end,r=null}return null}},{key:"_verifyTrailingWhitespace",value:function(e){var t=e.end+(e.end-e.start)/2;return t<this._row.length&&this._matchRange(e.end,t,0)?e:null}},{key:"_findEnd",value:function(){this._row.reverse();var e=this._findPattern(this.STOP_PATTERN);if(this._row.reverse(),null===e)return null;var t=e.start;return e.start=this._row.length-e.end,e.end=this._row.length-t,null!==e?this._verifyTrailingWhitespace(e):null}},{key:"_decodePair",value:function(e){for(var t=[],r=0;r<e.length;r++){var n=this._decodeCode(e[r]);if(!n)return null;t.push(n)}return t}},{key:"_decodeCode",value:function(e){for(var t=this.AVG_CODE_ERROR,r={error:Number.MAX_VALUE,code:-1,start:0,end:0},n=0;n<this.CODE_PATTERN.length;n++){var o=this._matchPattern(e,this.CODE_PATTERN[n]);o<r.error&&(r.code=n,r.error=o)}return r.error<t?r:null}},{key:"_decodePayload",value:function(e,t,r){for(var n=0,o=e.length,i=[[0,0,0,0,0],[0,0,0,0,0]],a=null;n<o;){for(var c=0;c<5;c++)i[0][c]=e[n]*this.barSpaceRatio[0],i[1][c]=e[n+1]*this.barSpaceRatio[1],n+=2;if(!(a=this._decodePair(i)))return null;for(var s=0;s<a.length;s++)t.push(a[s].code+""),r.push(a[s])}return a}},{key:"_verifyCounterLength",value:function(e){return e.length%10==0}},{key:"decode",value:function(e,t){var r=new Array,n=new Array,o=this._findStart();if(!o)return null;n.push(o);var i=this._findEnd();if(!i)return null;var a=this._fillCounters(o.end,i.start,!1);return this._verifyCounterLength(a)&&this._decodePayload(a,r,n)?r.length%2!=0||r.length<6?null:(n.push(i),{code:r.join(""),start:o.start,end:i.end,startInfo:o,decodedCodes:n,format:this.FORMAT}):null}}]),r}(O);function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T()(e);if(t){var o=T()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return S()(this,r)}}var ke=function(e){C()(r,e);var t=Pe(r);function r(){var e;m()(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),P()(b()(e),"CODE_FREQUENCY",[[56,52,50,49,44,38,35,42,41,37],[7,11,13,14,19,25,28,21,22,26]]),P()(b()(e),"STOP_PATTERN",[1/6*7,1/6*7,1/6*7,1/6*7,1/6*7,1/6*7]),P()(b()(e),"FORMAT","upc_e"),e}return y()(r,[{key:"_decodePayload",value:function(e,t,r){for(var n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(r),!0).forEach((function(t){P()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e),o=0,i=0;i<6;i++){if(!(n=this._decodeCode(n.end)))return null;n.code>=10&&(n.code=n.code-10,o|=1<<5-i),t.push(n.code),r.push(n)}return this._determineParity(o,t)?n:null}},{key:"_determineParity",value:function(e,t){for(var r=0;r<this.CODE_FREQUENCY.length;r++)for(var n=0;n<this.CODE_FREQUENCY[r].length;n++)if(e===this.CODE_FREQUENCY[r][n])return t.unshift(r),t.push(n),!0;return!1}},{key:"_convertToUPCA",value:function(e){var t=[e[0]],r=e[e.length-2];return(t=r<=2?t.concat(e.slice(1,3)).concat([r,0,0,0,0]).concat(e.slice(3,6)):3===r?t.concat(e.slice(1,4)).concat([0,0,0,0,0]).concat(e.slice(4,6)):4===r?t.concat(e.slice(1,5)).concat([0,0,0,0,0,e[5]]):t.concat(e.slice(1,6)).concat([0,0,0,0,r])).push(e[e.length-1]),t}},{key:"_checksum",value:function(e){return V()(T()(r.prototype),"_checksum",this).call(this,this._convertToUPCA(e))}},{key:"_findEnd",value:function(e,t){return V()(T()(r.prototype),"_findEnd",this).call(this,e,!0)}},{key:"_verifyTrailingWhitespace",value:function(e){var t=e.end+(e.end-e.start)/2;return t<this._row.length&&this._matchRange(e.end,t,0)?e:null}}]),r}(ge);function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T()(e);if(t){var o=T()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return S()(this,r)}}var Me=function(e){C()(r,e);var t=Oe(r);function r(){var e;m()(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),P()(b()(e),"FORMAT","upc_a"),e}return y()(r,[{key:"decode",value:function(e,t){var r=ge.prototype.decode.call(this);return r&&r.code&&13===r.code.length&&"0"===r.code.charAt(0)?(r.code=r.code.substring(1),r):null}}]),r}(ge),De={},Ae={UP:1,DOWN:-1};De.getBarcodeLine=function(e,t,r){var n,o,i,a,c,s=0|t.x,u=0|t.y,f=0|r.x,l=0|r.y,d=Math.abs(l-u)>Math.abs(f-s),p=[],h=e.data,v=e.size.x,m=255,g=0;function y(e,t){c=h[t*v+e],m=c<m?c:m,g=c>g?c:g,p.push(c)}d&&(i=s,s=u,u=i,i=f,f=l,l=i),s>f&&(i=s,s=f,f=i,i=u,u=l,l=i);var _=f-s,b=Math.abs(l-u);n=_/2|0,o=u;var x=u<l?1:-1;for(a=s;a<f;a++)d?y(o,a):y(a,o),(n-=b)<0&&(o+=x,n+=_);return{line:p,min:m,max:g}},De.toBinaryLine=function(e){var t,r,n,o,i,a,c=e.min,s=e.max,u=e.line,f=c+(s-c)/2,l=[],d=(s-c)/12,p=-d;for(n=u[0]>f?Ae.UP:Ae.DOWN,l.push({pos:0,val:u[0]}),i=0;i<u.length-2;i++)n!==(o=(t=u[i+1]-u[i])+(r=u[i+2]-u[i+1])<p&&u[i+1]<1.5*f?Ae.DOWN:t+r>d&&u[i+1]>.5*f?Ae.UP:n)&&(l.push({pos:i,val:u[i]}),n=o);for(l.push({pos:u.length,val:u[u.length-1]}),a=l[0].pos;a<l[1].pos;a++)u[a]=u[a]>f?0:1;for(i=1;i<l.length-1;i++)for(d=l[i+1].val>l[i].val?l[i].val+(l[i+1].val-l[i].val)/3*2|0:l[i+1].val+(l[i].val-l[i+1].val)/3|0,a=l[i].pos;a<l[i+1].pos;a++)u[a]=u[a]>d?0:1;return{line:u,threshold:d}},De.debug={printFrequency:function(e,t){var r,n=t.getContext("2d");for(t.width=e.length,t.height=256,n.beginPath(),n.strokeStyle="blue",r=0;r<e.length;r++)n.moveTo(r,255),n.lineTo(r,255-e[r]);n.stroke(),n.closePath()},printPattern:function(e,t){var r,n=t.getContext("2d");for(t.width=e.length,n.fillColor="black",r=0;r<e.length;r++)1===e[r]&&n.fillRect(r,0,1,100)}};var je=De;function Ie(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Le(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ne={code_128_reader:q,ean_reader:ge,ean_5_reader:Ce,ean_2_reader:_e,ean_8_reader:Se,code_39_reader:Q,code_39_vin_reader:oe,codabar_reader:B,upc_reader:Me,upc_e_reader:ke,i2of5_reader:Te,"2of5_reader":L,code_93_reader:se,code_32_reader:ee},ze={registerReader:function(e,t){Ne[e]=t},create:function(e,t){var r={frequency:null,pattern:null,overlay:null},n=[];function o(){e.readers.forEach((function(e){var t,r={},o=[];"object"===a()(e)?(t=e.format,r=e.config):"string"==typeof e&&(t=e),r.supplements&&(o=r.supplements.map((function(e){return new Ne[e]})));try{var i=new Ne[t](r,o);n.push(i)}catch(e){throw console.error("* Error constructing reader ",t,e),e}}))}function i(e){var r,o=null,i=je.getBarcodeLine(t,e[0],e[1]);for(je.toBinaryLine(i),r=0;r<n.length&&null===o;r++)o=n[r].decodePattern(i.line);return null===o?null:{codeResult:o,barcodeLine:i}}function c(e){return s.apply(this,arguments)}function s(){return(s=l()(p.a.mark((function e(t){var r,o,i,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null,o=Ie(n),e.prev=2,o.s();case 4:if((i=o.n()).done){e.next=14;break}if(!(a=i.value).decodeImage){e.next=12;break}return e.next=9,a.decodeImage(t);case 9:if(!(r=e.sent)){e.next=12;break}return e.abrupt("break",14);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),o.e(e.t0);case 19:return e.prev=19,o.f(),e.finish(19);case 22:return e.abrupt("return",r);case 23:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})))).apply(this,arguments)}function u(e){var n,o;r.overlay;var a=function(e){return Math.sqrt(Math.pow(Math.abs(e[1].y-e[0].y),2)+Math.pow(Math.abs(e[1].x-e[0].x),2))}(n=function(e){return[{x:(e[1][0]-e[0][0])/2+e[0][0],y:(e[1][1]-e[0][1])/2+e[0][1]},{x:(e[3][0]-e[2][0])/2+e[2][0],y:(e[3][1]-e[2][1])/2+e[2][1]}]}(e)),c=Math.atan2(n[1].y-n[0].y,n[1].x-n[0].x);return null===(n=function(e,r,n){function o(t){var n=t*Math.sin(r),o=t*Math.cos(r);e[0].y-=n,e[0].x-=o,e[1].y+=n,e[1].x+=o}for(o(n);n>1&&(!t.inImageWithBorder(e[0])||!t.inImageWithBorder(e[1]));)o(-(n-=Math.ceil(n/2)));return e}(n,c,Math.floor(.1*a)))?null:(null===(o=i(n))&&(o=function(e,t,r){var n,o,a,c=Math.sqrt(Math.pow(e[1][0]-e[0][0],2)+Math.pow(e[1][1]-e[0][1],2)),s=null,u=Math.sin(r),f=Math.cos(r);for(n=1;n<16&&null===s;n++)a={y:(o=c/16*n*(n%2==0?-1:1))*u,x:o*f},t[0].y+=a.x,t[0].x-=a.y,t[1].y+=a.x,t[1].x-=a.y,s=i(t);return s}(e,n,c)),null===o?null:{codeResult:o.codeResult,line:n,angle:c,pattern:o.barcodeLine.line,threshold:o.barcodeLine.threshold})}return o(),{decodeFromBoundingBox:function(e){return u(e)},decodeFromBoundingBoxes:function(t){var r,n,o=[],i=e.multiple;for(r=0;r<t.length;r++){var a=t[r];if((n=u(a)||{}).box=a,i)o.push(n);else if(n.codeResult)return n}return{barcodes:o}},decodeFromImage:function(e){return l()(p.a.mark((function t(){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c(e);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))()},registerReader:function(e,t){if(Ne[e])throw new Error("cannot register existing reader",e);Ne[e]=t},setReaders:function(t){e.readers=t,n.length=0,o()}}}},Fe=function(){var e={};function t(t){return e[t]||(e[t]={subscribers:[]}),e[t]}function r(e,t){e.async?setTimeout((function(){e.callback(t)}),4):e.callback(t)}function n(e,r,n){var o;if("function"==typeof r)o={callback:r,async:n};else if(!(o=r).callback)throw new Error("Callback was not specified on options");t(e).subscribers.push(o)}return{subscribe:function(e,t,r){return n(e,t,r)},publish:function(e,n){var o=t(e),i=o.subscribers;i.filter((function(e){return!!e.once})).forEach((function(e){r(e,n)})),o.subscribers=i.filter((function(e){return!e.once})),o.subscribers.forEach((function(e){r(e,n)}))},once:function(e,t){n(e,{callback:t,async:arguments.length>2&&void 0!==arguments[2]&&arguments[2],once:!0})},unsubscribe:function(r,n){if(r){var o=t(r);o.subscribers=o&&n?o.subscribers.filter((function(e){return e.callback!==n})):[]}else e={}}}}(),Ue=r(62),Be=r.n(Ue),Ge=r(63);function qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T()(e);if(t){var o=T()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return S()(this,r)}}var We,Ve=function(e){C()(r,e);var t=qe(r);function r(e,n){var o;return m()(this,r),o=t.call(this,e),P()(b()(o),"code",void 0),o.code=n,Object.setPrototypeOf(b()(o),r.prototype),o}return y()(r)}(r.n(Ge)()(Error)),Je="This may mean that the user has declined camera access, or the browser does not support media APIs. If you are running in iOS, you must use Safari.";function He(){try{return navigator.mediaDevices.enumerateDevices()}catch(t){var e=new Ve("enumerateDevices is not defined. ".concat(Je),-1);return Promise.reject(e)}}function Xe(e){try{return navigator.mediaDevices.getUserMedia(e)}catch(e){var t=new Ve("getUserMedia is not defined. ".concat(Je),-1);return Promise.reject(t)}}function $e(e){return new Promise((function(t,r){var n=10;!function o(){n>0?e.videoWidth>10&&e.videoHeight>10?t():window.setTimeout(o,500):r(new Ve("Unable to play video stream. Is webcam working?",-1)),n--}()}))}function Ye(e,t){return Qe.apply(this,arguments)}function Qe(){return(Qe=l()(p.a.mark((function e(t,r){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe(r);case 2:if(n=e.sent,We=n,!t){e.next=11;break}return t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t.srcObject=n,t.addEventListener("loadedmetadata",(function(){t.play().catch((function(e){console.warn("* Error while trying to play video stream:",e)}))})),e.abrupt("return",$e(t));case 11:return e.abrupt("return",Promise.resolve());case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ke(e){var t=Be()(e,["width","height","facingMode","aspectRatio","deviceId"]);return void 0!==e.minAspectRatio&&e.minAspectRatio>0&&(t.aspectRatio=e.minAspectRatio,console.log("WARNING: Constraint 'minAspectRatio' is deprecated; Use 'aspectRatio' instead")),void 0!==e.facing&&(t.facingMode=e.facing,console.log("WARNING: Constraint 'facing' is deprecated. Use 'facingMode' instead'")),t}function Ze(){var e=Ke(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return e&&e.deviceId&&e.facingMode&&delete e.facingMode,Promise.resolve({audio:!1,video:e})}function et(){return(et=l()(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He();case 2:return t=e.sent,e.abrupt("return",t.filter((function(e){return"videoinput"===e.kind})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tt(){if(!We)return null;var e=We.getVideoTracks();return e&&null!=e&&e.length?e[0]:null}var rt={requestedVideoElement:null,request:function(e,t){return l()(p.a.mark((function r(){var n;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return rt.requestedVideoElement=e,r.next=3,Ze(t);case 3:return n=r.sent,r.abrupt("return",Ye(e,n));case 5:case"end":return r.stop()}}),r)})))()},release:function(){var e=We&&We.getVideoTracks();return null!==rt.requestedVideoElement&&rt.requestedVideoElement.pause(),new Promise((function(t){setTimeout((function(){e&&e.length&&e.forEach((function(e){return e.stop()})),We=null,rt.requestedVideoElement=null,t()}),0)}))},enumerateVideoDevices:function(){return et.apply(this,arguments)},getActiveStreamLabel:function(){var e=tt();return e?e.label:""},getActiveTrack:tt,disableTorch:function(){return l()(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=tt())){e.next=11;break}return e.prev=2,e.next=5,t.applyConstraints({advanced:[{torch:!1}]});case 5:e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(2),e.t0 instanceof OverconstrainedError&&console.warn("quagga2/CameraAccess: Torch not supported on this device"),e.t0;case 11:case"end":return e.stop()}}),e,null,[[2,7]])})))()},enableTorch:function(){return l()(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=tt())){e.next=11;break}return e.prev=2,e.next=5,t.applyConstraints({advanced:[{torch:!0}]});case 5:e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(2),e.t0 instanceof OverconstrainedError&&console.warn("quagga2/CameraAccess: Torch not supported on this device"),e.t0;case 11:case"end":return e.stop()}}),e,null,[[2,7]])})))()}},nt=rt,ot={create:function(e){var t,r=document.createElement("canvas"),n=r.getContext("2d",{willReadFrequently:!!e.willReadFrequently}),o=[],i=null!==(t=e.capacity)&&void 0!==t?t:20,a=!0===e.capture;function c(t){return!!i&&t&&!function(e,t){return t&&t.some((function(t){return Object.keys(t).every((function(r){return t[r]===e[r]}))}))}(t,e.blacklist)&&function(e,t){return"function"!=typeof t||t(e)}(t,e.filter)}return{addResult:function(e,t,s){var u={};c(s)&&(i--,u.codeResult=s,a&&(r.width=t.x,r.height=t.y,h.a.drawImage(e,t,n),u.frame=r.toDataURL()),o.push(u))},getResults:function(){return o}}}},it={inputStream:{name:"Live",type:"LiveStream",constraints:{width:640,height:480,facingMode:"environment"},area:{top:"0%",right:"0%",left:"0%",bottom:"0%"},singleChannel:!1},locate:!0,numOfWorkers:4,decoder:{readers:["code_128_reader"]},locator:{halfSample:!0,patchSize:"medium"}},at=r(5),ct=r(10),st=Math.PI/180,ut={create:function(e,t){var r,n={},o=e.getConfig(),i=(Object(ct.h)(e.getRealWidth(),e.getRealHeight()),e.getCanvasSize()),a=Object(ct.h)(e.getWidth(),e.getHeight()),c=e.getTopRight(),s=c.x,u=c.y,f=null,l=null,d=o.willReadFrequently;return(r=t||document.createElement("canvas")).width=i.x,r.height=i.y,console.warn("*** frame_grabber_browser: willReadFrequently=",d,"canvas=",r),f=r.getContext("2d",{willReadFrequently:!!d}),l=new Uint8Array(a.x*a.y),n.attachData=function(e){l=e},n.getData=function(){return l},n.grab=function(){var t,n=o.halfSample,c=e.getFrame(),d=c,p=0;if(d){if(function(e,t){e.width!==t.x&&(e.width=t.x),e.height!==t.y&&(e.height=t.y)}(r,i),"ImageStream"===o.type&&(d=c.img,c.tags&&c.tags.orientation))switch(c.tags.orientation){case 6:p=90*st;break;case 8:p=-90*st}return 0!==p?(f.translate(i.x/2,i.y/2),f.rotate(p),f.drawImage(d,-i.y/2,-i.x/2,i.y,i.x),f.rotate(-p),f.translate(-i.x/2,-i.y/2)):f.drawImage(d,0,0,i.x,i.y),t=f.getImageData(s,u,a.x,a.y).data,n?Object(ct.e)(t,a,l):Object(ct.c)(t,l,o),!0}return!1},n.getSize=function(){return a},n}},ft=ut,lt={274:"orientation"},dt=Object.keys(lt).map((function(e){return lt[e]}));function pt(e){return new Promise((function(t){var r=new FileReader;r.onload=function(e){return t(e.target.result)},r.readAsArrayBuffer(e)}))}function ht(e){return new Promise((function(t,r){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onreadystatechange=function(){n.readyState!==XMLHttpRequest.DONE||200!==n.status&&0!==n.status||t(this.response)},n.onerror=r,n.send()}))}function vt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dt,r=new DataView(e),n=e.byteLength,o=t.reduce((function(e,t){var r=Object.keys(lt).filter((function(e){return lt[e]===t}))[0];return r&&(e[r]=t),e}),{}),i=2;if(255!==r.getUint8(0)||216!==r.getUint8(1))return!1;for(;i<n;){if(255!==r.getUint8(i))return!1;if(225===r.getUint8(i+1))return mt(r,i+4,o);i+=2+r.getUint16(i+2)}return!1}function mt(e,t,r){if("Exif"!==function(e,t,r){for(var n="",o=t;o<t+r;o++)n+=String.fromCharCode(e.getUint8(o));return n}(e,t,4))return!1;var n,o=t+6;if(18761===e.getUint16(o))n=!1;else{if(19789!==e.getUint16(o))return!1;n=!0}if(42!==e.getUint16(o+2,!n))return!1;var i=e.getUint32(o+4,!n);return!(i<8)&&function(e,t,r,n,o){for(var i=e.getUint16(r,!o),a={},c=0;c<i;c++){var s=r+12*c+2,u=n[e.getUint16(s,!o)];u&&(a[u]=gt(e,s,t,r,o))}return a}(e,o,o+i,r,n)}function gt(e,t,r,n,o){var i=e.getUint16(t+2,!o),a=e.getUint32(t+4,!o);return 3===i&&1===a?e.getUint16(t+8,!o):null}var yt={};function _t(e,t){e.onload=function(){t.loaded(this)}}yt.load=function(e,t,r,n,o){var i,a,c,s=new Array(n),u=new Array(s.length);if(!1===o)s[0]=e;else for(i=0;i<s.length;i++)c=r+i,s[i]="".concat(e,"image-").concat("00".concat(c).slice(-3),".jpg");for(u.notLoaded=[],u.addImage=function(e){u.notLoaded.push(e)},u.loaded=function(r){for(var n=u.notLoaded,i=0;i<n.length;i++)if(n[i]===r){n.splice(i,1);for(var a=0;a<s.length;a++){var c=s[a].substr(s[a].lastIndexOf("/"));if(-1!==r.src.lastIndexOf(c)){u[a]={img:r};break}}break}0===n.length&&(!1===o?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dt;return/^blob:/i.test(e)?ht(e).then(pt).then((function(e){return vt(e,t)})):Promise.resolve(null)}(e,["orientation"]).then((function(e){u[0].tags=e,t(u)})).catch((function(e){console.log(e),t(u)})):t(u))},i=0;i<s.length;i++)a=new Image,u.addImage(a),_t(a,u),a.src=s[i]};var bt=yt,xt={createVideoStream:function(e){console.warn("**** InputStreamBrowser createVideoStream");var t,r,n=null,o=["canrecord","ended"],i={},a={x:0,y:0,type:"Point"},c={x:0,y:0,type:"XYSize"},s={getRealWidth:function(){return e.videoWidth},getRealHeight:function(){return e.videoHeight},getWidth:function(){return t},getHeight:function(){return r},setWidth:function(e){t=e},setHeight:function(e){r=e},setInputStream:function(e){n=e,this.setAttribute("src",void 0!==e.src?e.src:"")},ended:function(){return e.ended},getConfig:function(){return n},setAttribute:function(t,r){e&&e.setAttribute(t,r)},pause:function(){e.pause()},play:function(){e.play()},setCurrentTime:function(e){var t;"LiveStream"!==(null===(t=n)||void 0===t?void 0:t.type)&&this.setAttribute("currentTime",e.toString())},addEventListener:function(t,r,n){-1!==o.indexOf(t)?(i[t]||(i[t]=[]),i[t].push(r)):e.addEventListener(t,r,n)},clearEventHandlers:function(){o.forEach((function(t){var r=i[t];r&&r.length>0&&r.forEach((function(r){e.removeEventListener(t,r)}))}))},trigger:function(o,a){var u,f,l,d,p,h=i[o];if("canrecord"===o&&(d=e.videoWidth,p=e.videoHeight,t=null!==(f=n)&&void 0!==f&&f.size?d/p>1?n.size:Math.floor(d/p*n.size):d,r=null!==(l=n)&&void 0!==l&&l.size?d/p>1?Math.floor(p/d*n.size):n.size:p,c.x=t,c.y=r),h&&h.length>0)for(u=0;u<h.length;u++)h[u].apply(s,a)},setTopRight:function(e){a.x=e.x,a.y=e.y},getTopRight:function(){return a},setCanvasSize:function(e){c.x=e.x,c.y=e.y},getCanvasSize:function(){return c},getFrame:function(){return e}};return s},createLiveStream:function(e){console.warn("**** InputStreamBrowser createLiveStream"),e&&e.setAttribute("autoplay","true");var t=xt.createVideoStream(e);return t.ended=function(){return!1},t},createImageStream:function(){var e,t,r=null,n=0,o=0,i=0,a=!0,c=!1,s=null,u=0,f=null,l=!1,d=["canrecord","ended"],p={},h={x:0,y:0,type:"Point"},v={x:0,y:0,type:"XYSize"};function m(e,t){var r,n=p[e];if(n&&n.length>0)for(r=0;r<n.length;r++)n[r].apply(g,t)}var g={trigger:m,getWidth:function(){return e},getHeight:function(){return t},setWidth:function(t){e=t},setHeight:function(e){t=e},getRealWidth:function(){return n},getRealHeight:function(){return o},setInputStream:function(a){var l;r=a,!1===a.sequence?(f=a.src,u=1):(f=a.src,u=a.length),c=!1,bt.load(f,(function(a){var u,f;if(s=a,a[0].tags&&a[0].tags.orientation)switch(a[0].tags.orientation){case 6:case 8:n=a[0].img.height,o=a[0].img.width;break;default:n=a[0].img.width,o=a[0].img.height}else n=a[0].img.width,o=a[0].img.height;e=null!==(u=r)&&void 0!==u&&u.size?n/o>1?r.size:Math.floor(n/o*r.size):n,t=null!==(f=r)&&void 0!==f&&f.size?n/o>1?Math.floor(o/n*r.size):r.size:o,v.x=e,v.y=t,c=!0,i=0,setTimeout((function(){m("canrecord",[])}),0)}),1,u,null===(l=r)||void 0===l?void 0:l.sequence)},ended:function(){return l},setAttribute:function(){},getConfig:function(){return r},pause:function(){a=!0},play:function(){a=!1},setCurrentTime:function(e){i=e},addEventListener:function(e,t){-1!==d.indexOf(e)&&(p[e]||(p[e]=[]),p[e].push(t))},clearEventHandlers:function(){Object.keys(p).forEach((function(e){return delete p[e]}))},setTopRight:function(e){h.x=e.x,h.y=e.y},getTopRight:function(){return h},setCanvasSize:function(e){v.x=e.x,v.y=e.y},getCanvasSize:function(){return v},getFrame:function(){var e,t;return c?(a||(e=null===(t=s)||void 0===t?void 0:t[i],i<u-1?i++:setTimeout((function(){l=!0,m("ended",[])}),0)),e):null}};return g}},Ct=xt,wt=r(23),St=y()((function e(){m()(this,e),P()(this,"config",void 0),P()(this,"inputStream",void 0),P()(this,"framegrabber",void 0),P()(this,"inputImageWrapper",void 0),P()(this,"stopped",!1),P()(this,"boxSize",void 0),P()(this,"resultCollector",void 0),P()(this,"decoder",void 0),P()(this,"workerPool",[]),P()(this,"onUIThread",!0),P()(this,"canvasContainer",new Tt)})),Rt=y()((function e(){m()(this,e),P()(this,"image",void 0),P()(this,"overlay",void 0)})),Tt=y()((function e(){m()(this,e),P()(this,"ctx",void 0),P()(this,"dom",void 0),this.ctx=new Rt,this.dom=new Rt}));function Et(e){if("undefined"==typeof document)return null;if(e instanceof HTMLElement&&e.nodeName&&1===e.nodeType)return e;var t="string"==typeof e?e:"#interactive.viewport";return document.querySelector(t)}function Pt(e,t,r){var n=function(e,t){var r=document.querySelector(e);return r||((r=document.createElement("canvas")).className=t),r}(e,t);console.warn("* initCanvas getCanvasAndContext");var o=n.getContext("2d",{willReadFrequently:r.willReadFrequently});return{canvas:n,context:o}}function kt(e){var t,r,n,o,i,a,c=Et(null==e||null===(t=e.config)||void 0===t||null===(r=t.inputStream)||void 0===r?void 0:r.target),s=null==e||null===(n=e.config)||void 0===n||null===(o=n.inputStream)||void 0===o?void 0:o.type;if(!s)return null;var u=function(e,t){var r=t.willReadFrequently;if("undefined"!=typeof document){var n=Pt("canvas.imgBuffer","imgBuffer",{willReadFrequently:r}),o=Pt("canvas.drawingBuffer","drawingBuffer",{willReadFrequently:r});return n.canvas.width=o.canvas.width=e.x,n.canvas.height=o.canvas.height=e.y,{dom:{image:n.canvas,overlay:o.canvas},ctx:{image:n.context,overlay:o.context}}}return null}(e.inputStream.getCanvasSize(),{willReadFrequently:!(null==e||null===(i=e.config)||void 0===i||null===(a=i.inputStream)||void 0===a||!a.willReadFrequently)});if(!u)return{dom:{image:null,overlay:null},ctx:{image:null,overlay:null}};var f=u.dom;return"undefined"!=typeof document&&c&&("ImageStream"!==s||c.contains(f.image)||c.appendChild(f.image),c.contains(f.overlay)||c.appendChild(f.overlay)),u}function Ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(r),!0).forEach((function(t){P()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ot(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}at.a.setMatrixArrayType(Array);var Dt=[];function At(e){return Mt(Mt({},e),{},{inputStream:Mt(Mt({},e.inputStream),{},{target:null})})}function jt(e){if(e){var t=e().default;if(!t)return void self.postMessage({event:"error",message:"Quagga could not be created"})}var r;function n(e){self.postMessage({event:"processed",imageData:r.data,result:e},[r.data.buffer])}function o(){self.postMessage({event:"initialized",imageData:r.data},[r.data.buffer])}self.onmessage=function(e){if("init"===e.data.cmd){var i=e.data.config;i.numOfWorkers=0,r=new t.ImageWrapper({x:e.data.size.x,y:e.data.size.y},new Uint8Array(e.data.imageData)),t.init(i,o,r),t.onProcessed(n)}else"process"===e.data.cmd?(r.data=new Uint8Array(e.data.imageData),t.start()):"setReaders"===e.data.cmd?t.setReaders(e.data.readers):"registerReader"===e.data.cmd&&t.registerReader(e.data.name,e.data.reader)}}function It(e,t,r){var n,o,i=("undefined"!=typeof __factorySource__&&(o=__factorySource__),n=new Blob(["("+jt.toString()+")("+o+");"],{type:"text/javascript"}),window.URL.createObjectURL(n)),a={worker:new Worker(i),imageData:new Uint8Array(t.getWidth()*t.getHeight()),busy:!0};a.worker.onmessage=function(e){"initialized"===e.data.event?(URL.revokeObjectURL(i),a.busy=!1,a.imageData=new Uint8Array(e.data.imageData),r(a)):"processed"===e.data.event?(a.imageData=new Uint8Array(e.data.imageData),a.busy=!1):e.data.event},a.worker.postMessage({cmd:"init",size:{x:t.getWidth(),y:t.getHeight()},imageData:a.imageData,config:At(e)},[a.imageData.buffer])}function Lt(e,t,r,n){var o=e-Dt.length;if(0===o&&n)n();else if(o<0)Dt.slice(o).forEach((function(e){e.worker.terminate()})),Dt=Dt.slice(0,o),n&&n();else{var i=function(t){Dt.push(t),Dt.length>=e&&n&&n()};if(t)for(var a=0;a<o;a++)It(t,r,i)}}function Nt(e,t,r){for(var n=e.length;n--;)e[n][0]+=t,e[n][1]+=r}at.a.setMatrixArrayType(Array);var zt=function(){function e(){var t=this;m()(this,e),P()(this,"context",new St),P()(this,"canRecord",(function(e){var r;t.context.config&&(wt.a.checkImageConstraints(t.context.inputStream,null===(r=t.context.config)||void 0===r?void 0:r.locator),t.initCanvas(),t.context.framegrabber=ft.create(t.context.inputStream,t.context.canvasContainer.dom.image),void 0===t.context.config.numOfWorkers&&(t.context.config.numOfWorkers=0),Lt(t.context.config.numOfWorkers,t.context.config,t.context.inputStream,(function(){var r;0===(null===(r=t.context.config)||void 0===r?void 0:r.numOfWorkers)&&t.initializeData(),t.ready(e)})))})),P()(this,"update",(function(){if(t.context.onUIThread){var e,r=(o=t.context.framegrabber,Dt.length?!!(i=Dt.filter((function(e){return!e.busy}))[0])&&(o.attachData(i.imageData),o.grab()&&(i.busy=!0,i.worker.postMessage({cmd:"process",imageData:i.imageData},[i.imageData.buffer])),!0):null);r||(t.context.framegrabber.attachData(null===(e=t.context.inputImageWrapper)||void 0===e?void 0:e.data),t.context.framegrabber.grab()&&(r||t.locateAndDecode()))}else{var n;t.context.framegrabber.attachData(null===(n=t.context.inputImageWrapper)||void 0===n?void 0:n.data),t.context.framegrabber.grab(),t.locateAndDecode()}var o,i}))}var t,r;return y()(e,[{key:"initBuffers",value:function(e){if(this.context.config){var t=function(e,t,r){var n=t||new u.a({x:e.getWidth(),y:e.getHeight(),type:"XYSize"}),o=[at.c.clone([0,0]),at.c.clone([0,n.size.y]),at.c.clone([n.size.x,n.size.y]),at.c.clone([n.size.x,0])];return wt.a.init(n,r),{inputImageWrapper:n,boxSize:o}}(this.context.inputStream,e,this.context.config.locator),r=t.inputImageWrapper,n=t.boxSize;this.context.inputImageWrapper=r,this.context.boxSize=n}}},{key:"initializeData",value:function(e){this.context.config&&(this.initBuffers(e),this.context.decoder=ze.create(this.context.config.decoder,this.context.inputImageWrapper))}},{key:"getViewPort",value:function(){return this.context.config&&this.context.config.inputStream?Et(this.context.config.inputStream.target):null}},{key:"ready",value:function(e){this.context.inputStream.play(),e()}},{key:"initCanvas",value:function(){var e=kt(this.context);if(e){var t=e.ctx,r=e.dom;this.context.canvasContainer.dom.image=r.image,this.context.canvasContainer.dom.overlay=r.overlay,this.context.canvasContainer.ctx.image=t.image,this.context.canvasContainer.ctx.overlay=t.overlay}}},{key:"initInputStream",value:function(e){if(this.context.config&&this.context.config.inputStream){var t=this.context.config.inputStream,r=t.type,n=t.constraints,o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"LiveStream",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;switch(e){case"VideoStream":var n=document.createElement("video");return{video:n,inputStream:r.createVideoStream(n)};case"ImageStream":return{inputStream:r.createImageStream()};case"LiveStream":var o=null;return t&&((o=t.querySelector("video"))||(o=document.createElement("video"),t.appendChild(o))),{video:o,inputStream:r.createLiveStream(o)};default:return console.error("* setupInputStream invalid type ".concat(e)),{video:null,inputStream:null}}}(r,this.getViewPort(),Ct),i=o.video,a=o.inputStream;"LiveStream"===r&&i&&nt.request(i,n).then((function(){return a.trigger("canrecord")})).catch((function(t){return e(t)})),a&&(a.setAttribute("preload","auto"),a.setInputStream(this.context.config.inputStream),a.addEventListener("canrecord",this.canRecord.bind(void 0,e))),this.context.inputStream=a}}},{key:"getBoundingBoxes",value:function(){var e;return null!==(e=this.context.config)&&void 0!==e&&e.locate?wt.a.locate():[[at.c.clone(this.context.boxSize[0]),at.c.clone(this.context.boxSize[1]),at.c.clone(this.context.boxSize[2]),at.c.clone(this.context.boxSize[3])]]}},{key:"transformResult",value:function(e){var t=this,r=this.context.inputStream.getTopRight(),n=r.x,o=r.y;if((0!==n||0!==o)&&(e.barcodes&&e.barcodes.forEach((function(e){return t.transformResult(e)})),e.line&&2===e.line.length&&function(e,t,r){e[0].x+=t,e[0].y+=r,e[1].x+=t,e[1].y+=r}(e.line,n,o),e.box&&Nt(e.box,n,o),e.boxes&&e.boxes.length>0))for(var i=0;i<e.boxes.length;i++)Nt(e.boxes[i],n,o)}},{key:"addResult",value:function(e,t){var r=this;t&&this.context.resultCollector&&(e.barcodes?e.barcodes.filter((function(e){return e.codeResult})).forEach((function(e){return r.addResult(e,t)})):e.codeResult&&this.context.resultCollector.addResult(t,this.context.inputStream.getCanvasSize(),e.codeResult))}},{key:"hasCodeResult",value:function(e){return!(!e||!(e.barcodes?e.barcodes.some((function(e){return e.codeResult})):e.codeResult))}},{key:"publishResult",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,r=e;e&&this.context.onUIThread&&(this.transformResult(e),this.addResult(e,t),r=e.barcodes||e),Fe.publish("processed",r),this.hasCodeResult(e)&&Fe.publish("detected",r)}},{key:"locateAndDecode",value:(r=l()(p.a.mark((function e(){var t,r,n,o,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.getBoundingBoxes())){e.next=12;break}return e.next=4,this.context.decoder.decodeFromBoundingBoxes(t);case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:(n=e.t0).boxes=t,this.publishResult(n,null===(r=this.context.inputImageWrapper)||void 0===r?void 0:r.data),e.next=16;break;case 12:return e.next=14,this.context.decoder.decodeFromImage(this.context.inputImageWrapper);case 14:(o=e.sent)?this.publishResult(o,null===(i=this.context.inputImageWrapper)||void 0===i?void 0:i.data):this.publishResult();case 16:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"startContinuousUpdate",value:function(){var e,t=this,r=null,n=1e3/((null===(e=this.context.config)||void 0===e?void 0:e.frequency)||60);this.context.stopped=!1;var o=this.context;!function e(i){r=r||i,o.stopped||(i>=r&&(r+=n,t.update()),window.requestAnimationFrame(e))}(performance.now())}},{key:"start",value:function(){var e,t;this.context.onUIThread&&"LiveStream"===(null===(e=this.context.config)||void 0===e||null===(t=e.inputStream)||void 0===t?void 0:t.type)?this.startContinuousUpdate():this.update()}},{key:"stop",value:(t=l()(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.context.stopped=!0,Lt(0),null===(t=this.context.config)||void 0===t||!t.inputStream||"LiveStream"!==this.context.config.inputStream.type){e.next=6;break}return e.next=5,nt.release();case 5:this.context.inputStream.clearEventHandlers();case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"setReaders",value:function(e){this.context.decoder&&this.context.decoder.setReaders(e),function(e){Dt.forEach((function(t){return t.worker.postMessage({cmd:"setReaders",readers:e})}))}(e)}},{key:"registerReader",value:function(e,t){ze.registerReader(e,t),this.context.decoder&&this.context.decoder.registerReader(e,t),function(e,t){Dt.forEach((function(r){return r.worker.postMessage({cmd:"registerReader",name:e,reader:t})}))}(e,t)}}]),e}(),Ft=new zt,Ut=Ft.context,Bt={init:function(e,t,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ft;return t||(n=new Promise((function(e,r){t=function(t){t?r(t):e()}}))),o.context.config=s()({},it,e),o.context.config.numOfWorkers>0&&(o.context.config.numOfWorkers=0),r?(o.context.onUIThread=!1,o.initializeData(r),t&&t()):o.initInputStream(t),n},start:function(){return Ft.start()},stop:function(){return Ft.stop()},pause:function(){Ut.stopped=!0},onDetected:function(e){e&&("function"==typeof e||"object"===a()(e)&&e.callback)?Fe.subscribe("detected",e):console.trace("* warning: Quagga.onDetected called with invalid callback, ignoring")},offDetected:function(e){Fe.unsubscribe("detected",e)},onProcessed:function(e){e&&("function"==typeof e||"object"===a()(e)&&e.callback)?Fe.subscribe("processed",e):console.trace("* warning: Quagga.onProcessed called with invalid callback, ignoring")},offProcessed:function(e){Fe.unsubscribe("processed",e)},setReaders:function(e){e?Ft.setReaders(e):console.trace("* warning: Quagga.setReaders called with no readers, ignoring")},registerReader:function(e,t){e?t?Ft.registerReader(e,t):console.trace("* warning: Quagga.registerReader called with no reader, ignoring"):console.trace("* warning: Quagga.registerReader called with no name, ignoring")},registerResultCollector:function(e){e&&"function"==typeof e.addResult&&(Ut.resultCollector=e)},get canvas(){return Ut.canvasContainer},decodeSingle:function(e,t){var r=this,n=new zt;return(e=s()({inputStream:{type:"ImageStream",sequence:!1,size:800,src:e.src},numOfWorkers:1,locator:{halfSample:!1}},e)).numOfWorkers>0&&(e.numOfWorkers=0),e.numOfWorkers>0&&("undefined"==typeof Blob||"undefined"==typeof Worker)&&(console.warn("* no Worker and/or Blob support - forcing numOfWorkers to 0"),e.numOfWorkers=0),new Promise((function(o,i){try{r.init(e,(function(){Fe.once("processed",(function(e){n.stop(),t&&t.call(null,e),o(e)}),!0),n.start()}),null,n)}catch(e){i(e)}}))},get default(){return Bt},Readers:n,CameraAccess:nt,ImageDebug:h.a,ImageWrapper:u.a,ResultCollector:ot};t.default=Bt}]).default},539:function(e,t,r){"use strict";var n=r(882);function o(e,t,r,o,i){var a=n.writeRtpDescription(e.kind,t);if(a+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),a+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":i||"active"),a+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?a+="a=sendrecv\r\n":e.rtpSender?a+="a=sendonly\r\n":e.rtpReceiver?a+="a=recvonly\r\n":a+="a=inactive\r\n",e.rtpSender){var c=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=c;var s="msid:"+(o?o.id:"-")+" "+c+"\r\n";a+="a="+s,a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,a+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),a}function i(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++)if(t[r].payloadType===e||t[r].preferredPayloadType===e)return t[r]},o=function(e,t,r,o){var i=n(e.parameters.apt,r),a=n(t.parameters.apt,o);return i&&a&&i.name.toLowerCase()===a.name.toLowerCase()};return e.codecs.forEach((function(n){for(var i=0;i<t.codecs.length;i++){var a=t.codecs[i];if(n.name.toLowerCase()===a.name.toLowerCase()&&n.clockRate===a.clockRate){if("rtx"===n.name.toLowerCase()&&n.parameters&&a.parameters.apt&&!o(n,a,e.codecs,t.codecs))continue;(a=JSON.parse(JSON.stringify(a))).numChannels=Math.min(n.numChannels,a.numChannels),r.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter((function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var n=0;n<t.headerExtensions.length;n++){var o=t.headerExtensions[n];if(e.uri===o.uri){r.headerExtensions.push(o);break}}})),r}function a(e,t,r){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(r)}function c(e,t){var r=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return r||e.addRemoteCandidate(t),!r}function s(e,t){var r=new Error(t);return r.name=e,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],r}e.exports=function(e,t){function r(t,r){r.addTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function u(t,r,n,o){var i=new Event("track");i.track=r,i.receiver=n,i.transceiver={receiver:n},i.streams=o,e.setTimeout((function(){t._dispatchEvent("track",i)}))}var f=function(r){var o=this,i=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){o[e]=i[e].bind(i)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",r=JSON.parse(JSON.stringify(r||{})),this.usingBundle="max-bundle"===r.bundlePolicy,"negotiate"===r.rtcpMuxPolicy)throw s("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(r.rtcpMuxPolicy||(r.rtcpMuxPolicy="require"),r.iceTransportPolicy){case"all":case"relay":break;default:r.iceTransportPolicy="all"}switch(r.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:r.bundlePolicy="balanced"}if(r.iceServers=function(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var n=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var o="string"==typeof n;return o&&(n=[n]),n=n.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||r?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(r=!0,!0)})),delete e.url,e.urls=o?n[0]:n,!!n.length}}))}(r.iceServers||[],t),this._iceGatherers=[],r.iceCandidatePoolSize)for(var a=r.iceCandidatePoolSize;a>0;a--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:r.iceServers,gatherPolicy:r.iceTransportPolicy}));else r.iceCandidatePoolSize=0;this._config=r,this.transceivers=[],this._sdpSessionId=n.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(f.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(f.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),f.prototype.onicecandidate=null,f.prototype.onaddstream=null,f.prototype.ontrack=null,f.prototype.onremovestream=null,f.prototype.onsignalingstatechange=null,f.prototype.oniceconnectionstatechange=null,f.prototype.onconnectionstatechange=null,f.prototype.onicegatheringstatechange=null,f.prototype.onnegotiationneeded=null,f.prototype.ondatachannel=null,f.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},f.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},f.prototype.getConfiguration=function(){return this._config},f.prototype.getLocalStreams=function(){return this.localStreams},f.prototype.getRemoteStreams=function(){return this.remoteStreams},f.prototype._createTransceiver=function(e,t){var r=this.transceivers.length>0,n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&r)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var o=this._createIceAndDtlsTransports();n.iceTransport=o.iceTransport,n.dtlsTransport=o.dtlsTransport}return t||this.transceivers.push(n),n},f.prototype.addTrack=function(t,r){if(this._isClosed)throw s("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var n;if(this.transceivers.find((function(e){return e.track===t})))throw s("InvalidAccessError","Track already exists.");for(var o=0;o<this.transceivers.length;o++)this.transceivers[o].track||this.transceivers[o].kind!==t.kind||(n=this.transceivers[o]);return n||(n=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(r)&&this.localStreams.push(r),n.track=t,n.stream=r,n.rtpSender=new e.RTCRtpSender(t,n.dtlsTransport),n.rtpSender},f.prototype.addStream=function(e){var r=this;if(t>=15025)e.getTracks().forEach((function(t){r.addTrack(t,e)}));else{var n=e.clone();e.getTracks().forEach((function(e,t){var r=n.getTracks()[t];e.addEventListener("enabled",(function(e){r.enabled=e.enabled}))})),n.getTracks().forEach((function(e){r.addTrack(e,n)}))}},f.prototype.removeTrack=function(t){if(this._isClosed)throw s("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var r=this.transceivers.find((function(e){return e.rtpSender===t}));if(!r)throw s("InvalidAccessError","Sender was not created by this connection.");var n=r.stream;r.rtpSender.stop(),r.rtpSender=null,r.track=null,r.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(n)&&this.localStreams.indexOf(n)>-1&&this.localStreams.splice(this.localStreams.indexOf(n),1),this._maybeFireNegotiationNeeded()},f.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var r=t.getSenders().find((function(t){return t.track===e}));r&&t.removeTrack(r)}))},f.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},f.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},f.prototype._createIceGatherer=function(t,r){var n=this;if(r&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var o=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(o,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var r=!e.candidate||0===Object.keys(e.candidate).length;o.state=r?"completed":"gathering",null!==n.transceivers[t].bufferedCandidateEvents&&n.transceivers[t].bufferedCandidateEvents.push(e)},o.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),o},f.prototype._gather=function(t,r){var o=this,i=this.transceivers[r].iceGatherer;if(!i.onlocalcandidate){var a=this.transceivers[r].bufferedCandidateEvents;this.transceivers[r].bufferedCandidateEvents=null,i.removeEventListener("localcandidate",this.transceivers[r].bufferCandidates),i.onlocalcandidate=function(e){if(!(o.usingBundle&&r>0)){var a=new Event("icecandidate");a.candidate={sdpMid:t,sdpMLineIndex:r};var c=e.candidate,s=!c||0===Object.keys(c).length;if(s)"new"!==i.state&&"gathering"!==i.state||(i.state="completed");else{"new"===i.state&&(i.state="gathering"),c.component=1,c.ufrag=i.getLocalParameters().usernameFragment;var u=n.writeCandidate(c);a.candidate=Object.assign(a.candidate,n.parseCandidate(u)),a.candidate.candidate=u,a.candidate.toJSON=function(){return{candidate:a.candidate.candidate,sdpMid:a.candidate.sdpMid,sdpMLineIndex:a.candidate.sdpMLineIndex,usernameFragment:a.candidate.usernameFragment}}}var f=n.getMediaSections(o._localDescription.sdp);f[a.candidate.sdpMLineIndex]+=s?"a=end-of-candidates\r\n":"a="+a.candidate.candidate+"\r\n",o._localDescription.sdp=n.getDescription(o._localDescription.sdp)+f.join("");var l=o.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==o.iceGatheringState&&(o.iceGatheringState="gathering",o._emitGatheringStateChange()),s||o._dispatchEvent("icecandidate",a),l&&(o._dispatchEvent("icecandidate",new Event("icecandidate")),o.iceGatheringState="complete",o._emitGatheringStateChange())}},e.setTimeout((function(){a.forEach((function(e){i.onlocalcandidate(e)}))}),0)}},f.prototype._createIceAndDtlsTransports=function(){var t=this,r=new e.RTCIceTransport(null);r.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var n=new e.RTCDtlsTransport(r);return n.ondtlsstatechange=function(){t._updateConnectionState()},n.onerror=function(){Object.defineProperty(n,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:r,dtlsTransport:n}},f.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var r=this.transceivers[e].iceTransport;r&&(delete r.onicestatechange,delete this.transceivers[e].iceTransport);var n=this.transceivers[e].dtlsTransport;n&&(delete n.ondtlsstatechange,delete n.onerror,delete this.transceivers[e].dtlsTransport)},f.prototype._transceive=function(e,r,o){var a=i(e.localCapabilities,e.remoteCapabilities);r&&e.rtpSender&&(a.encodings=e.sendEncodingParameters,a.rtcp={cname:n.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(a.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(a)),o&&e.rtpReceiver&&a.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?a.encodings=e.recvEncodingParameters:a.encodings=[{}],a.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(a.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(a.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(a))},f.prototype.setLocalDescription=function(e){var t,r,o=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(s("TypeError",'Unsupported type "'+e.type+'"'));if(!a("setLocalDescription",e.type,o.signalingState)||o._isClosed)return Promise.reject(s("InvalidStateError","Can not set local "+e.type+" in state "+o.signalingState));if("offer"===e.type)t=n.splitSections(e.sdp),r=t.shift(),t.forEach((function(e,t){var r=n.parseRtpParameters(e);o.transceivers[t].localCapabilities=r})),o.transceivers.forEach((function(e,t){o._gather(e.mid,t)}));else if("answer"===e.type){t=n.splitSections(o._remoteDescription.sdp),r=t.shift();var c=n.matchPrefix(r,"a=ice-lite").length>0;t.forEach((function(e,t){var a=o.transceivers[t],s=a.iceGatherer,u=a.iceTransport,f=a.dtlsTransport,l=a.localCapabilities,d=a.remoteCapabilities;if(!(n.isRejected(e)&&0===n.matchPrefix(e,"a=bundle-only").length)&&!a.rejected){var p=n.getIceParameters(e,r),h=n.getDtlsParameters(e,r);c&&(h.role="server"),o.usingBundle&&0!==t||(o._gather(a.mid,t),"new"===u.state&&u.start(s,p,c?"controlling":"controlled"),"new"===f.state&&f.start(h));var v=i(l,d);o._transceive(a,v.codecs.length>0,!1)}}))}return o._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?o._updateSignalingState("have-local-offer"):o._updateSignalingState("stable"),Promise.resolve()},f.prototype.setRemoteDescription=function(o){var f=this;if(-1===["offer","answer"].indexOf(o.type))return Promise.reject(s("TypeError",'Unsupported type "'+o.type+'"'));if(!a("setRemoteDescription",o.type,f.signalingState)||f._isClosed)return Promise.reject(s("InvalidStateError","Can not set remote "+o.type+" in state "+f.signalingState));var l={};f.remoteStreams.forEach((function(e){l[e.id]=e}));var d=[],p=n.splitSections(o.sdp),h=p.shift(),v=n.matchPrefix(h,"a=ice-lite").length>0,m=n.matchPrefix(h,"a=group:BUNDLE ").length>0;f.usingBundle=m;var g=n.matchPrefix(h,"a=ice-options:")[0];return f.canTrickleIceCandidates=!!g&&g.substr(14).split(" ").indexOf("trickle")>=0,p.forEach((function(a,s){var u=n.splitLines(a),p=n.getKind(a),g=n.isRejected(a)&&0===n.matchPrefix(a,"a=bundle-only").length,y=u[0].substr(2).split(" ")[2],_=n.getDirection(a,h),b=n.parseMsid(a),x=n.getMid(a)||n.generateIdentifier();if(g||"application"===p&&("DTLS/SCTP"===y||"UDP/DTLS/SCTP"===y))f.transceivers[s]={mid:x,kind:p,protocol:y,rejected:!0};else{var C,w,S,R,T,E,P,k,O;!g&&f.transceivers[s]&&f.transceivers[s].rejected&&(f.transceivers[s]=f._createTransceiver(p,!0));var M,D,A=n.parseRtpParameters(a);g||(M=n.getIceParameters(a,h),(D=n.getDtlsParameters(a,h)).role="client"),P=n.parseRtpEncodingParameters(a);var j=n.parseRtcpParameters(a),I=n.matchPrefix(a,"a=end-of-candidates",h).length>0,L=n.matchPrefix(a,"a=candidate:").map((function(e){return n.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===o.type||"answer"===o.type)&&!g&&m&&s>0&&f.transceivers[s]&&(f._disposeIceAndDtlsTransports(s),f.transceivers[s].iceGatherer=f.transceivers[0].iceGatherer,f.transceivers[s].iceTransport=f.transceivers[0].iceTransport,f.transceivers[s].dtlsTransport=f.transceivers[0].dtlsTransport,f.transceivers[s].rtpSender&&f.transceivers[s].rtpSender.setTransport(f.transceivers[0].dtlsTransport),f.transceivers[s].rtpReceiver&&f.transceivers[s].rtpReceiver.setTransport(f.transceivers[0].dtlsTransport)),"offer"!==o.type||g){if("answer"===o.type&&!g){w=(C=f.transceivers[s]).iceGatherer,S=C.iceTransport,R=C.dtlsTransport,T=C.rtpReceiver,E=C.sendEncodingParameters,k=C.localCapabilities,f.transceivers[s].recvEncodingParameters=P,f.transceivers[s].remoteCapabilities=A,f.transceivers[s].rtcpParameters=j,L.length&&"new"===S.state&&(!v&&!I||m&&0!==s?L.forEach((function(e){c(C.iceTransport,e)})):S.setRemoteCandidates(L)),m&&0!==s||("new"===S.state&&S.start(w,M,"controlling"),"new"===R.state&&R.start(D)),!i(C.localCapabilities,C.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&C.sendEncodingParameters[0].rtx&&delete C.sendEncodingParameters[0].rtx,f._transceive(C,"sendrecv"===_||"recvonly"===_,"sendrecv"===_||"sendonly"===_),!T||"sendrecv"!==_&&"sendonly"!==_?delete C.rtpReceiver:(O=T.track,b?(l[b.stream]||(l[b.stream]=new e.MediaStream),r(O,l[b.stream]),d.push([O,T,l[b.stream]])):(l.default||(l.default=new e.MediaStream),r(O,l.default),d.push([O,T,l.default])))}}else{(C=f.transceivers[s]||f._createTransceiver(p)).mid=x,C.iceGatherer||(C.iceGatherer=f._createIceGatherer(s,m)),L.length&&"new"===C.iceTransport.state&&(!I||m&&0!==s?L.forEach((function(e){c(C.iceTransport,e)})):C.iceTransport.setRemoteCandidates(L)),k=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(k.codecs=k.codecs.filter((function(e){return"rtx"!==e.name}))),E=C.sendEncodingParameters||[{ssrc:1001*(2*s+2)}];var N,z=!1;if("sendrecv"===_||"sendonly"===_){if(z=!C.rtpReceiver,T=C.rtpReceiver||new e.RTCRtpReceiver(C.dtlsTransport,p),z)O=T.track,b&&"-"===b.stream||(b?(l[b.stream]||(l[b.stream]=new e.MediaStream,Object.defineProperty(l[b.stream],"id",{get:function(){return b.stream}})),Object.defineProperty(O,"id",{get:function(){return b.track}}),N=l[b.stream]):(l.default||(l.default=new e.MediaStream),N=l.default)),N&&(r(O,N),C.associatedRemoteMediaStreams.push(N)),d.push([O,T,N])}else C.rtpReceiver&&C.rtpReceiver.track&&(C.associatedRemoteMediaStreams.forEach((function(t){var r=t.getTracks().find((function(e){return e.id===C.rtpReceiver.track.id}));r&&function(t,r){r.removeTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(r,t)})),C.associatedRemoteMediaStreams=[]);C.localCapabilities=k,C.remoteCapabilities=A,C.rtpReceiver=T,C.rtcpParameters=j,C.sendEncodingParameters=E,C.recvEncodingParameters=P,f._transceive(f.transceivers[s],!1,z)}}})),void 0===f._dtlsRole&&(f._dtlsRole="offer"===o.type?"active":"passive"),f._remoteDescription={type:o.type,sdp:o.sdp},"offer"===o.type?f._updateSignalingState("have-remote-offer"):f._updateSignalingState("stable"),Object.keys(l).forEach((function(t){var r=l[t];if(r.getTracks().length){if(-1===f.remoteStreams.indexOf(r)){f.remoteStreams.push(r);var n=new Event("addstream");n.stream=r,e.setTimeout((function(){f._dispatchEvent("addstream",n)}))}d.forEach((function(e){var t=e[0],n=e[1];r.id===e[2].id&&u(f,t,n,[r])}))}})),d.forEach((function(e){e[2]||u(f,e[0],e[1],[])})),e.setTimeout((function(){f&&f.transceivers&&f.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},f.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},f.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},f.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},f.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",r)}},f.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var r=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",r)}},f.prototype.createOffer=function(){var r=this;if(r._isClosed)return Promise.reject(s("InvalidStateError","Can not call createOffer after close"));var i=r.transceivers.filter((function(e){return"audio"===e.kind})).length,a=r.transceivers.filter((function(e){return"video"===e.kind})).length,c=arguments[0];if(c){if(c.mandatory||c.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==c.offerToReceiveAudio&&(i=!0===c.offerToReceiveAudio?1:!1===c.offerToReceiveAudio?0:c.offerToReceiveAudio),void 0!==c.offerToReceiveVideo&&(a=!0===c.offerToReceiveVideo?1:!1===c.offerToReceiveVideo?0:c.offerToReceiveVideo)}for(r.transceivers.forEach((function(e){"audio"===e.kind?--i<0&&(e.wantReceive=!1):"video"===e.kind&&--a<0&&(e.wantReceive=!1)}));i>0||a>0;)i>0&&(r._createTransceiver("audio"),i--),a>0&&(r._createTransceiver("video"),a--);var u=n.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.transceivers.forEach((function(o,i){var a=o.track,c=o.kind,s=o.mid||n.generateIdentifier();o.mid=s,o.iceGatherer||(o.iceGatherer=r._createIceGatherer(i,r.usingBundle));var u=e.RTCRtpSender.getCapabilities(c);t<15019&&(u.codecs=u.codecs.filter((function(e){return"rtx"!==e.name}))),u.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),o.remoteCapabilities&&o.remoteCapabilities.codecs&&o.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),u.headerExtensions.forEach((function(e){(o.remoteCapabilities&&o.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var f=o.sendEncodingParameters||[{ssrc:1001*(2*i+1)}];a&&t>=15019&&"video"===c&&!f[0].rtx&&(f[0].rtx={ssrc:f[0].ssrc+1}),o.wantReceive&&(o.rtpReceiver=new e.RTCRtpReceiver(o.dtlsTransport,c)),o.localCapabilities=u,o.sendEncodingParameters=f})),"max-compat"!==r._config.bundlePolicy&&(u+="a=group:BUNDLE "+r.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),u+="a=ice-options:trickle\r\n",r.transceivers.forEach((function(e,t){u+=o(e,e.localCapabilities,"offer",e.stream,r._dtlsRole),u+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===r.iceGatheringState||0!==t&&r.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,u+="a="+n.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(u+="a=end-of-candidates\r\n"))}));var f=new e.RTCSessionDescription({type:"offer",sdp:u});return Promise.resolve(f)},f.prototype.createAnswer=function(){var r=this;if(r._isClosed)return Promise.reject(s("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==r.signalingState&&"have-local-pranswer"!==r.signalingState)return Promise.reject(s("InvalidStateError","Can not call createAnswer in signalingState "+r.signalingState));var a=n.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.usingBundle&&(a+="a=group:BUNDLE "+r.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),a+="a=ice-options:trickle\r\n";var c=n.getMediaSections(r._remoteDescription.sdp).length;r.transceivers.forEach((function(e,n){if(!(n+1>c)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?a+="m=application 0 DTLS/SCTP 5000\r\n":a+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?a+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(a+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(a+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var s;if(e.stream)"audio"===e.kind?s=e.stream.getAudioTracks()[0]:"video"===e.kind&&(s=e.stream.getVideoTracks()[0]),s&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var u=i(e.localCapabilities,e.remoteCapabilities);!u.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,a+=o(e,u,"answer",e.stream,r._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(a+="a=rtcp-rsize\r\n")}}));var u=new e.RTCSessionDescription({type:"answer",sdp:a});return Promise.resolve(u)},f.prototype.addIceCandidate=function(e){var t,r=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(o,i){if(!r._remoteDescription)return i(s("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var a=e.sdpMLineIndex;if(e.sdpMid)for(var u=0;u<r.transceivers.length;u++)if(r.transceivers[u].mid===e.sdpMid){a=u;break}var f=r.transceivers[a];if(!f)return i(s("OperationError","Can not add ICE candidate"));if(f.rejected)return o();var l=Object.keys(e.candidate).length>0?n.parseCandidate(e.candidate):{};if("tcp"===l.protocol&&(0===l.port||9===l.port))return o();if(l.component&&1!==l.component)return o();if((0===a||a>0&&f.iceTransport!==r.transceivers[0].iceTransport)&&!c(f.iceTransport,l))return i(s("OperationError","Can not add ICE candidate"));var d=e.candidate.trim();0===d.indexOf("a=")&&(d=d.substr(2)),(t=n.getMediaSections(r._remoteDescription.sdp))[a]+="a="+(l.type?d:"end-of-candidates")+"\r\n",r._remoteDescription.sdp=n.getDescription(r._remoteDescription.sdp)+t.join("")}else for(var p=0;p<r.transceivers.length&&(r.transceivers[p].rejected||(r.transceivers[p].iceTransport.addRemoteCandidate({}),(t=n.getMediaSections(r._remoteDescription.sdp))[p]+="a=end-of-candidates\r\n",r._remoteDescription.sdp=n.getDescription(r._remoteDescription.sdp)+t.join(""),!r.usingBundle));p++);o()}))},f.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var r=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?r=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(r=e.rtpReceiver)})),!r)throw s("InvalidAccessError","Invalid selector.");return r.getStats()}var n=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&n.push(e[t].getStats())}))})),Promise.all(n).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var r=e[t];if(r&&r.prototype&&r.prototype.getStats){var n=r.prototype.getStats;r.prototype.getStats=function(){return n.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(r){var n;e[r].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(n=e[r]).type]||n.type,t.set(r,e[r])})),t}))}}}));var l=["createOffer","createAnswer"];return l.forEach((function(e){var t=f.prototype[e];f.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(l=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=f.prototype[e];f.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=f.prototype[e];f.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),f}},882:function(e){"use strict";var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},t.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},t.getDescription=function(e){var r=t.splitSections(e);return r&&r[0]},t.getMediaSections=function(e){var r=t.splitSections(e);return r.shift(),r},t.matchPrefix=function(e,r){return t.splitLines(e).filter((function(e){return 0===e.indexOf(r)}))},t.parseCandidate=function(e){for(var t,r={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},n=8;n<t.length;n+=2)switch(t[n]){case"raddr":r.relatedAddress=t[n+1];break;case"rport":r.relatedPort=parseInt(t[n+1],10);break;case"tcptype":r.tcpType=t[n+1];break;case"ufrag":r.ufrag=t[n+1],r.usernameFragment=t[n+1];break;default:r[t[n]]=t[n+1]}return r},t.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){var t=e.substr(9).split(" "),r={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),r.name=t[0],r.clockRate=parseInt(t[1],10),r.channels=3===t.length?parseInt(t[2],10):1,r.numChannels=r.channels,r},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var r=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==r?"/"+r:"")+"\r\n"},t.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){for(var t,r={},n=e.substr(e.indexOf(" ")+1).split(";"),o=0;o<n.length;o++)r[(t=n[o].trim().split("="))[0].trim()]=t[1];return r},t.writeFmtp=function(e){var t="",r=e.payloadType;if(void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var n=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?n.push(t+"="+e.parameters[t]):n.push(t)})),t+="a=fmtp:"+r+" "+n.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t="",r=e.payloadType;return void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+r+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){var t=e.indexOf(" "),r={ssrc:parseInt(e.substr(7,t-7),10)},n=e.indexOf(":",t);return n>-1?(r.attribute=e.substr(t+1,n-t-1),r.value=e.substr(n+1)):r.attribute=e.substr(t+1),r},t.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},t.getMid=function(e){var r=t.matchPrefix(e,"a=mid:")[0];if(r)return r.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},t.getDtlsParameters=function(e,r){return{role:"auto",fingerprints:t.matchPrefix(e+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var r="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){r+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),r},t.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,r){return t.matchPrefix(e+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,r){var n=t.matchPrefix(e+r,"a=ice-ufrag:")[0],o=t.matchPrefix(e+r,"a=ice-pwd:")[0];return n&&o?{usernameFragment:n.substr(12),password:o.substr(10)}:null},t.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},t.parseRtpParameters=function(e){for(var r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=t.splitLines(e)[0].split(" "),o=3;o<n.length;o++){var i=n[o],a=t.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(a){var c=t.parseRtpMap(a),s=t.matchPrefix(e,"a=fmtp:"+i+" ");switch(c.parameters=s.length?t.parseFmtp(s[0]):{},c.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(t.parseRtcpFb),r.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(c.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach((function(e){r.headerExtensions.push(t.parseExtmap(e))})),r},t.writeRtpDescription=function(e,r){var n="";n+="m="+e+" ",n+=r.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=r.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",r.codecs.forEach((function(e){n+=t.writeRtpMap(e),n+=t.writeFmtp(e),n+=t.writeRtcpFb(e)}));var o=0;return r.codecs.forEach((function(e){e.maxptime>o&&(o=e.maxptime)})),o>0&&(n+="a=maxptime:"+o+"\r\n"),n+="a=rtcp-mux\r\n",r.headerExtensions&&r.headerExtensions.forEach((function(e){n+=t.writeExtmap(e)})),n},t.parseRtpEncodingParameters=function(e){var r,n=[],o=t.parseRtpParameters(e),i=-1!==o.fecMechanisms.indexOf("RED"),a=-1!==o.fecMechanisms.indexOf("ULPFEC"),c=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),s=c.length>0&&c[0].ssrc,u=t.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===s&&(r=u[0][1]),o.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:s,codecPayloadType:parseInt(e.parameters.apt,10)};s&&r&&(t.rtx={ssrc:r}),n.push(t),i&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:s,mechanism:a?"red+ulpfec":"red"},n.push(t))}})),0===n.length&&s&&n.push({ssrc:s});var f=t.matchPrefix(e,"b=");return f.length&&(f=0===f[0].indexOf("b=TIAS:")?parseInt(f[0].substr(7),10):0===f[0].indexOf("b=AS:")?1e3*parseInt(f[0].substr(5),10)*.95-16e3:void 0,n.forEach((function(e){e.maxBitrate=f}))),n},t.parseRtcpParameters=function(e){var r={},n=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];n&&(r.cname=n.value,r.ssrc=n.ssrc);var o=t.matchPrefix(e,"a=rtcp-rsize");r.reducedSize=o.length>0,r.compound=0===o.length;var i=t.matchPrefix(e,"a=rtcp-mux");return r.mux=i.length>0,r},t.parseMsid=function(e){var r,n=t.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(r=n[0].substr(7).split(" "))[0],track:r[1]};var o=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return o.length>0?{stream:(r=o[0].value.split(" "))[0],track:r[1]}:void 0},t.parseSctpDescription=function(e){var r,n=t.parseMLine(e),o=t.matchPrefix(e,"a=max-message-size:");o.length>0&&(r=parseInt(o[0].substr(19),10)),isNaN(r)&&(r=65536);var i=t.matchPrefix(e,"a=sctp-port:");if(i.length>0)return{port:parseInt(i[0].substr(12),10),protocol:n.fmt,maxMessageSize:r};if(t.matchPrefix(e,"a=sctpmap:").length>0){var a=t.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:r}}},t.writeSctpDescription=function(e,t){var r=[];return r="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&r.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),r.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,r,n){var o=void 0!==r?r:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.writeMediaSection=function(e,r,n,o){var i=t.writeRtpDescription(e.kind,r);if(i+=t.writeIceParameters(e.iceGatherer.getLocalParameters()),i+=t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),i+="a=mid:"+e.mid+"\r\n",e.direction?i+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?i+="a=sendrecv\r\n":e.rtpSender?i+="a=sendonly\r\n":e.rtpReceiver?i+="a=recvonly\r\n":i+="a=inactive\r\n",e.rtpSender){var a="msid:"+o.id+" "+e.rtpSender.track.id+"\r\n";i+="a="+a,i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,i+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+"\r\n"),i},t.getDirection=function(e,r){for(var n=t.splitLines(e),o=0;o<n.length;o++)switch(n[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[o].substr(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var r=t.splitLines(e)[0].substr(2).split(" ");return{kind:r[0],port:parseInt(r[1],10),protocol:r[2],fmt:r.slice(3).join(" ")}},t.parseOLine=function(e){var r=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:r[0],sessionId:r[1],sessionVersion:parseInt(r[2],10),netType:r[3],addressType:r[4],address:r[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var r=t.splitLines(e),n=0;n<r.length;n++)if(r[n].length<2||"="!==r[n].charAt(1))return!1;return!0},e.exports=t},971:function(e,t,r){var n=r(195),o=r(15),i=[r(257)];e.exports=n.createStore(o,i)},257:function(e,t,r){e.exports=function(){return r(703),{}}},703:function(){"object"!=typeof JSON&&(JSON={}),function(){"use strict";var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta,rep;function f(e){return e<10?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,(function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function str(e,t){var r,n,o,i,a,c=gap,s=t[e];switch(s&&"object"==typeof s&&"function"==typeof s.toJSON&&(s=s.toJSON(e)),"function"==typeof rep&&(s=rep.call(t,e,s)),typeof s){case"string":return quote(s);case"number":return isFinite(s)?String(s):"null";case"boolean":case"null":return String(s);case"object":if(!s)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(s)){for(i=s.length,r=0;r<i;r+=1)a[r]=str(r,s)||"null";return o=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+c+"]":"["+a.join(",")+"]",gap=c,o}if(rep&&"object"==typeof rep)for(i=rep.length,r=0;r<i;r+=1)"string"==typeof rep[r]&&(o=str(n=rep[r],s))&&a.push(quote(n)+(gap?": ":":")+o);else for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(o=str(n,s))&&a.push(quote(n)+(gap?": ":":")+o);return o=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+c+"}":"{"+a.join(",")+"}",gap=c,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value),"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,r){var n;if(gap="",indent="","number"==typeof r)for(n=0;n<r;n+=1)indent+=" ";else"string"==typeof r&&(indent=r);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var r,n,o=e[t];if(o&&"object"==typeof o)for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(void 0!==(n=walk(o,r))?o[r]=n:delete o[r]);return reviver.call(e,t,o)}if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()},195:function(e,t,r){var n=r(78),o=n.slice,i=n.pluck,a=n.each,c=n.bind,s=n.create,u=n.isList,f=n.isFunction,l=n.isObject;e.exports={createStore:p};var d={version:"2.0.12",enabled:!1,get:function(e,t){var r=this.storage.read(this._namespacePrefix+e);return this._deserialize(r,t)},set:function(e,t){return void 0===t?this.remove(e):(this.storage.write(this._namespacePrefix+e,this._serialize(t)),t)},remove:function(e){this.storage.remove(this._namespacePrefix+e)},each:function(e){var t=this;this.storage.each((function(r,n){e.call(t,t._deserialize(r),(n||"").replace(t._namespaceRegexp,""))}))},clearAll:function(){this.storage.clearAll()},hasNamespace:function(e){return this._namespacePrefix=="__storejs_"+e+"_"},createStore:function(){return p.apply(this,arguments)},addPlugin:function(e){this._addPlugin(e)},namespace:function(e){return p(this.storage,this.plugins,e)}};function p(e,t,r){r||(r=""),e&&!u(e)&&(e=[e]),t&&!u(t)&&(t=[t]);var n=r?"__storejs_"+r+"_":"",p=r?new RegExp("^"+n):null;if(!/^[a-zA-Z0-9_\-]*$/.test(r))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var h={_namespacePrefix:n,_namespaceRegexp:p,_testStorage:function(e){try{var t="__storejs__test__";e.write(t,t);var r=e.read(t)===t;return e.remove(t),r}catch(e){return!1}},_assignPluginFnProp:function(e,t){var r=this[t];this[t]=function(){var t=o(arguments,0),n=this;var i=[function(){if(r)return a(arguments,(function(e,r){t[r]=e})),r.apply(n,t)}].concat(t);return e.apply(n,i)}},_serialize:function(e){return JSON.stringify(e)},_deserialize:function(e,t){if(!e)return t;var r="";try{r=JSON.parse(e)}catch(t){r=e}return void 0!==r?r:t},_addStorage:function(e){this.enabled||this._testStorage(e)&&(this.storage=e,this.enabled=!0)},_addPlugin:function(e){var t=this;if(u(e))a(e,(function(e){t._addPlugin(e)}));else if(!i(this.plugins,(function(t){return e===t}))){if(this.plugins.push(e),!f(e))throw new Error("Plugins must be function values that return objects");var r=e.call(this);if(!l(r))throw new Error("Plugins must return an object of function properties");a(r,(function(r,n){if(!f(r))throw new Error("Bad plugin property: "+n+" from plugin "+e.name+". Plugins should only return functions.");t._assignPluginFnProp(r,n)}))}},addStorage:function(e){!function(){var e="undefined"==typeof console?null:console;e&&(e.warn?e.warn:e.log).apply(e,arguments)}("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(e)}},v=s(h,d,{plugins:[]});return v.raw={},a(v,(function(e,t){f(e)&&(v.raw[t]=c(v,e))})),a(e,(function(e){v._addStorage(e)})),a(t,(function(e){v._addPlugin(e)})),v}},78:function(e,t,r){var n=Object.assign?Object.assign:function(e,t,r,n){for(var o=1;o<arguments.length;o++)s(Object(arguments[o]),(function(t,r){e[r]=t}));return e},o=function(){if(Object.create)return function(e,t,r,o){var i=c(arguments,1);return n.apply(this,[Object.create(e)].concat(i))};{function e(){}return function(t,r,o,i){var a=c(arguments,1);return e.prototype=t,n.apply(this,[new e].concat(a))}}}(),i=String.prototype.trim?function(e){return String.prototype.trim.call(e)}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},a="undefined"!=typeof window?window:r.g;function c(e,t){return Array.prototype.slice.call(e,t||0)}function s(e,t){u(e,(function(e,r){return t(e,r),!1}))}function u(e,t){if(f(e)){for(var r=0;r<e.length;r++)if(t(e[r],r))return e[r]}else for(var n in e)if(e.hasOwnProperty(n)&&t(e[n],n))return e[n]}function f(e){return null!=e&&"function"!=typeof e&&"number"==typeof e.length}e.exports={assign:n,create:o,trim:i,bind:function(e,t){return function(){return t.apply(e,Array.prototype.slice.call(arguments,0))}},slice:c,each:s,map:function(e,t){var r=f(e)?[]:{};return u(e,(function(e,n){return r[n]=t(e,n),!1})),r},pluck:u,isList:f,isFunction:function(e){return e&&"[object Function]"==={}.toString.call(e)},isObject:function(e){return e&&"[object Object]"==={}.toString.call(e)},Global:a}},15:function(e,t,r){e.exports=[r(627),r(347),r(524),r(580),r(855),r(728)]},580:function(e,t,r){var n=r(78),o=n.Global,i=n.trim;e.exports={name:"cookieStorage",read:function(e){if(!e||!u(e))return null;var t="(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(a.cookie.replace(new RegExp(t),"$1"))},write:function(e,t){if(!e)return;a.cookie=escape(e)+"="+escape(t)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/"},each:c,remove:s,clearAll:function(){c((function(e,t){s(t)}))}};var a=o.document;function c(e){for(var t=a.cookie.split(/; ?/g),r=t.length-1;r>=0;r--)if(i(t[r])){var n=t[r].split("="),o=unescape(n[0]);e(unescape(n[1]),o)}}function s(e){e&&u(e)&&(a.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function u(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(a.cookie)}},627:function(e,t,r){var n=r(78).Global;function o(){return n.localStorage}function i(e){return o().getItem(e)}e.exports={name:"localStorage",read:i,write:function(e,t){return o().setItem(e,t)},each:function(e){for(var t=o().length-1;t>=0;t--){var r=o().key(t);e(i(r),r)}},remove:function(e){return o().removeItem(e)},clearAll:function(){return o().clear()}}},728:function(e){e.exports={name:"memoryStorage",read:function(e){return t[e]},write:function(e,r){t[e]=r},each:function(e){for(var r in t)t.hasOwnProperty(r)&&e(t[r],r)},remove:function(e){delete t[e]},clearAll:function(e){t={}}};var t={}},347:function(e,t,r){var n=r(78).Global;e.exports={name:"oldFF-globalStorage",read:function(e){return o[e]},write:function(e,t){o[e]=t},each:i,remove:function(e){return o.removeItem(e)},clearAll:function(){i((function(e,t){delete o[e]}))}};var o=n.globalStorage;function i(e){for(var t=o.length-1;t>=0;t--){var r=o.key(t);e(o[r],r)}}},524:function(e,t,r){var n=r(78).Global;e.exports={name:"oldIE-userDataStorage",write:function(e,t){if(c)return;var r=u(e);a((function(e){e.setAttribute(r,t),e.save(o)}))},read:function(e){if(c)return;var t=u(e),r=null;return a((function(e){r=e.getAttribute(t)})),r},each:function(e){a((function(t){for(var r=t.XMLDocument.documentElement.attributes,n=r.length-1;n>=0;n--){var o=r[n];e(t.getAttribute(o.name),o.name)}}))},remove:function(e){var t=u(e);a((function(e){e.removeAttribute(t),e.save(o)}))},clearAll:function(){a((function(e){var t=e.XMLDocument.documentElement.attributes;e.load(o);for(var r=t.length-1;r>=0;r--)e.removeAttribute(t[r].name);e.save(o)}))}};var o="storejs",i=n.document,a=function(){if(!i||!i.documentElement||!i.documentElement.addBehavior)return null;var e,t,r,n="script";try{(t=new ActiveXObject("htmlfile")).open(),t.write("<"+n+">document.w=window</"+n+'><iframe src="/favicon.ico"></iframe>'),t.close(),e=t.w.frames[0].document,r=e.createElement("div")}catch(t){r=i.createElement("div"),e=i.body}return function(t){var n=[].slice.call(arguments,0);n.unshift(r),e.appendChild(r),r.addBehavior("#default#userData"),r.load(o),t.apply(this,n),e.removeChild(r)}}(),c=(n.navigator?n.navigator.userAgent:"").match(/ (MSIE 8|MSIE 9|MSIE 10)\./);var s=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function u(e){return e.replace(/^\d/,"___$&").replace(s,"___")}},855:function(e,t,r){var n=r(78).Global;function o(){return n.sessionStorage}function i(e){return o().getItem(e)}e.exports={name:"sessionStorage",read:i,write:function(e,t){return o().setItem(e,t)},each:function(e){for(var t=o().length-1;t>=0;t--){var r=o().key(t);e(i(r),r)}},remove:function(e){return o().removeItem(e)},clearAll:function(){return o().clear()}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=function(e,t){for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};!function(){"use strict";var e={};__webpack_require__.r(e),__webpack_require__.d(e,{fixNegotiationNeeded:function(){return A},shimAddTrackRemoveTrack:function(){return M},shimAddTrackRemoveTrackWithNative:function(){return O},shimGetDisplayMedia:function(){return S},shimGetSendersWithDtmf:function(){return E},shimGetStats:function(){return P},shimGetUserMedia:function(){return w},shimMediaStream:function(){return R},shimOnTrack:function(){return T},shimPeerConnection:function(){return D},shimSenderReceiverGetStats:function(){return k}});var t={};__webpack_require__.r(t),__webpack_require__.d(t,{shimGetDisplayMedia:function(){return N},shimGetUserMedia:function(){return L},shimPeerConnection:function(){return z},shimReplaceTrack:function(){return F}});var r={};__webpack_require__.r(r),__webpack_require__.d(r,{shimAddTransceiver:function(){return X},shimCreateAnswer:function(){return Q},shimCreateOffer:function(){return Y},shimGetDisplayMedia:function(){return B},shimGetParameters:function(){return $},shimGetUserMedia:function(){return U},shimOnTrack:function(){return G},shimPeerConnection:function(){return q},shimRTCDataChannel:function(){return H},shimReceiverGetStats:function(){return V},shimRemoveStream:function(){return J},shimSenderGetStats:function(){return W}});var n={};__webpack_require__.r(n),__webpack_require__.d(n,{shimAudioContext:function(){return ae},shimCallbacksAPI:function(){return ee},shimConstraints:function(){return re},shimCreateOfferLegacy:function(){return ie},shimGetUserMedia:function(){return te},shimLocalStreamsAPI:function(){return K},shimRTCIceServerUrls:function(){return ne},shimRemoteStreamsAPI:function(){return Z},shimTrackEventTransceiver:function(){return oe}});var o={};function i(){var e={},t=!0,r=0;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],r++);for(var n=function(r){for(var n in r)r.hasOwnProperty(n)&&(t&&"[object Object]"===Object.prototype.toString.call(r[n])?e[n]=i(e[n],r[n]):e[n]=r[n])};r<arguments.length;r++)n(arguments[r]);return e}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===a(i)?i:String(i)),n)}var o,i}__webpack_require__.r(o),__webpack_require__.d(o,{removeExtmapAllowMixed:function(){return pe},shimAddIceCandidateNullOrEmpty:function(){return he},shimConnectionState:function(){return de},shimMaxMessageSize:function(){return fe},shimRTCIceCandidate:function(){return ue},shimSendThrowTypeError:function(){return le}});var s=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._defaults={variationsListSelector:".woocommerce_variations",variationsMetaBoxSelector:"#variable_product_options",mutationObserverConfig:{childList:!0},metaBoxMutationObserverConfig:{childList:!0}},this.options=i(this._defaults,r,!0),this.callback=t||null,null===this.callback)throw new Error("No valid callback was passed.")}var t,r,n;return t=e,(r=[{key:"canStart",value:function(){return null!==document.querySelector(this.options.variationsListSelector)}},{key:"start",value:function(){if(!this.canStart())throw new Error("Cannot start variations observer.");this.stop();var e=document.querySelector(this.options.variationsListSelector);this.observer=new MutationObserver(this.callback),this.observer.observe(e,this.options.mutationObserverConfig)}},{key:"stop",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.metaBoxObserver&&(this.metaBoxObserver.disconnect(),this.metaBoxObserver=null)}},{key:"startWhenPossible",value:function(){var e=this;try{this.start()}catch(r){if(this.metaBoxObserver)return;var t=document.querySelector(this.options.variationsMetaBoxSelector);this.metaBoxObserver=new MutationObserver((function(t){try{e.start()}catch(e){return}e.callback(t)})),this.metaBoxObserver.observe(t,this.options.metaBoxMutationObserverConfig)}}}])&&c(t.prototype,r),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(){var e={},t=!0,r=0;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],r++);for(var n=function(r){for(var n in r)r.hasOwnProperty(n)&&(t&&"[object Object]"===Object.prototype.toString.call(r[n])?e[n]=u(e[n],r[n]):e[n]=r[n])};r<arguments.length;r++)n(arguments[r]);return e}let f=!0,l=!0;function d(e,t,r){const n=e.match(t);return n&&n.length>=r&&parseInt(n[r],10)}function p(e,t,r){if(!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype,o=n.addEventListener;n.addEventListener=function(e,n){if(e!==t)return o.apply(this,arguments);const i=e=>{const t=r(e);t&&(n.handleEvent?n.handleEvent(t):n(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(n,i),o.apply(this,[e,i])};const i=n.removeEventListener;n.removeEventListener=function(e,r){if(e!==t||!this._eventMap||!this._eventMap[t])return i.apply(this,arguments);if(!this._eventMap[t].has(r))return i.apply(this,arguments);const n=this._eventMap[t].get(r);return this._eventMap[t].delete(r),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,i.apply(this,[e,n])},Object.defineProperty(n,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function h(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(f=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function v(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(l=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function m(){if("object"==typeof window){if(f)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function g(e,t){l&&console.warn(e+" is deprecated, please use "+t+" instead.")}function y(e){return"[object Object]"===Object.prototype.toString.call(e)}function _(e){return y(e)?Object.keys(e).reduce((function(t,r){const n=y(e[r]),o=n?_(e[r]):e[r],i=n&&!Object.keys(o).length;return void 0===o||i?t:Object.assign(t,{[r]:o})}),{}):e}function b(e,t,r){t&&!r.has(t.id)&&(r.set(t.id,t),Object.keys(t).forEach((n=>{n.endsWith("Id")?b(e,e.get(t[n]),r):n.endsWith("Ids")&&t[n].forEach((t=>{b(e,e.get(t),r)}))})))}function x(e,t,r){const n=r?"outbound-rtp":"inbound-rtp",o=new Map;if(null===t)return o;const i=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&i.push(e)})),i.forEach((t=>{e.forEach((r=>{r.type===n&&r.trackId===t.id&&b(e,r,o)}))})),o}const C=m;function w(e,t){const r=e&&e.navigator;if(!r.mediaDevices)return;const n=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((r=>{if("require"===r||"advanced"===r||"mediaSource"===r)return;const n="object"==typeof e[r]?e[r]:{ideal:e[r]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);const o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==n.ideal){t.optional=t.optional||[];let e={};"number"==typeof n.ideal?(e[o("min",r)]=n.ideal,t.optional.push(e),e={},e[o("max",r)]=n.ideal,t.optional.push(e)):(e[o("",r)]=n.ideal,t.optional.push(e))}void 0!==n.exact&&"number"!=typeof n.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",r)]=n.exact):["min","max"].forEach((e=>{void 0!==n[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,r)]=n[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},o=function(e,o){if(t.version>=61)return o(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=n(e.audio)}if(e&&"object"==typeof e.video){let i=e.video.facingMode;i=i&&("object"==typeof i?i:{ideal:i});const a=t.version<66;if(i&&("user"===i.exact||"environment"===i.exact||"user"===i.ideal||"environment"===i.ideal)&&(!r.mediaDevices.getSupportedConstraints||!r.mediaDevices.getSupportedConstraints().facingMode||a)){let t;if(delete e.video.facingMode,"environment"===i.exact||"environment"===i.ideal?t=["back","rear"]:"user"!==i.exact&&"user"!==i.ideal||(t=["front"]),t)return r.mediaDevices.enumerateDevices().then((r=>{let a=(r=r.filter((e=>"videoinput"===e.kind))).find((e=>t.some((t=>e.label.toLowerCase().includes(t)))));return!a&&r.length&&t.includes("back")&&(a=r[r.length-1]),a&&(e.video.deviceId=i.exact?{exact:a.deviceId}:{ideal:a.deviceId}),e.video=n(e.video),C("chrome: "+JSON.stringify(e)),o(e)}))}e.video=n(e.video)}return C("chrome: "+JSON.stringify(e)),o(e)},i=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(r.getUserMedia=function(e,t,n){o(e,(e=>{r.webkitGetUserMedia(e,t,(e=>{n&&n(i(e))}))}))}.bind(r),r.mediaDevices.getUserMedia){const e=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(t){return o(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>Promise.reject(i(e))))))}}}function S(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then((t=>{const n=r.video&&r.video.width,o=r.video&&r.video.height,i=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:i||3}},n&&(r.video.mandatory.maxWidth=n),o&&(r.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(r)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function R(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function T(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(r=>{let n;n=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===r.track.id)):{track:r.track};const o=new Event("track");o.track=r.track,o.receiver=n,o.transceiver={receiver:n},o.streams=[t.stream],this.dispatchEvent(o)})),t.stream.getTracks().forEach((r=>{let n;n=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===r.id)):{track:r};const o=new Event("track");o.track=r,o.receiver=n,o.transceiver={receiver:n},o.streams=[t.stream],this.dispatchEvent(o)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else p(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function E(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){let o=r.apply(this,arguments);return o||(o=t(this,e),this._senders.push(o)),o};const n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function P(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,r,n]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const o=function(e){const t={};return e.result().forEach((e=>{const r={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((t=>{r[t]=e.stat(t)})),t[r.id]=r})),t},i=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const n=function(e){r(i(o(e)))};return t.apply(this,[n,e])}return new Promise(((e,r)=>{t.apply(this,[function(t){e(i(o(t)))},r])})).then(r,n)}}function k(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>x(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),p(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>x(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,r,n;return this.getSenders().forEach((r=>{r.track===e&&(t?n=!0:t=r)})),this.getReceivers().forEach((t=>(t.track===e&&(r?n=!0:r=t),t.track===e))),n||t&&r?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():r?r.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function O(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const n=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(n)&&this._shimmedLocalStreams[r.id].push(n):this._shimmedLocalStreams[r.id]=[r,n],n};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();r.apply(this,arguments);const n=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(n)};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const r=this._shimmedLocalStreams[t].indexOf(e);-1!==r&&this._shimmedLocalStreams[t].splice(r,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),o.apply(this,arguments)}}function M(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return O(e);const r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=r.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const r=new e.MediaStream(t.getTracks());this._streams[t.id]=r,this._reverseStreams[r.id]=t,t=r}n.apply(this,[t])};const o=e.RTCPeerConnection.prototype.removeStream;function i(e,t){let r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const n=e._reverseStreams[t],o=e._streams[n.id];r=r.replace(new RegExp(o.id,"g"),n.id)})),new RTCSessionDescription({type:t.type,sdp:r})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,r){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const n=[].slice.call(arguments,1);if(1!==n.length||!n[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((e=>e.track===t)))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const o=this._streams[r.id];if(o)o.addTrack(t),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const n=new e.MediaStream([t]);this._streams[r.id]=n,this._reverseStreams[n.id]=r,this.addStream(n)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t],n={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?r.apply(this,[t=>{const r=i(this,t);e[0].apply(null,[r])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):r.apply(this,arguments).then((e=>i(this,e)))}};e.RTCPeerConnection.prototype[t]=n[t]}));const a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){let r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const n=e._reverseStreams[t],o=e._streams[n.id];r=r.replace(new RegExp(n.id,"g"),o.id)})),new RTCSessionDescription({type:t.type,sdp:r})}(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};const c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=c.get.apply(this);return""===e.type?e:i(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((r=>{this._streams[r].getTracks().find((t=>e.track===t))&&(t=this._streams[r])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function D(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t],n={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=n[t]}))}function A(e,t){p(e,"negotiationneeded",(e=>{const r=e.target;if(!(t.version<72||r.getConfiguration&&"plan-b"===r.getConfiguration().sdpSemantics)||"stable"===r.signalingState)return e}))}var j=__webpack_require__(539),I=__webpack_require__.n(j);function L(e){const t=e&&e.navigator,r=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return r(e).catch((e=>Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString(){return this.name}}}(e))))}}function N(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function z(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){const t=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(e){t.set.call(this,e);const r=new Event("enabled");r.enabled=e,this.dispatchEvent(r)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const r=I()(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e,t){let r=!1;return(e=JSON.parse(JSON.stringify(e))).filter((e=>{if(e&&(e.urls||e.url)){let t=e.urls||e.url;e.url&&!e.urls&&g("RTCIceServer.url","RTCIceServer.urls");const n="string"==typeof t;return n&&(t=[t]),t=t.filter((e=>{if(0===e.indexOf("stun:"))return!1;const t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!r?(r=!0,!0):t&&!r})),delete e.url,e.urls=n?t[0]:t,!!t.length}}))}(e.iceServers,t.version),m("ICE servers after filtering:",e.iceServers)),new r(e)},e.RTCPeerConnection.prototype=r.prototype}function F(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}function U(e,t){const r=e&&e.navigator,n=e&&e.MediaStreamTrack;if(r.getUserMedia=function(e,t,n){g("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(e).then(t,n)},!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const e=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])},t=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(r){return"object"==typeof r&&"object"==typeof r.audio&&(r=JSON.parse(JSON.stringify(r)),e(r.audio,"autoGainControl","mozAutoGainControl"),e(r.audio,"noiseSuppression","mozNoiseSuppression")),t(r)},n&&n.prototype.getSettings){const t=n.prototype.getSettings;n.prototype.getSettings=function(){const r=t.apply(this,arguments);return e(r,"mozAutoGainControl","autoGainControl"),e(r,"mozNoiseSuppression","noiseSuppression"),r}}if(n&&n.prototype.applyConstraints){const t=n.prototype.applyConstraints;n.prototype.applyConstraints=function(r){return"audio"===this.kind&&"object"==typeof r&&(r=JSON.parse(JSON.stringify(r)),e(r,"autoGainControl","mozAutoGainControl"),e(r,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[r])}}}}function B(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!r||!r.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===r.video?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function G(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function q(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t],n={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=n[t]}));const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,o,i]=arguments;return n.apply(this,[e||null]).then((e=>{if(t.version<53&&!o)try{e.forEach((e=>{e.type=r[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach(((t,n)=>{e.set(n,Object.assign({},t,{type:r[t.type]||t.type}))}))}return e})).then(o,i)}}function W(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function V(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),p(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function J(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){g("removeStream","removeTrack"),this.getSenders().forEach((t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)}))})}function H(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function X(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const e=arguments[1],r=e&&"sendEncodings"in e;r&&e.sendEncodings.forEach((e=>{if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const n=t.apply(this,arguments);if(r){const{sender:t}=n,r=t.getParameters();(!("encodings"in r)||1===r.encodings.length&&0===Object.keys(r.encodings[0]).length)&&(r.encodings=e.sendEncodings,t.sendEncodings=e.sendEncodings,this.setParametersPromises.push(t.setParameters(r).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return n})}function $(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function Y(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function Q(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function K(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((r=>t.call(this,r,e))),e.getVideoTracks().forEach((r=>t.call(this,r,e)))},e.RTCPeerConnection.prototype.addTrack=function(e,...r){return r&&r.forEach((e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const r=e.getTracks();this.getSenders().forEach((e=>{r.includes(e.track)&&this.removeTrack(e)}))})}}function Z(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const r=new Event("addstream");r.stream=t,e.dispatchEvent(r)}))}),t.apply(e,arguments)}}}function ee(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,r=t.createOffer,n=t.createAnswer,o=t.setLocalDescription,i=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],o=r.apply(this,[n]);return t?(o.then(e,t),Promise.resolve()):o},t.createAnswer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],o=n.apply(this,[r]);return t?(o.then(e,t),Promise.resolve()):o};let c=function(e,t,r){const n=o.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n};t.setLocalDescription=c,c=function(e,t,r){const n=i.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.setRemoteDescription=c,c=function(e,t,r){const n=a.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.addIceCandidate=c}function te(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,r=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>r(re(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,r,n){t.mediaDevices.getUserMedia(e).then(r,n)}.bind(t))}function re(e){return e&&void 0!==e.video?Object.assign({},e,{video:_(e.video)}):e}function ne(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,r){if(e&&e.iceServers){const t=[];for(let r=0;r<e.iceServers.length;r++){let n=e.iceServers[r];!n.hasOwnProperty("urls")&&n.hasOwnProperty("url")?(g("RTCIceServer.url","RTCIceServer.urls"),n=JSON.parse(JSON.stringify(n)),n.urls=n.url,delete n.url,t.push(n)):t.push(e.iceServers[r])}e.iceServers=t}return new t(e,r)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function oe(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function ie(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const r=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video")}return t.apply(this,arguments)}}function ae(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var ce=__webpack_require__(882),se=__webpack_require__.n(ce);function ue(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const r=new t(e),n=se().parseCandidate(e.candidate),o=Object.assign(r,n);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,p(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function fe(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(e){if(!e||!e.sdp)return!1;const t=se().splitSections(e.sdp);return t.shift(),t.some((e=>{const t=se().parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))}(arguments[0])){const e=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const r=parseInt(t[1],10);return r!=r?-1:r}(arguments[0]),r=function(e){let r=65536;return"firefox"===t.browser&&(r=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),r}(e),n=function(e,r){let n=65536;"firefox"===t.browser&&57===t.version&&(n=65535);const o=se().matchPrefix(e.sdp,"a=max-message-size:");return o.length>0?n=parseInt(o[0].substr(19),10):"firefox"===t.browser&&-1!==r&&(n=2147483637),n}(arguments[0],e);let o;o=0===r&&0===n?Number.POSITIVE_INFINITY:0===r||0===n?Math.max(r,n):Math.min(r,n);const i={};Object.defineProperty(i,"maxMessageSize",{get(){return o}}),this._sctp=i}return r.apply(this,arguments)}}function le(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const r=e.send;e.send=function(){const n=arguments[0],o=n.length||n.size||n.byteLength;if("open"===e.readyState&&t.sctp&&o>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return r.apply(e,arguments)}}const r=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=r.apply(this,arguments);return t(e,this),e},p(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function de(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const r=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const r=new Event("connectionstatechange",e);t.dispatchEvent(r)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}}))}function pe(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const r=t.sdp.split("\n").filter((e=>"a=extmap-allow-mixed"!==e.trim())).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:r}):t.sdp=r}return r.apply(this,arguments)}}function he(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const r=e.RTCPeerConnection.prototype.addIceCandidate;r&&0!==r.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}!function({window:i}={},a={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const c=m,s=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const{navigator:r}=e;if(r.mozGetUserMedia)t.browser="firefox",t.version=d(r.userAgent,/Firefox\/(\d+)\./,1);else if(r.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=d(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(r.mediaDevices&&r.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=d(r.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!r.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=d(r.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(i),u={browserDetails:s,commonShim:o,extractVersion:d,disableLog:h,disableWarnings:v};switch(s.browser){case"chrome":if(!e||!D||!a.shimChrome)return c("Chrome shim is not included in this adapter release."),u;if(null===s.version)return c("Chrome shim can not determine version, not shimming."),u;c("adapter.js shimming chrome."),u.browserShim=e,he(i,s),w(i,s),R(i),D(i,s),T(i),M(i,s),E(i),P(i),k(i),A(i,s),ue(i),de(i),fe(i,s),le(i),pe(i,s);break;case"firefox":if(!r||!q||!a.shimFirefox)return c("Firefox shim is not included in this adapter release."),u;c("adapter.js shimming firefox."),u.browserShim=r,he(i,s),U(i,s),q(i,s),G(i),J(i),W(i),V(i),H(i),X(i),$(i),Y(i),Q(i),ue(i),de(i),fe(i,s),le(i);break;case"edge":if(!t||!z||!a.shimEdge)return c("MS edge shim is not included in this adapter release."),u;c("adapter.js shimming edge."),u.browserShim=t,L(i),N(i),z(i,s),F(i),fe(i,s),le(i);break;case"safari":if(!n||!a.shimSafari)return c("Safari shim is not included in this adapter release."),u;c("adapter.js shimming safari."),u.browserShim=n,he(i,s),ne(i),ie(i),ee(i),K(i),Z(i),oe(i),te(i),ae(i),ue(i),fe(i,s),le(i),pe(i,s);break;default:c("Unsupported browser!")}}({window:"undefined"==typeof window?void 0:window});var ve=__webpack_require__(973),me=__webpack_require__.n(ve);function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(r),!0).forEach((function(t){be(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function be(e,t,r){return(t=Re(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xe(){xe=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),c=new R(o||[]);return n(a,"_invoke",{value:x(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l={};function d(){}function p(){}function h(){}var v={};s(v,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(T([])));g&&g!==t&&r.call(g,i)&&(v=g);var y=h.prototype=d.prototype=Object.create(v);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(n,i,a,c){var s=f(e[n],e,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==ge(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(l).then((function(e){u.value=e,a(u)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function x(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=C(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=f(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function C(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),l;var o=f(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,l;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function T(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=h,n(y,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=s(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},_(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(y),s(y,c,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=T,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function Ce(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function we(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Ce(i,n,o,a,c,"next",e)}function c(e){Ce(i,n,o,a,c,"throw",e)}a(void 0)}))}}function Se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Re(n.key),n)}}function Re(e){var t=function(e,t){if("object"!==ge(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ge(t)?t:String(t)}var Te=function(){function e(t,r,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root=t,this.successCallback=r;var i={settingsChangedCallback:null,errorCallback:null,viewport:t.querySelector(".zettle-barcode-scanner-viewport"),barcodeTypeSelect:t.querySelector('select[name="barcode_type"]'),cameraSelect:t.querySelector('select[name="camera"]'),streamSettings:{constraints:{width:640,height:480}}};this.options=u(i,n,!0),this.started=!1,this.lastSettings=null,t.querySelectorAll("select").forEach((function(e){e.addEventListener("change",(function(){var e=o.getSettings();o.options.settingsChangedCallback&&o.options.settingsChangedCallback(e,o),o.lastSettings=e,o.started&&o.restart()}))}))}var t,r,n,o;return t=e,r=[{key:"start",value:function(){var e=this;me().init(this._getQuaggaConfig(this.getSettings()),function(){var t=we(xe().mark((function t(r){var n,o,i;return xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=5;break}return console.log(r),e.options.errorCallback&&e.options.errorCallback(r,e),e.stop(),t.abrupt("return");case 5:return t.next=7,e._fillCameraSelect(e.options.cameraSelect);case 7:(i=null===(n=me().CameraAccess.getActiveTrack())||void 0===n||null===(o=n.getSettings())||void 0===o?void 0:o.deviceId)&&(e.options.cameraSelect.value=i),me().start(),me().onDetected((function(t){e.started&&e.successCallback(t.codeResult.code,e)})),e.started=!0;case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"stop",value:function(){this.started&&(me().offDetected(),me().stop(),this.started=!1)}},{key:"restart",value:function(){this.stop(),this.start()}},{key:"getSettings",value:function(){return{barcodeType:this.options.barcodeTypeSelect.value,cameraDeviceId:this.options.cameraSelect.value}}},{key:"updateSettingsUi",value:function(e){e.barcodeType&&(this.options.barcodeTypeSelect.value=e.barcodeType),this.lastSettings=e}},{key:"_getQuaggaConfig",value:function(e){var t,r=e.barcodeType.split(",").map(this._getQuaggaReader);return{inputStream:{name:"Live",type:"LiveStream",target:this.options.viewport,constraints:_e(_e({},this.options.streamSettings.constraints),null!==(t=this.lastSettings)&&void 0!==t&&t.cameraDeviceId?{deviceId:this.lastSettings.cameraDeviceId}:{})},decoder:{readers:r}}}},{key:"_getQuaggaReader",value:function(e){return"ean_extended"===e?{format:"ean_reader",config:{supplements:["ean_5_reader","ean_2_reader"]}}:{format:"".concat(e,"_reader"),config:{}}}},{key:"_fillCameraSelect",value:(o=we(xe().mark((function e(t){return xe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.length=0,e.next=3,me().CameraAccess.enumerateVideoDevices();case 3:e.sent.forEach((function(e){var r=document.createElement("option");r.value=e.deviceId,r.appendChild(document.createTextNode(e.label)),t.appendChild(r)}));case 5:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})}],r&&Se(t.prototype,r),n&&Se(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Ee=__webpack_require__(971),Pe=__webpack_require__.n(Ee),ke=[],Oe=function(e){if(!e.getAttribute("data-initialized")){var t="zettleBarcodeScanningSettings",r=e.parentElement.querySelector(".zettle-barcode-input-field"),n=r.querySelector("input"),o=new Te(e,(function(t,r){n.value=t,r.stop(),e.style.display="none"}),{errorCallback:function(t){alert(zettleBarcodeScanning.initErrorMessage),e.style.display="none"},settingsChangedCallback:function(e){Pe().set(t,e)}});ke.push(o),r.querySelector("button").addEventListener("click",(function(){var r="block"===e.style.display;if(document.querySelectorAll(".zettle-barcode-scan").forEach((function(e){e.style.display="none"})),ke.forEach((function(e){return e.stop()})),!r){var n=Pe().get(t);n&&o.updateSettingsUi(n),e.style.display="block",o.start()}})),e.setAttribute("data-initialized","true")}},Me=function(){document.querySelectorAll(".zettle-barcode-scan").forEach(Oe)};Me(),new s(Me).startWhenPossible()}()})();